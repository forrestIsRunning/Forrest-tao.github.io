<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>newpage</title>
    <link href="/2023/11/20/newpage/"/>
    <url>/2023/11/20/newpage/</url>
    
    <content type="html"><![CDATA[<p><img src="/.com//blog\myhexo\source_posts\newpage\dog.JPG"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>demo</title>
    <link href="/2023/11/20/demo/"/>
    <url>/2023/11/20/demo/</url>
    
    <content type="html"><![CDATA[<p><img src="/.com//blog\myhexo\source\images\dog.JPG" alt="dog"></p><p><img src="/.com//blog\myhexo\source\images\dog.JPG"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨docker-composeæ­å»ºelké›†ç¾¤</title>
    <link href="/2023/11/19/%E4%BD%BF%E7%94%A8docker-compose%E6%90%AD%E5%BB%BAelk%E9%9B%86%E7%BE%A4/"/>
    <url>/2023/11/19/%E4%BD%BF%E7%94%A8docker-compose%E6%90%AD%E5%BB%BAelk%E9%9B%86%E7%BE%A4/</url>
    
    <content type="html"><![CDATA[<p>docker-compose file and detailed tutorial </p><p><a href="https://github.com/deviantony/docker-elk/tree/main#setting-up-user-authentication">ELK dokcer-compose  deviantony&#x2F;docker-elk: The Elastic stack (ELK) powered by Docker and Compose. (github.com)</a></p><p><a href="https://www.elastic.co/cn/downloads/past-releases/filebeat-8-11-0">Filebeat 8.11.0 | Elastic download</a></p><p>è¿™é‡Œæ¨èES çš„ CSDN å®˜æ–¹åšå®¢ </p><p><a href="https://elasticstack.blog.csdn.net/?type=blog">Elastic ä¸­å›½ç¤¾åŒºå®˜æ–¹åšå®¢_Elastic,Elasticsearch,Kibana-CSDNåšå®¢</a></p><p>ELK çš„å·¥ä½œæµç¨‹</p><ol><li>Logstashç”¨äºæ”¶é›†ã€å¤„ç†ã€è½¬æ¢å¤šç§æ¥æºçš„å„ç§ç±»å‹çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬æ—¥å¿—æ–‡ä»¶ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“ã€ç½‘ç»œæµé‡ç­‰ã€‚</li><li>Elasticsearch  å®ƒç”¨äºè¿›è¡Œç´¢å¼•å’Œå­˜å‚¨</li><li>Kibanaæä¾›äº†ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼Œç”¨äºæœç´¢ã€åˆ†æã€<strong>å¯è§†åŒ–</strong>è¿™äº›æ•°æ®</li></ol><p>ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æ¥æ£€æµ‹æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">filebeat.exe <span class="hljs-built_in">test</span> config<br>filebeat.exe <span class="hljs-built_in">test</span> output<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">filebeat.exe -e<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>elk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>etcdå®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°</title>
    <link href="/2023/11/19/etcd%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/"/>
    <url>/2023/11/19/etcd%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°" class="headerlink" title="ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°"></a>ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°</h1><p>æœåŠ¡å‘ç°æ˜¯ä¸€ç§åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¯†åˆ«å’Œå®šä½å¯ç”¨æœåŠ¡çš„æœºåˆ¶ã€‚åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œç³»ç»Ÿè¢«åˆ†å‰²æˆå¤šä¸ªå°å‹æœåŠ¡ï¼ŒæœåŠ¡å‘ç°å…è®¸è¿™äº›æœåŠ¡ç›¸äº’å‘ç°å’Œé€šä¿¡ã€‚è€Œetcdè¿™ä¸ªå·¥å…·æä¾›äº†ä¸€ç§é›†ä¸­ç®¡ç†å’Œåè°ƒæœåŠ¡çš„æ–¹å¼ï¼Œä»è€Œæé«˜äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„çµæ´»æ€§ã€å¯æ‰©å±•æ€§å’Œå¯é æ€§ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50a6fc20d70d46be9794f7635dcb29c9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="æœåŠ¡æ³¨å†Œä¸å‘ç°"></p><p>æœåŠ¡å‘ç°éœ€è¦å®ç°ä»¥ä¸‹çš„åŸºæœ¬åŠŸèƒ½</p><ul><li><strong>æœåŠ¡æ³¨å†Œ</strong>ï¼š åŒä¸€ä¸ªserviceçš„æ‰€æœ‰èŠ‚ç‚¹æ³¨å†Œåˆ°ç›¸åŒç›®å½•ä¸‹ï¼ŒèŠ‚ç‚¹å¯åŠ¨åï¼Œå°†è‡ªå·±çš„ä¿¡æ¯æ³¨å†Œåˆ°æ‰€å±çš„æœåŠ¡ç›®å½•ä¸­</li><li><strong>å¥åº·æ£€æŸ¥</strong> ï¼šæœåŠ¡èŠ‚ç‚¹å®šæ—¶è¿›è¡Œå¥åº·æ£€æŸ¥ï¼Œæ³¨å†Œåˆ°æœåŠ¡ç›®å½•ä¸­çš„ä¿¡æ¯è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„TTLï¼Œè‹¥è¿æ¥å¤±è´¥ï¼Œåˆ™èŠ‚ç‚¹ä¸å¯ç”¨</li><li><strong>æœåŠ¡å‘ç°</strong>ï¼š é€šè¿‡æœåŠ¡èŠ‚ç‚¹èƒ½æŸ¥è¯¢åˆ°æœåŠ¡æä¾›å¤–éƒ¨è®¿é—®çš„ IP å’Œç«¯å£å·ã€‚æ¯”å¦‚ç½‘å…³ä»£ç†æœåŠ¡æ—¶èƒ½å¤ŸåŠæ—¶çš„å‘ç°æœåŠ¡ä¸­æ–°å¢èŠ‚ç‚¹ã€ä¸¢å¼ƒä¸å¯ç”¨çš„æœåŠ¡èŠ‚ç‚¹ã€‚</li></ul><h2 id="æœåŠ¡æ³¨å†ŒåŠå¥åº·æ£€æŸ¥"><a href="#æœåŠ¡æ³¨å†ŒåŠå¥åº·æ£€æŸ¥" class="headerlink" title="æœåŠ¡æ³¨å†ŒåŠå¥åº·æ£€æŸ¥"></a>æœåŠ¡æ³¨å†ŒåŠå¥åº·æ£€æŸ¥</h2><p>æ ¹æ®etcdçš„<code>v3 API</code>ï¼Œå½“å¯åŠ¨ä¸€ä¸ªæœåŠ¡æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠæœåŠ¡çš„åœ°å€å†™è¿›etcdï¼Œæ³¨å†ŒæœåŠ¡ã€‚åŒæ—¶ç»‘å®šç§Ÿçº¦ï¼ˆleaseï¼‰ï¼Œå¹¶ä»¥ç»­ç§Ÿçº¦ï¼ˆkeep leases aliveï¼‰çš„æ–¹å¼æ£€æµ‹æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œä»è€Œå®ç°å¥åº·æ£€æŸ¥ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br><br><span class="hljs-string">&quot;go.etcd.io/etcd/clientv3&quot;</span><br>)<br><br><span class="hljs-comment">//ServiceRegister åˆ›å»ºç§Ÿçº¦æ³¨å†ŒæœåŠ¡</span><br><span class="hljs-keyword">type</span> ServiceRegister <span class="hljs-keyword">struct</span> &#123;<br>cli     *clientv3.Client <span class="hljs-comment">//etcd client</span><br>leaseID clientv3.LeaseID <span class="hljs-comment">//ç§Ÿçº¦ID</span><br><span class="hljs-comment">//ç§Ÿçº¦keepalieveç›¸åº”chan</span><br>keepAliveChan &lt;-<span class="hljs-keyword">chan</span> *clientv3.LeaseKeepAliveResponse<br>key           <span class="hljs-type">string</span> <span class="hljs-comment">//key</span><br>val           <span class="hljs-type">string</span> <span class="hljs-comment">//value</span><br>&#125;<br><br><span class="hljs-comment">//NewServiceRegister æ–°å»ºæ³¨å†ŒæœåŠ¡</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewServiceRegister</span><span class="hljs-params">(endpoints []<span class="hljs-type">string</span>, key, val <span class="hljs-type">string</span>, lease <span class="hljs-type">int64</span>)</span></span> (*ServiceRegister, <span class="hljs-type">error</span>) &#123;<br>cli, err := clientv3.New(clientv3.Config&#123;<br>Endpoints:   endpoints,<br>DialTimeout: <span class="hljs-number">5</span> * time.Second,<br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatal(err)<br>&#125;<br><br>ser := &amp;ServiceRegister&#123;<br>cli: cli,<br>key: key,<br>val: val,<br>&#125;<br><br><span class="hljs-comment">//ç”³è¯·ç§Ÿçº¦è®¾ç½®æ—¶é—´keepalive</span><br><span class="hljs-keyword">if</span> err := ser.putKeyWithLease(lease); err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err<br>&#125;<br><br><span class="hljs-keyword">return</span> ser, <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-comment">//è®¾ç½®ç§Ÿçº¦</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceRegister)</span></span> putKeyWithLease(lease <span class="hljs-type">int64</span>) <span class="hljs-type">error</span> &#123;<br><span class="hljs-comment">//è®¾ç½®ç§Ÿçº¦æ—¶é—´</span><br>resp, err := s.cli.Grant(context.Background(), lease)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> err<br>&#125;<br><span class="hljs-comment">//æ³¨å†ŒæœåŠ¡å¹¶ç»‘å®šç§Ÿçº¦</span><br>_, err = s.cli.Put(context.Background(), s.key, s.val, clientv3.WithLease(resp.ID))<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> err<br>&#125;<br><span class="hljs-comment">//è®¾ç½®ç»­ç§Ÿ å®šæœŸå‘é€éœ€æ±‚è¯·æ±‚</span><br>leaseRespChan, err := s.cli.KeepAlive(context.Background(), resp.ID)<br><br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> err<br>&#125;<br>s.leaseID = resp.ID<br>log.Println(s.leaseID)<br>s.keepAliveChan = leaseRespChan<br>log.Printf(<span class="hljs-string">&quot;Put key:%s  val:%s  success!&quot;</span>, s.key, s.val)<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-comment">//ListenLeaseRespChan ç›‘å¬ ç»­ç§Ÿæƒ…å†µ</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceRegister)</span></span> ListenLeaseRespChan() &#123;<br><span class="hljs-keyword">for</span> leaseKeepResp := <span class="hljs-keyword">range</span> s.keepAliveChan &#123;<br>log.Println(<span class="hljs-string">&quot;ç»­çº¦æˆåŠŸ&quot;</span>, leaseKeepResp)<br>&#125;<br>log.Println(<span class="hljs-string">&quot;å…³é—­ç»­ç§Ÿ&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// Close æ³¨é”€æœåŠ¡</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceRegister)</span></span> Close() <span class="hljs-type">error</span> &#123;<br><span class="hljs-comment">//æ’¤é”€ç§Ÿçº¦</span><br><span class="hljs-keyword">if</span> _, err := s.cli.Revoke(context.Background(), s.leaseID); err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> err<br>&#125;<br>log.Println(<span class="hljs-string">&quot;æ’¤é”€ç§Ÿçº¦&quot;</span>)<br><span class="hljs-keyword">return</span> s.cli.Close()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> endpoints = []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;localhost:2379&quot;</span>&#125;<br>ser, err := NewServiceRegister(endpoints, <span class="hljs-string">&quot;/web/node1&quot;</span>, <span class="hljs-string">&quot;localhost:8000&quot;</span>, <span class="hljs-number">5</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-comment">//ç›‘å¬ç»­ç§Ÿç›¸åº”chan</span><br><span class="hljs-keyword">go</span> ser.ListenLeaseRespChan()<br><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-comment">// case &lt;-time.After(20 * time.Second):</span><br><span class="hljs-comment">// ser.Close()</span><br>&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="æœåŠ¡å‘ç°"><a href="#æœåŠ¡å‘ç°" class="headerlink" title="æœåŠ¡å‘ç°"></a>æœåŠ¡å‘ç°</h2><p>æ ¹æ®etcdçš„<code>v3 API</code>ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ä½¿ç”¨<code>Watch</code>ç›‘è§†æŸç±»æœåŠ¡ï¼Œé€šè¿‡<code>Watch</code>æ„ŸçŸ¥æœåŠ¡çš„<code>æ·»åŠ </code>ï¼Œ<code>ä¿®æ”¹</code>æˆ–<code>åˆ é™¤</code>æ“ä½œï¼Œä¿®æ”¹æœåŠ¡åˆ—è¡¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br><br><span class="hljs-string">&quot;github.com/coreos/etcd/mvcc/mvccpb&quot;</span><br><span class="hljs-string">&quot;go.etcd.io/etcd/clientv3&quot;</span><br>)<br><br><span class="hljs-comment">// ServiceDiscovery æœåŠ¡å‘ç°</span><br><span class="hljs-keyword">type</span> ServiceDiscovery <span class="hljs-keyword">struct</span> &#123;<br>cli        *clientv3.Client  <span class="hljs-comment">//etcd client</span><br>serverList <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span> <span class="hljs-comment">//æœåŠ¡åˆ—è¡¨</span><br>lock       sync.Mutex<br>&#125;a<br><br><span class="hljs-comment">// NewServiceDiscovery  æ–°å»ºå‘ç°æœåŠ¡</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewServiceDiscovery</span><span class="hljs-params">(endpoints []<span class="hljs-type">string</span>)</span></span> *ServiceDiscovery &#123;<br>cli, err := clientv3.New(clientv3.Config&#123;<br>Endpoints:   endpoints,<br>DialTimeout: <span class="hljs-number">5</span> * time.Second,<br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatal(err)<br>&#125;<br><br><span class="hljs-keyword">return</span> &amp;ServiceDiscovery&#123;<br>cli:        cli,<br>serverList: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>),<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// WatchService åˆå§‹åŒ–æœåŠ¡åˆ—è¡¨å’Œç›‘è§†</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceDiscovery)</span></span> WatchService(prefix <span class="hljs-type">string</span>) <span class="hljs-type">error</span> &#123;<br><span class="hljs-comment">//æ ¹æ®å‰ç¼€è·å–ç°æœ‰çš„key</span><br>resp, err := s.cli.Get(context.Background(), prefix, clientv3.WithPrefix())<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> err<br>&#125;<br><br><span class="hljs-keyword">for</span> _, ev := <span class="hljs-keyword">range</span> resp.Kvs &#123;<br>s.SetServiceList(<span class="hljs-type">string</span>(ev.Key), <span class="hljs-type">string</span>(ev.Value))<br>&#125;<br><br><span class="hljs-comment">//ç›‘è§†å‰ç¼€ï¼Œä¿®æ”¹å˜æ›´çš„server</span><br><span class="hljs-keyword">go</span> s.watcher(prefix)<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-comment">// watcher ç›‘å¬å‰ç¼€</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceDiscovery)</span></span> watcher(prefix <span class="hljs-type">string</span>) &#123;<br>rch := s.cli.Watch(context.Background(), prefix, clientv3.WithPrefix())<br>log.Printf(<span class="hljs-string">&quot;watching prefix:%s now...&quot;</span>, prefix)<br><span class="hljs-keyword">for</span> wresp := <span class="hljs-keyword">range</span> rch &#123;<br><span class="hljs-keyword">for</span> _, ev := <span class="hljs-keyword">range</span> wresp.Events &#123;<br><span class="hljs-keyword">switch</span> ev.Type &#123;<br><span class="hljs-keyword">case</span> mvccpb.PUT: <span class="hljs-comment">//ä¿®æ”¹æˆ–è€…æ–°å¢</span><br>s.SetServiceList(<span class="hljs-type">string</span>(ev.Kv.Key), <span class="hljs-type">string</span>(ev.Kv.Value))<br><span class="hljs-keyword">case</span> mvccpb.DELETE: <span class="hljs-comment">//åˆ é™¤</span><br>s.DelServiceList(<span class="hljs-type">string</span>(ev.Kv.Key))<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// SetServiceList æ–°å¢æœåŠ¡åœ°å€</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceDiscovery)</span></span> SetServiceList(key, val <span class="hljs-type">string</span>) &#123;<br>s.lock.Lock()<br><span class="hljs-keyword">defer</span> s.lock.Unlock()<br>s.serverList[key] = <span class="hljs-type">string</span>(val)<br>log.Println(<span class="hljs-string">&quot;put key :&quot;</span>, key, <span class="hljs-string">&quot;val:&quot;</span>, val)<br>&#125;<br><br><span class="hljs-comment">// DelServiceList åˆ é™¤æœåŠ¡åœ°å€</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceDiscovery)</span></span> DelServiceList(key <span class="hljs-type">string</span>) &#123;<br>s.lock.Lock()<br><span class="hljs-keyword">defer</span> s.lock.Unlock()<br><span class="hljs-built_in">delete</span>(s.serverList, key)<br>log.Println(<span class="hljs-string">&quot;del key:&quot;</span>, key)<br>&#125;<br><br><span class="hljs-comment">// GetServices è·å–æœåŠ¡åœ°å€</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceDiscovery)</span></span> GetServices() []<span class="hljs-type">string</span> &#123;<br>s.lock.Lock()<br><span class="hljs-keyword">defer</span> s.lock.Unlock()<br>addrs := <span class="hljs-built_in">make</span>([]<span class="hljs-type">string</span>, <span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> s.serverList &#123;<br>addrs = <span class="hljs-built_in">append</span>(addrs, v)<br>&#125;<br><span class="hljs-keyword">return</span> addrs<br>&#125;<br><br><span class="hljs-comment">// Close å…³é—­æœåŠ¡</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *ServiceDiscovery)</span></span> Close() <span class="hljs-type">error</span> &#123;<br><span class="hljs-keyword">return</span> s.cli.Close()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> endpoints = []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;localhost:2379&quot;</span>&#125;<br>ser := NewServiceDiscovery(endpoints)<br><span class="hljs-keyword">defer</span> ser.Close()<br>ser.WatchService(<span class="hljs-string">&quot;/web/&quot;</span>)<br>ser.WatchService(<span class="hljs-string">&quot;/gRPC/&quot;</span>)<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-keyword">case</span> &lt;-time.Tick(<span class="hljs-number">10</span> * time.Second):<br>log.Println(ser.GetServices())<br>&#125;<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>etcd</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ’åºæ–¹æ³•</title>
    <link href="/2023/11/19/%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95/"/>
    <url>/2023/11/19/%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>influxDBçš„ä½¿ç”¨</title>
    <link href="/2023/11/18/influxDB%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/11/18/influxDB%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><a href="https://www.influxdata.com/">InfluxDB</a>æ˜¯ä¸€ä¸ªå¼€æºåˆ†å¸ƒå¼æ—¶åºã€äº‹ä»¶å’ŒæŒ‡æ ‡æ•°æ®åº“ã€‚ä½¿ç”¨Goè¯­è¨€ç¼–å†™ï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯å®ç°åˆ†å¸ƒå¼å’Œæ°´å¹³ä¼¸ç¼©æ‰©å±•ã€‚</p><h2 id="win-ä½¿ç”¨docker-å®‰è£…-influxDB"><a href="#win-ä½¿ç”¨docker-å®‰è£…-influxDB" class="headerlink" title="win  ä½¿ç”¨docker å®‰è£… influxDB"></a>win  ä½¿ç”¨docker å®‰è£… influxDB</h2><p><a href="https://dl.influxdata.com/influxdb/releases/influxdb-1.7.7_windows_amd64.zip">https://dl.influxdata.com/influxdb/releases/influxdb-1.7.7_windows_amd64.zip</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker pull influxdb:latest<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d \<br>    --name influxdb \<br>    -p 8086:8086 \<br>    --volume /var/docker/influxdb2.0:/var/lib/influxdb2 \<br>    influxdb:latest<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span>  -it 9a78e3803fda /bin/bash<br></code></pre></td></tr></table></figure><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231118224557414.png" alt="image-20231118224557414"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231118213142006.png" alt="image-20231118213142006"> </p><p>token</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">7I2YKdt2QXHLeNu72LSkTp-MloUTTE5rhVDXL8gFmL95NO7C-5Ot4-bZon8PJwgrcsDamNWeIUOXPdVN90lwjA==<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">influx auth create -o org-name -all-access<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">O3TZy1oUlst_lzWhPbc4Fg9BNKb3HYNY_0g1S5E6liGghZTEpSgJgdKtQ2OHdXHtKl2_Uj4SVPc7OsL7t-x0Lg==<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">influx config <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p><a href="https://testerhome.com/column_channels/38060?order_by=like&">æ€ä¹ˆéƒ¨ç½²æ€§èƒ½ç›‘æ§å¹³å°ï¼Œå¤§ä½¬æŒ‡å®šä¸€ä¸‹ Â· TesterHome</a></p><p><a href="https://testerhome.com/topics/36405">Docker-Compose è½»æ¾æ­å»º Grafana+InfluxDb å®ç”¨ Jmeter ç›‘æ§é¢æ¿ Â· TesterHome</a></p><p>æŸ¥çœ‹é…ç½®</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br>influxdb2 <span class="hljs-string">&quot;github.com/influxdata/influxdb-client-go/v2&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">// Create a new client using an InfluxDB server base URL and an authentication token</span><br>client := influxdb2.NewClient(<span class="hljs-string">&quot;http://localhost:8086&quot;</span>, <span class="hljs-string">&quot;Ki-3lIwR1A8WIJuXIa1od_nH2B164qs0i4_yS7H1mJ_NqiAs_6AIJ8ZUYAtT69eWvx9RIVSGFVtzZyPQ7DgdgA==&quot;</span>)<br><span class="hljs-comment">// Use blocking write client for writes to desired bucket</span><br>writeAPI := client.WriteAPIBlocking(<span class="hljs-string">&quot;initOrgName&quot;</span>, <span class="hljs-string">&quot;initBucketName&quot;</span>)<br><span class="hljs-comment">// Create point using full params constructor</span><br>p := influxdb2.NewPoint(<span class="hljs-string">&quot;stat&quot;</span>,<br><span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;unit&quot;</span>: <span class="hljs-string">&quot;temperature&quot;</span>&#125;,<br><span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;&#123;<span class="hljs-string">&quot;avg&quot;</span>: <span class="hljs-number">24.5</span>, <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">45.0</span>&#125;,<br>time.Now())<br><span class="hljs-comment">// write point immediately</span><br>writeAPI.WritePoint(context.Background(), p)<br><span class="hljs-comment">// Create point using fluent style</span><br>p = influxdb2.NewPointWithMeasurement(<span class="hljs-string">&quot;stat&quot;</span>).<br>AddTag(<span class="hljs-string">&quot;unit&quot;</span>, <span class="hljs-string">&quot;temperature&quot;</span>).<br>AddField(<span class="hljs-string">&quot;avg&quot;</span>, <span class="hljs-number">23.2</span>).<br>AddField(<span class="hljs-string">&quot;max&quot;</span>, <span class="hljs-number">45.0</span>).<br>SetTime(time.Now())<br>err := writeAPI.WritePoint(context.Background(), p)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><span class="hljs-comment">// Or write directly line protocol</span><br>line := fmt.Sprintf(<span class="hljs-string">&quot;stat,unit=temperature avg=%f,max=%f&quot;</span>, <span class="hljs-number">23.5</span>, <span class="hljs-number">45.0</span>)<br>err = writeAPI.WriteRecord(context.Background(), line)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><br><span class="hljs-comment">// Get query client</span><br>queryAPI := client.QueryAPI(<span class="hljs-string">&quot;initOrgName&quot;</span>)<br><span class="hljs-comment">// Get parser flux query result</span><br>result, err := queryAPI.Query(context.Background(), <span class="hljs-string">`from(bucket:&quot;initBucketName&quot;)|&gt; range(start: -1h) |&gt; filter(fn: (r) =&gt; r._measurement == &quot;stat&quot;)`</span>)<br><span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-comment">// Use Next() to iterate over query result lines</span><br><span class="hljs-keyword">for</span> result.Next() &#123;<br><span class="hljs-comment">// Observe when there is new grouping key producing new table</span><br><span class="hljs-keyword">if</span> result.TableChanged() &#123;<br>fmt.Printf(<span class="hljs-string">&quot;table: %s\n&quot;</span>, result.TableMetadata().String())<br>&#125;<br><span class="hljs-comment">// read result</span><br>fmt.Printf(<span class="hljs-string">&quot;row: %s\n&quot;</span>, result.Record().String())<br>&#125;<br><span class="hljs-keyword">if</span> result.Err() != <span class="hljs-literal">nil</span> &#123;<br>fmt.Printf(<span class="hljs-string">&quot;Query error: %s\n&quot;</span>, result.Err().Error())<br>&#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><span class="hljs-comment">// Ensures background processes finishes</span><br><span class="hljs-keyword">defer</span> client.Close()<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ¦‚å¿µï¼ˆæ€»ç»“è‡ªStackOverflowï¼‰"><a href="#æ¦‚å¿µï¼ˆæ€»ç»“è‡ªStackOverflowï¼‰" class="headerlink" title="æ¦‚å¿µï¼ˆæ€»ç»“è‡ªStackOverflowï¼‰"></a>æ¦‚å¿µï¼ˆæ€»ç»“è‡ªStackOverflowï¼‰</h2><ul><li>A <strong>bucket</strong> is named location with retention policy where time-series data is stored.</li><li>A <strong>series</strong> is a logical grouping of data defined by shared measurement, tag and field.</li><li>A <strong>measurement</strong> is similar to an SQL <strong>database</strong> table.</li><li>A <strong>tag</strong> is similar to <strong>indexed columns</strong> in an SQL database.</li><li>A <strong>field</strong> is similar to <strong>unindexed columns</strong> in an SQL database.</li><li>A <strong>point</strong> is similar to SQL <strong>row</strong>.</li></ul><p>For example, a SQL table <code>workdone</code>:</p><table><thead><tr><th><strong><code>Email</code></strong></th><th><strong><code>Status</code></strong></th><th><strong><code>time</code></strong></th><th><strong><code>Completed</code></strong></th></tr></thead><tbody><tr><td><a href="mailto:&#108;&#x6f;&#x72;&#114;&#64;&#x69;&#110;&#x66;&#x6c;&#x75;&#120;&#x64;&#98;&#46;&#x63;&#111;&#x6d;">&#108;&#x6f;&#x72;&#114;&#64;&#x69;&#110;&#x66;&#x6c;&#x75;&#120;&#x64;&#98;&#46;&#x63;&#111;&#x6d;</a></td><td>start</td><td>1636775801000000000</td><td>76</td></tr><tr><td><a href="mailto:&#108;&#111;&#x72;&#x72;&#x40;&#x69;&#x6e;&#x66;&#108;&#x75;&#x78;&#100;&#x62;&#46;&#99;&#111;&#109;">&#108;&#111;&#x72;&#x72;&#x40;&#x69;&#x6e;&#x66;&#108;&#x75;&#x78;&#100;&#x62;&#46;&#99;&#111;&#109;</a></td><td>finish</td><td>1636775868000000000</td><td>120</td></tr><tr><td><a href="mailto:&#x6d;&#97;&#x72;&#x76;&#x40;&#105;&#110;&#x66;&#108;&#x75;&#x78;&#x64;&#x62;&#46;&#x63;&#111;&#x6d;">&#x6d;&#97;&#x72;&#x76;&#x40;&#105;&#110;&#x66;&#108;&#x75;&#x78;&#x64;&#x62;&#46;&#x63;&#111;&#x6d;</a></td><td>start</td><td>1636775801000000000</td><td>0</td></tr><tr><td><a href="mailto:&#x6d;&#x61;&#114;&#x76;&#x40;&#x69;&#x6e;&#x66;&#x6c;&#117;&#120;&#100;&#x62;&#46;&#x63;&#x6f;&#x6d;">&#x6d;&#x61;&#114;&#x76;&#x40;&#x69;&#x6e;&#x66;&#x6c;&#117;&#120;&#100;&#x62;&#46;&#x63;&#x6f;&#x6d;</a></td><td>finish</td><td>1636775868000000000</td><td>20</td></tr><tr><td><a href="mailto:&#99;&#x6c;&#x69;&#x66;&#x66;&#x40;&#105;&#x6e;&#102;&#108;&#x75;&#x78;&#100;&#x62;&#x2e;&#x63;&#111;&#x6d;">&#99;&#x6c;&#x69;&#x66;&#x66;&#x40;&#105;&#x6e;&#102;&#108;&#x75;&#x78;&#100;&#x62;&#x2e;&#x63;&#111;&#x6d;</a></td><td>start</td><td>1636775801000000000</td><td>54</td></tr><tr><td><a href="mailto:&#x63;&#x6c;&#x69;&#102;&#x66;&#64;&#105;&#x6e;&#102;&#x6c;&#x75;&#120;&#100;&#x62;&#46;&#99;&#111;&#109;">&#x63;&#x6c;&#x69;&#102;&#x66;&#64;&#105;&#x6e;&#102;&#x6c;&#x75;&#120;&#100;&#x62;&#46;&#99;&#111;&#109;</a></td><td>finish</td><td>1636775868000000000</td><td>56</td></tr></tbody></table><p>The columns <code>Email</code> and <code>Status</code> are indexed.</p><p>Hence:</p><ul><li>Measurement: <code>workdone</code></li><li>Tags: <code>Email</code>, <code>Status</code></li><li>Field: <code>Completed</code></li><li>Series (Cardinality &#x3D; 3 x 2 &#x3D; 6):<ol><li>Measurement: <code>workdone</code>; Tags: <code>Email</code>: <code>lorr@influxdb.com</code>, <code>Status</code>: <code>start</code>; Field: <code>Completed</code></li><li>Measurement: <code>workdone</code>; Tags: <code>Email</code>: <code>lorr@influxdb.com</code>, <code>Status</code>: <code>finish</code>; Field: <code>Completed</code></li><li>Measurement: <code>workdone</code>; Tags: <code>Email</code>: <code>marv@influxdb.com</code>, <code>Status</code>: <code>start</code>; Field: <code>Completed</code></li><li>Measurement: <code>workdone</code>; Tags: <code>Email</code>: <code>marv@influxdb.com</code>, <code>Status</code>: <code>finish</code>; Field: <code>Completed</code></li><li>Measurement: <code>workdone</code>; Tags: <code>Email</code>: <code>cliff@influxdb.com</code>, <code>Status</code>: <code>start</code>; Field: <code>Completed</code></li><li>Measurement: <code>workdone</code>; Tags: <code>Email</code>: <code>cliff@influxdb.com</code>, <code>Status</code>: <code>finish</code>; Field: <code>Completed</code></li></ol></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">.\influx.exe bucket list -o initOrgName -t Ki-3lIwR1A8WIJuXIa1od_nH2B164qs0i4_yS7H1mJ_NqiAs_6AIJ8ZUYAtT69eWvx9RIVSGFVtzZyPQ7DgdgA==<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">config create --config-name example-config-name --host-url https://us-west-2-1.aws.cloud2.influxdata.com --org example-org --token 3lIwR1A8WIJuXIa1od_nH2B164qs0i4_yS7H1mJ_NqiAs_6AIJ8ZUYAtT69eWvx9RIVSGFVtzZyPQ7DgdgA==<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>influxDB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç´¢å¼•æ€»ç»“</title>
    <link href="/2023/11/06/%E7%B4%A2%E5%BC%95%E6%80%BB%E7%BB%93/"/>
    <url>/2023/11/06/%E7%B4%A2%E5%BC%95%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸ºä»€ä¹ˆmysql-çš„-innoDB-é€‰æ‹©-ä½¿ç”¨-B-treeä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„"><a href="#ä¸ºä»€ä¹ˆmysql-çš„-innoDB-é€‰æ‹©-ä½¿ç”¨-B-treeä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„" class="headerlink" title="ä¸ºä»€ä¹ˆmysql çš„ innoDB é€‰æ‹© ä½¿ç”¨ B+ treeä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„"></a>ä¸ºä»€ä¹ˆmysql çš„ innoDB é€‰æ‹© ä½¿ç”¨ B+ treeä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„</h3><h4 id="B-tree-VS-B-tree"><a href="#B-tree-VS-B-tree" class="headerlink" title="B + tree VS B tree"></a>B + tree VS B tree</h4><ul><li>å­˜å‚¨ç›¸åŒæ•°é‡çº§åˆ«çš„æƒ…å†µä¸‹ï¼ŒB+ tree çš„æ ‘é«˜æ¯”B treeä½ï¼Œç£ç›˜IOæ¬¡æ•°å°‘</li><li>B+ treeå¶å­èŠ‚ç‚¹ç”¨åŒå‘é“¾è¡¨ä¸²è”èµ·æ¥ï¼Œé€‚åˆèŒƒå›´æŸ¥è¯¢</li></ul><h4 id="B-tree-VS-Hash"><a href="#B-tree-VS-Hash" class="headerlink" title="B + tree VS Hash"></a>B + tree VS Hash</h4><ul><li>è™½ç„¶hashçš„ç­‰å€¼æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼Œä½†æ— æ³•åšåˆ°èŒƒå›´é•¿æŸ¥è¯¢</li><li>hashä¼šæœ‰hashç¢°æ’å‘ç”Ÿ</li></ul><h3 id="ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨ç´¢å¼•"><a href="#ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨ç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨ç´¢å¼•"></a>ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨ç´¢å¼•</h3><ul><li>å­—æ®µå…·æœ‰å”¯ä¸€æ€§ï¼Œæ¯”å¦‚å•†å“çš„ç¼–ç </li><li>å¸¸ç”¨äº Where æŸ¥è¯¢çš„å­—æ®µ</li><li>ç»å¸¸ç”¨äº <code>group by</code>å’Œ <code>order by</code>çš„å­—æ®µ</li></ul><h3 id="ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•"><a href="#ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•"></a>ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•</h3><ul><li>æ•°æ®é‡å°‘</li><li>ç´¢å¼•å­—æ®µå¸¸æ›´æ–°</li><li>å­—æ®µä¸­å­˜åœ¨å¤§é‡é‡å¤çš„æ•°æ®</li><li><code>where</code> <code>order by</code>  <code> group by</code> ç”¨ä¸åˆ°çš„å­—æ®µ</li></ul><h3 id="ä»€ä¹ˆæ—¶å€™ç´¢å¼•ä¼šå¤±æ•ˆ"><a href="#ä»€ä¹ˆæ—¶å€™ç´¢å¼•ä¼šå¤±æ•ˆ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ç´¢å¼•ä¼šå¤±æ•ˆ"></a>ä»€ä¹ˆæ—¶å€™ç´¢å¼•ä¼šå¤±æ•ˆ</h3><ul><li>ä½¿ç”¨ å·¦æˆ–è€…æ˜¯å·¦å³æ¨¡ç³ŠåŒ¹é…çš„æ—¶å€™ <code>like %xxx</code> <code>like%xx%</code> </li><li>æŸ¥è¯¢æ¡ä»¶ä¸­å­˜åœ¨è®¡ç®—ã€å‡½æ•°ã€ç±»å‹è½¬åŒ–æ“ä½œ</li><li>æ²¡èƒ½éµå¾ªæœ€å·¦åŒ¹é…åŸåˆ™</li><li>åœ¨whereå­—å¥ä¸­ï¼Œå¦‚æœ or å‰çš„æ¡ä»¶ æ˜¯ç´¢å¼•åˆ—ï¼Œè€Œåœ¨ or ä¹‹åä¸ºéç´¢å¼•åˆ—</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>å…«è‚¡</tag>
      
      <tag>ç´¢å¼•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</title>
    <link href="/2023/11/06/%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/"/>
    <url>/2023/11/06/%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼æœ‰å¤šç§ï¼Œå¯ä»¥æŒ‰ç…§ï¼Œä¸»æœºå†…éƒ¨å’Œä¸»æœºä¸ä¸»æœºé—´çš„é€šä¿¡æ¥åˆ’åˆ†ã€‚</p><ol><li><p>pipe</p></li><li><p>ä¿¡å·é‡</p></li><li><p>ä¿¡å·</p></li><li><p>æ¶ˆæ¯é˜Ÿåˆ—</p></li><li><p>Socket</p></li><li><p>webSocket</p></li><li><p>RPC</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>å…«è‚¡</tag>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysqlä¸­çš„äº‹åŠ¡</title>
    <link href="/2023/11/06/mysql%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1/"/>
    <url>/2023/11/06/mysql%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h3 id="äº‹åŠ¡çš„ç‰¹æ€§"><a href="#äº‹åŠ¡çš„ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡çš„ç‰¹æ€§"></a>äº‹åŠ¡çš„ç‰¹æ€§</h3><p>ACID</p><ul><li><p>atomic</p></li><li><p>consistency</p></li><li><p>isolation</p></li><li><p>durability</p></li></ul><p>å¹¶å‘äº‹åŠ¡ä¼šå¼•å‘ä»€ä¹ˆé—®é¢˜</p><ul><li>è„è¯»</li></ul><p>è¯»åˆ°äº†å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„æ•°æ®</p><p><img src="https://cdn.xiaolincoding.com//mysql/other/10b513008ea35ee880c592a88adcb12f.png"></p><ul><li>ä¸å¯é‡å¤è¯»</li></ul><p>åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®ï¼Œå‰åä¸¤æ¬¡è¯»å–åˆ°çš„æ•°æ®ä¸ä¸€æ ·çš„æƒ…å†µ</p><p><img src="https://cdn.xiaolincoding.com//mysql/other/f5b4f8f0c0adcf044b34c1f300a95abf.png"></p><ul><li>å¹»è¯»</li></ul><p>åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æŸ¥è¯¢æŸä¸ªç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°é‡ï¼Œå‡ºç°å‰åä¸¤æ¬¡æŸ¥è¯¢åˆ°çš„è®°å½•æ•°é‡ä¸ä¸€è‡´</p><p><img src="https://cdn.xiaolincoding.com//mysql/other/d19a1019dc35dfe8cfe7fbff8cd97e31.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>mysql</tag>
      
      <tag>äº‹åŠ¡ï¼Œå…«è‚¡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hashå‡½æ•°</title>
    <link href="/2023/11/05/hash%E5%87%BD%E6%95%B0/"/>
    <url>/2023/11/05/hash%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>WIKIPEDIA</p><blockquote><p>A <strong>hash function</strong> is any <a href="https://en.wikipedia.org/wiki/Function_(mathematics)">function</a> that can be used to map <a href="https://en.wikipedia.org/wiki/Data_(computing)">data</a> of arbitrary size to fixed-size values, though there are some hash functions that support variable length output.[<a href="https://en.wikipedia.org/wiki/Hash_function#cite_note-1">1]</a> The values returned by a hash function are called <em>hash values</em>, <em>hash codes</em>, <em>digests</em>, or simply <em>hashes</em>. The values are usually used to index a fixed-size table called a <em><a href="https://en.wikipedia.org/wiki/Hash_table">hash table</a></em>. Use of a hash function to index a hash table is called <em>hashing</em> or <em>scatter storage addressing</em>.</p></blockquote><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol><li>inputå¯ä»¥æ˜¯ä¸€ä¸ªå˜é•¿çš„å­—ç¬¦ä¸²ï¼Œoutputä¸ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¯¥å€¼ç§°ä¸ºæ•£åˆ—å€¼ï¼Œé•¿åº¦å›ºå®š</li><li>hash functionçš„è®¡ç®—æ—¶é—´ä¸åº”è¯¥è¿‡é•¿</li><li>ä¸å¯é€†æ€§</li><li>å†²çªæ€§è¾ƒä½ï¼ŒæŠ—ç¢°æ’æ€§å¼º</li><li>æ˜ å°„ç›¸å¯¹å‡åŒ€</li></ol><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ul><li><p>é”™è¯¯éªŒè¯ï¼Œæ•°æ®éªŒè¯ï¼Œå®Œæ•´æ€§æ ¡éªŒ</p></li><li><p>æ•°æ®åŠ å¯†ï¼Œå¯†ç åŠ ç›</p></li><li><p>è¯­éŸ³è¯†åˆ«</p><blockquote><p>å¯¹äºåƒä»ä¸€ä¸ªå·²çŸ¥åˆ—è¡¨ä¸­åŒ¹é…ä¸€ä¸ªMP3æ–‡ä»¶è¿™æ ·çš„åº”ç”¨ï¼Œä¸€ç§å¯èƒ½çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„æ•£åˆ—å‡½æ•°â€”â€”ä¾‹å¦‚<a href="https://zh.wikipedia.org/wiki/MD5">MD5</a>ï¼Œä½†æ˜¯è¿™ç§æ–¹æ¡ˆä¼šå¯¹æ—¶é—´å¹³ç§»ã€CDè¯»å–é”™è¯¯ã€ä¸åŒçš„éŸ³é¢‘å‹ç¼©ç®—æ³•æˆ–è€…éŸ³é‡è°ƒæ•´çš„å®ç°æœºåˆ¶ç­‰æƒ…å†µéå¸¸æ•æ„Ÿã€‚ä½¿ç”¨ä¸€äº›ç±»ä¼¼äºMD5çš„æ–¹æ³•æœ‰åˆ©äºè¿…é€Ÿæ‰¾åˆ°é‚£äº›ä¸¥æ ¼ç›¸åŒï¼ˆä»éŸ³é¢‘æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®æ¥çœ‹ï¼‰çš„éŸ³é¢‘æ–‡ä»¶ï¼Œä½†æ˜¯è¦æ‰¾åˆ°å…¨éƒ¨ç›¸åŒï¼ˆä»éŸ³é¢‘æ–‡ä»¶çš„å†…å®¹æ¥çœ‹ï¼‰çš„éŸ³é¢‘æ–‡ä»¶å°±éœ€è¦ä½¿ç”¨å…¶ä»–æ›´é«˜çº§çš„ç®—æ³•äº†ã€‚</p><p>é‚£äº›å¹¶ä¸ç´§éšITå·¥ä¸šæ½®æµçš„äººå¾€å¾€èƒ½åå…¶é“è€Œè¡Œä¹‹ï¼Œå¯¹äºé‚£äº›å¾®å°å·®å¼‚è¶³å¤Ÿå¥å£®çš„æ•£åˆ—å‡½æ•°ç¡®å®å­˜åœ¨ã€‚ç°å­˜çš„ç»å¤§å¤šæ•°æ•£åˆ—ç®—æ³•éƒ½æ˜¯ä¸å¤Ÿå¥å£®çš„ï¼Œä½†æ˜¯æœ‰å°‘æ•°æ•£åˆ—ç®—æ³•èƒ½å¤Ÿè¾¾åˆ°è¾¨åˆ«ä»å˜ˆæ‚æˆ¿é—´é‡Œçš„æ‰¬å£°å™¨é‡Œæ’­æ”¾å‡ºæ¥çš„éŸ³ä¹çš„å¥å£®æ€§ã€‚æœ‰ä¸€ä¸ªå®é™…çš„ä¾‹å­æ˜¯<a href="https://zh.wikipedia.org/w/index.php?title=Shazam_Entertainment&action=edit&redlink=1">Shazam</a>[<a href="http://www.shazam.com/">1]</a> ï¼ˆ<a href="https://web.archive.org/web/20080821140538/http://www.shazam.com/">é¡µé¢å­˜æ¡£å¤‡ä»½</a>ï¼Œå­˜äº<a href="https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86">äº’è”ç½‘æ¡£æ¡ˆé¦†</a>ï¼‰ æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥ç”¨æ‰‹æœºæ‰“å¼€å…¶appï¼Œå¹¶å°†è¯ç­’é è¿‘ç”¨äºæ’­æ”¾éŸ³ä¹çš„æ‰¬å£°å™¨ã€‚è¯¥é¡¹æœåŠ¡ä¼šåˆ†ææ­£åœ¨æ’­æ”¾çš„éŸ³ä¹ï¼Œå¹¶å°†å®ƒäºå­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„å·²çŸ¥çš„æ•£åˆ—å€¼è¿›è¡Œæ¯”è¾ƒã€‚ç”¨æˆ·å°±èƒ½å¤Ÿæ”¶åˆ°è¢«è¯†åˆ«çš„éŸ³ä¹çš„æ›²åã€‚</p></blockquote></li></ul><h3 id="å¸¸è§çš„hash-ç®—æ³•"><a href="#å¸¸è§çš„hash-ç®—æ³•" class="headerlink" title="å¸¸è§çš„hash ç®—æ³•"></a>å¸¸è§çš„hash ç®—æ³•</h3><h4 id="SHA-2"><a href="#SHA-2" class="headerlink" title="SHA-2"></a>SHA-2</h4><p><strong>secure Hash Algorithm 2</strong> </p><p>å…ˆç•™ä¸€ä¸ªå‘ä½ï¼Œæ…¢æ…¢çœ‹hash function</p><p>MDç³»åˆ—</p><p><strong>Message-Digest Algorithm</strong>  </p>]]></content>
    
    
    
    <tags>
      
      <tag>hash</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å„ç§é”</title>
    <link href="/2023/11/05/%E5%90%84%E7%A7%8D%E9%94%81/"/>
    <url>/2023/11/05/%E5%90%84%E7%A7%8D%E9%94%81/</url>
    
    <content type="html"><![CDATA[<h2 id="å„ç§é”ğŸ”’"><a href="#å„ç§é”ğŸ”’" class="headerlink" title="å„ç§é”ğŸ”’"></a>å„ç§é”ğŸ”’</h2><p>å½“æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œè¯¥å…±äº«èµ„æºå¯èƒ½ä¼šæ•°æ®é”™ä¹±ï¼Œæ­¤æ—¶ï¼Œé”å°±æœ‰äº†ä½œç”¨ã€‚</p><p>åŠ é”çš„ç›®çš„æ˜¯ä¸ºäº†ä¿è¯å…±äº«èµ„æºåœ¨ä»»æ„æ—¶é—´é‡Œï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œè¿™æ ·å¯ä»¥é¿å…å¤šçº¿ç¨‹å¯¼è‡´å…±äº«æ•°æ®é”™ä¹±çš„é—®é¢˜ã€‚</p><h4 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h4><ul><li>å½“çº¿ç¨‹åŠ é”æˆåŠŸåï¼Œè¯¥çº¿ç¨‹ä¼šå ç”¨è¯¥å…±äº«èµ„æºï¼Œç›´åˆ°è¯¥çº¿ç¨‹è§£é”ï¼Œè¿™æœŸé—´å…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®è¯¥å…±äº«èµ„æº</li><li>å½“äº’æ–¥é”åŠ é”å¤±è´¥åï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾CPUï¼ŒæŠŠèµ„æºç»™å…¶ä»–çº¿ç¨‹ï¼Œè¿›å…¥é˜»å¡çŠ¶æ€</li></ul><p><img src="https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost2/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%94%81/%E4%BA%92%E6%96%A5%E9%94%81%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png"></p><p>äº’æ–¥é”åŠ é”å¤±è´¥åï¼Œä¼šä»ç”¨æˆ·æ€é™·å…¥å†…æ ¸æ€ï¼Œè®©å†…æ ¸æ¥åˆ‡æ¢çº¿ç¨‹ï¼Œè¿™å­˜åœ¨ä¸€å®šçš„<strong>æ€§èƒ½å¼€é”€</strong></p><ul><li>åŠ é”å¤±è´¥ï¼Œå†…æ ¸æŠŠçº¿ç¨‹çš„çŠ¶æ€ä»ã€è¿è¡Œã€‘-&gt;ã€é˜»å¡ã€‘çŠ¶æ€ï¼ŒæŠŠèµ„æºè®©ç»™æ´½è°ˆçº¿ç¨‹</li><li>å½“é”è¢«é‡Šæ”¾åï¼Œè¯¥çº¿ç¨‹æœ‰æœºä¼šæ‹¿åˆ°è¯¥é”ã€‚ä»ã€é˜»å¡ã€‘çŠ¶æ€è½¬ä¸ºã€å°±ç»ªã€‘çŠ¶æ€</li></ul><h4 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a>è‡ªæ—‹é”</h4><p>è‡ªæ—‹é”æ˜¯é€šè¿‡ CPU æä¾›çš„ <code>CAS</code> å‡½æ•°ï¼ˆ<em>Compare And Swap</em>ï¼‰ï¼Œåœ¨ã€Œç”¨æˆ·æ€ã€å®ŒæˆåŠ é”å’Œè§£é”æ“ä½œï¼Œä¸ä¼šä¸»åŠ¨äº§ç”Ÿçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ‰€ä»¥ç›¸æ¯”äº’æ–¥é”æ¥è¯´ï¼Œä¼šå¿«ä¸€äº›ï¼Œå¼€é”€ä¹Ÿå°ä¸€äº›ã€‚</p><p>ä¸€èˆ¬åŠ é”çš„è¿‡ç¨‹ï¼ŒåŒ…å«ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼ŒæŸ¥çœ‹é”çš„çŠ¶æ€ï¼Œå¦‚æœé”æ˜¯ç©ºé—²çš„ï¼Œåˆ™æ‰§è¡Œç¬¬äºŒæ­¥ï¼›</li><li>ç¬¬äºŒæ­¥ï¼Œå°†é”è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹æŒæœ‰ï¼›</li></ul><p>CAS å‡½æ•°å°±æŠŠè¿™ä¸¤ä¸ªæ­¥éª¤åˆå¹¶æˆä¸€æ¡ç¡¬ä»¶çº§æŒ‡ä»¤ï¼Œå½¢æˆ<strong>åŸå­æŒ‡ä»¤</strong>ï¼Œè¿™æ ·å°±ä¿è¯äº†è¿™ä¸¤ä¸ªæ­¥éª¤æ˜¯ä¸å¯åˆ†å‰²çš„ï¼Œè¦ä¹ˆä¸€æ¬¡æ€§æ‰§è¡Œå®Œä¸¤ä¸ªæ­¥éª¤ï¼Œè¦ä¹ˆä¸¤ä¸ªæ­¥éª¤éƒ½ä¸æ‰§è¡Œã€‚</p><p>æ¯”å¦‚ï¼Œè®¾é”ä¸ºå˜é‡ lockï¼Œæ•´æ•° 0 è¡¨ç¤ºé”æ˜¯ç©ºé—²çŠ¶æ€ï¼Œæ•´æ•° pid è¡¨ç¤ºçº¿ç¨‹ IDï¼Œé‚£ä¹ˆ CAS(lock, 0, pid) å°±è¡¨ç¤ºè‡ªæ—‹é”çš„åŠ é”æ“ä½œï¼ŒCAS(lock, pid, 0) åˆ™è¡¨ç¤ºè§£é”æ“ä½œã€‚</p><p>åŠ é”å¤±è´¥åï¼Œä¸€ç›´å¿™ç­‰å¾…ï¼Œç›´åˆ°è·å–é”</p><p>è‡ªæ—‹é”æ˜¯æœ€æ¯”è¾ƒç®€å•çš„ä¸€ç§é”ï¼Œä¸€ç›´è‡ªæ—‹ï¼Œåˆ©ç”¨ CPU å‘¨æœŸï¼Œç›´åˆ°é”å¯ç”¨ã€‚<strong>éœ€è¦æ³¨æ„ï¼Œåœ¨å•æ ¸ CPU ä¸Šï¼Œéœ€è¦æŠ¢å å¼çš„è°ƒåº¦å™¨ï¼ˆå³ä¸æ–­é€šè¿‡æ—¶é’Ÿä¸­æ–­ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿è¡Œå…¶ä»–çº¿ç¨‹ï¼‰ã€‚å¦åˆ™ï¼Œè‡ªæ—‹é”åœ¨å• CPU ä¸Šæ— æ³•ä½¿ç”¨ï¼Œå› ä¸ºä¸€ä¸ªè‡ªæ—‹çš„çº¿ç¨‹æ°¸è¿œä¸ä¼šæ”¾å¼ƒ CPUã€‚</strong></p><h4 id="è¯»å†™é”"><a href="#è¯»å†™é”" class="headerlink" title="è¯»å†™é”"></a>è¯»å†™é”</h4><p>è¯»å†™é”é€‚ç”¨äºèƒ½æ˜ç¡®åŒºåˆ†è¯»æ“ä½œå’Œå†™æ“ä½œçš„åœºæ™¯ã€‚</p><h4 id="ä¹è§‚é”å’Œæ‚²è§‚é”"><a href="#ä¹è§‚é”å’Œæ‚²è§‚é”" class="headerlink" title="ä¹è§‚é”å’Œæ‚²è§‚é”"></a>ä¹è§‚é”å’Œæ‚²è§‚é”</h4><p>æ‚²è§‚é”åšäº‹æ¯”è¾ƒæ‚²è§‚ï¼Œå®ƒè®¤ä¸º<strong>å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…±äº«èµ„æºçš„æ¦‚ç‡æ¯”è¾ƒé«˜ï¼Œäºæ˜¯å¾ˆå®¹æ˜“å‡ºç°å†²çªï¼Œæ‰€ä»¥è®¿é—®å…±äº«èµ„æºå‰ï¼Œå…ˆè¦ä¸Šé”</strong>ã€‚</p><p>ä¹è§‚é”åšäº‹æ¯”è¾ƒä¹è§‚ï¼Œå®ƒå‡å®šå†²çªçš„æ¦‚ç‡å¾ˆä½ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼æ˜¯ï¼š<strong>å…ˆä¿®æ”¹å®Œå…±äº«èµ„æºï¼Œå†éªŒè¯è¿™æ®µæ—¶é—´å†…æœ‰æ²¡æœ‰å‘ç”Ÿå†²çªï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çº¿ç¨‹åœ¨ä¿®æ”¹èµ„æºï¼Œé‚£ä¹ˆæ“ä½œå®Œæˆï¼Œå¦‚æœå‘ç°æœ‰å…¶ä»–çº¿ç¨‹å·²ç»ä¿®æ”¹è¿‡è¿™ä¸ªèµ„æºï¼Œå°±æ”¾å¼ƒæœ¬æ¬¡æ“ä½œ</strong>ã€‚</p><p>å…¶ä¸­è¯»å†™é”ã€äº’æ–¥é”ã€è‡ªæ—‹é”éƒ½æ˜¯æ‚²è§‚é”</p><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¸¸è§çš„git ä¹Ÿæ˜¯ç”¨äº†ä¹è§‚é”çš„æ€æƒ³ï¼Œå…ˆè®©ç”¨æˆ·ç¼–è¾‘ä»£ç ï¼Œç„¶åæäº¤çš„æ—¶å€™ï¼Œé€šè¿‡ç‰ˆæœ¬å·æ¥åˆ¤æ–­æ˜¯å¦äº§ç”Ÿäº†å†²çªï¼Œå‘ç”Ÿäº†å†²çªçš„åœ°æ–¹ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ä¿®æ”¹åï¼Œå†é‡æ–°æäº¤ã€‚</p><p>ä¹è§‚é”è™½ç„¶å»é™¤äº†åŠ é”è§£é”çš„æ“ä½œï¼Œä½†æ˜¯ä¸€æ—¦å‘ç”Ÿå†²çªï¼Œé‡è¯•çš„æˆæœ¬éå¸¸é«˜ï¼Œæ‰€ä»¥<strong>åªæœ‰åœ¨å†²çªæ¦‚ç‡éå¸¸ä½ï¼Œä¸”åŠ é”æˆæœ¬éå¸¸é«˜çš„åœºæ™¯æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ä¹è§‚é”ã€‚</strong></p>]]></content>
    
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
      <tag>é”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸¤ä¸ªnilå¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ</title>
    <link href="/2023/11/05/%E4%B8%A4%E4%B8%AAnil%E5%8F%AF%E8%83%BD%E4%B8%8D%E7%9B%B8%E7%AD%89%E5%90%97%EF%BC%9F/"/>
    <url>/2023/11/05/%E4%B8%A4%E4%B8%AAnil%E5%8F%AF%E8%83%BD%E4%B8%8D%E7%9B%B8%E7%AD%89%E5%90%97%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸¤ä¸ªnilå¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ"><a href="#ä¸¤ä¸ªnilå¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ" class="headerlink" title="ä¸¤ä¸ªnilå¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ"></a>ä¸¤ä¸ªnilå¯èƒ½ä¸ç›¸ç­‰å—ï¼Ÿ</h3><p>æ¥å£æ—¶å¯¹éæ¥å£ä¹‹ï¼ˆä¾‹å¦‚æŒ‡é’ˆï¼Œstructç­‰ï¼‰çš„å°è£…ï¼Œå†…éƒ¨å®ç°åŒ…å«ä¸¤ä¸ªå­—æ®µï¼Œç±»å‹<code>T</code>å’Œå€¼<code>V</code> ã€‚ä¸€ä¸ªæ¥å£ä¸ºnilï¼Œå½“ä¸”ä»…å½“Tå’ŒVéƒ½å¤„äºunsetçš„çŠ¶æ€ï¼ˆT&#x3D;nilï¼ŒV is unsetï¼‰</p><ul><li><p>ä¸¤ä¸ªæ¥å£æ¯”è¾ƒæ—¶ï¼Œä¼šå…ˆæ¯”è¾ƒTï¼Œå†æ¯”è¾ƒV</p></li><li><p>æ¥å£å€¼å’Œéæ¥å£å€¼ç›¸æ¯”æ¯”è¾ƒæ—¶ï¼Œä¼šå°†éæ¥å£å€¼è½¬ä¸ºæ¥å£å€¼ï¼Œå†æ¯”è¾ƒ</p>  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-keyword">var</span> p *<span class="hljs-type">int</span> =<span class="hljs-literal">nil</span><br>    <span class="hljs-keyword">var</span> i <span class="hljs-keyword">interface</span>&#123;&#125; =p<span class="hljs-comment">//ä¼šå°†iè½¬ä¸º ï¼ˆtype=*intï¼Œv=nilï¼‰</span><br>    fmt.Println(p==i)<span class="hljs-comment">//true</span><br>    fmt.Println(p==<span class="hljs-literal">nil</span>)<span class="hljs-comment">//true</span><br>    fmt.Println(i==<span class="hljs-literal">nil</span>)<span class="hljs-comment">//false</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><ol><li><code>fmt.Println(p==i)</code>  ,æ¥å£å€¼ä¸éæ¥å£å€¼ç›¸æ¯”è¾ƒæ—¶ï¼Œä¼šå°†iè½¬ä¸º ï¼ˆtype&#x3D;* intï¼Œv&#x3D;nilï¼‰,æ­¤æ—¶pä¸ºï¼ˆtype&#x3D;*intï¼Œv&#x3D;nilï¼‰ï¼Œæ‰€ä»¥ p&#x3D;&#x3D;i ,è¿”å›true</li><li>pçš„Vä¸ºnilï¼Œp&#x3D;&#x3D;nilï¼Œè¿”å›true</li><li>æ¥å£å€¼ä¸éæ¥å£å€¼ç›¸æ¯”è¾ƒæ—¶ï¼Œä¼šå°†éæ¥å£å€¼è½¬ä¸ºæ¥å£å€¼,å†æ¯”è¾ƒ,(type&#x3D;* int,v&#x3D;nil)!&#x3D;(type&#x3D;nil,v&#x3D;nil),è¿”å›false</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>GO</tag>
      
      <tag>å…«è‚¡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Goçš„é€ƒé€¸åˆ†æ</title>
    <link href="/2023/11/05/Go%E7%9A%84%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90/"/>
    <url>/2023/11/05/Go%E7%9A%84%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h3 id="Goè¯­è¨€çš„å±€éƒ¨å˜é‡æ˜¯åˆ†é…åˆ°æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ"><a href="#Goè¯­è¨€çš„å±€éƒ¨å˜é‡æ˜¯åˆ†é…åˆ°æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ" class="headerlink" title="Goè¯­è¨€çš„å±€éƒ¨å˜é‡æ˜¯åˆ†é…åˆ°æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ"></a>Goè¯­è¨€çš„å±€éƒ¨å˜é‡æ˜¯åˆ†é…åˆ°æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Ÿ</h3><p>è¿™ç”±ç¼–è¯‘å™¨å†³å®šã€‚GOè¯­è¨€çš„ç¼–è¯‘å™¨ä¼šå†³å®šåˆ†é…åˆ°æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Œç¼–è¯‘å™¨ä¼šåšé€ƒé€¸åˆ†æï¼ˆescape analysisï¼‰ï¼Œå½“å‘ç°å˜é‡çš„ä½œç”¨åŸŸæ²¡æœ‰è¶…å‡ºå‡½æ•°çš„èŒƒå›´ï¼Œå¯ä»¥åœ¨æ ˆä¸Šï¼Œåä¹‹å¿…é¡»åœ¨å †ä¸Šã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> *<span class="hljs-type">int</span> &#123;<br>v := <span class="hljs-number">100</span><br><span class="hljs-keyword">return</span> &amp;v<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>m := foo()<br><span class="hljs-built_in">println</span>(*m)<br>&#125;<br></code></pre></td></tr></table></figure><p>fooå‡½æ•°ä¸­ï¼Œå¦‚æœvåˆ†é…åœ¨æ ˆä¸Šï¼Œfooå‡½æ•°è¿”å›æ—¶ï¼Œ&amp;vå°±ä¼šä¸å­˜åœ¨ï¼Œä½†è¿™æ®µç¨‹åºæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ã€‚Goç¼–è¯‘å™¨ä¼šå‘ç°vçš„å¼•ç”¨è„±ç¦»äº†fooçš„ä½œç”¨åŸŸï¼Œä¼šå°†å…¶åˆ†é…åˆ°å †ä¸Šã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Go</tag>
      
      <tag>é€ƒé€¸åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¯»syncåŒ…</title>
    <link href="/2023/11/02/%E8%AF%BBsync%E5%8C%85/"/>
    <url>/2023/11/02/%E8%AF%BBsync%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h3 id="Sync-Cond"><a href="#Sync-Cond" class="headerlink" title="Sync.Cond"></a>Sync.Cond</h3><h3 id="Sync-Once"><a href="#Sync-Once" class="headerlink" title="Sync.Once"></a>Sync.Once</h3><h3 id="sync-Pool"><a href="#sync-Pool" class="headerlink" title="sync.Pool"></a>sync.Pool</h3>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•è®°å½•</title>
    <link href="/2023/10/30/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/"/>
    <url>/2023/10/30/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h3 id="æ ¼æ—æ·±ç³-ä¸€é¢"><a href="#æ ¼æ—æ·±ç³-ä¸€é¢" class="headerlink" title="æ ¼æ—æ·±ç³ ä¸€é¢"></a>æ ¼æ—æ·±ç³ ä¸€é¢</h3><p>ä¸€é¢æ—¶é—´ï¼š2023.11.1 </p><ul><li><p>ç”¨ä¹‹å‰çš„ç¬”è¯•é¢˜å¼€åœºï¼Œé—®æˆ‘çš„å¤„ç†é€»è¾‘ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆæƒ³</p></li><li><p>é€šè¿‡ç¬¬äºŒé“ç¬”è¯•é¢˜ï¼ˆæŠ¥è­¦å“åº”ï¼‰ï¼Œé—®äº†emailçš„å…·ä½“é€»è¾‘ï¼Œæœ‰ä»€ä¹ˆè¾“å‡ºï¼Œæœ‰ä»€ä¹ˆè¾“å…¥ï¼Œè¿˜éœ€è¦ä»€ä¹ˆå…¶ä»–å‚æ•°å—ï¼Ÿ</p></li><li><p>æŠ¥è­¦ä¿¡æ¯çš„æ¥æº</p></li><li><p>httpçš„è¯·æ±‚</p></li><li><p>httpä¸­ content type æœ‰å“ªäº› ?</p><ol><li><strong>text&#x2F;plain</strong>: è¡¨ç¤ºæ–‡æœ¬å†…å®¹ï¼Œé€šå¸¸æ˜¯çº¯æ–‡æœ¬ï¼Œä¸å«ä»»ä½•æ ¼å¼åŒ–ï¼Œå¦‚çº¯æ–‡æœ¬æ–‡ä»¶æˆ–æ™®é€šæ–‡æœ¬æ¶ˆæ¯ã€‚</li><li><strong>text&#x2F;html</strong>: è¡¨ç¤ºHTMLæ–‡æ¡£ï¼Œé€šå¸¸ç”¨äºWebé¡µé¢ã€‚</li><li><strong>text&#x2F;css</strong>: è¡¨ç¤ºCascading Style Sheetsï¼ˆCSSï¼‰æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰æ–‡æ¡£çš„æ ·å¼å’Œå¸ƒå±€ã€‚</li><li><strong>application&#x2F;json</strong>: è¡¨ç¤ºJSONï¼ˆJavaScript Object Notationï¼‰æ•°æ®ï¼Œå¸¸ç”¨äºæ•°æ®äº¤æ¢ã€‚</li><li><strong>application&#x2F;xml</strong>: è¡¨ç¤ºXMLï¼ˆeXtensible Markup Languageï¼‰æ•°æ®ï¼Œç”¨äºæ•°æ®äº¤æ¢å’Œé…ç½®æ–‡ä»¶ç­‰ã€‚</li><li><strong>application&#x2F;pdf</strong>: è¡¨ç¤ºAdobe PDFæ–‡æ¡£ï¼Œé€šå¸¸ç”¨äºç”µå­æ–‡æ¡£çš„ä¼ è¾“å’Œæ˜¾ç¤ºã€‚</li><li><strong>image&#x2F;jpeg</strong>: è¡¨ç¤ºJPEGå›¾åƒï¼Œä¸€ç§å¸¸è§çš„å›¾åƒæ ¼å¼ã€‚</li><li><strong>image&#x2F;png</strong>: è¡¨ç¤ºPNGå›¾åƒï¼Œå¦ä¸€ç§å¸¸è§çš„å›¾åƒæ ¼å¼ã€‚</li><li><strong>image&#x2F;gif</strong>: è¡¨ç¤ºGIFå›¾åƒï¼Œä¸€ç§æ”¯æŒåŠ¨ç”»çš„å›¾åƒæ ¼å¼ã€‚</li><li><strong>audio&#x2F;mpeg</strong>: è¡¨ç¤ºMPEGéŸ³é¢‘æ–‡ä»¶ï¼Œå¦‚MP3éŸ³é¢‘æ–‡ä»¶ã€‚</li><li><strong>video&#x2F;mp4</strong>: è¡¨ç¤ºMP4è§†é¢‘æ–‡ä»¶ï¼Œä¸€ç§å¸¸è§çš„è§†é¢‘æ ¼å¼ã€‚</li><li><strong>application&#x2F;octet-stream</strong>: è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®ï¼Œé€šå¸¸ä¸æŒ‡å®šç‰¹å®šçš„åª’ä½“ç±»å‹ã€‚</li><li><strong>multipart&#x2F;form-data</strong>: é€šå¸¸ç”¨äºHTMLè¡¨å•æ–‡ä»¶ä¸Šä¼ ï¼Œå…è®¸ä¼ è¾“äºŒè¿›åˆ¶æ–‡ä»¶æ•°æ®ã€‚</li><li><strong>application&#x2F;x-www-form-urlencoded</strong>: é€šå¸¸ç”¨äºHTMLè¡¨å•æäº¤ï¼Œç¼–ç è¡¨å•å­—æ®µçš„é”®å€¼å¯¹ã€‚</li></ol></li><li><p>http ä¸­å‚æ•°ä¼ é€’çš„æ–¹å¼</p><ol><li><strong>URLæŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆQuery Parametersï¼‰</strong>ï¼šå‚æ•°ç›´æ¥é™„åŠ åœ¨URLçš„æœ«å°¾ï¼Œä»¥é—®å·ï¼ˆ?ï¼‰å¼€å¤´ï¼Œä¸åŒå‚æ•°ä¹‹é—´ä½¿ç”¨â€œ&amp;â€ç¬¦å·åˆ†éš”ã€‚ä¾‹å¦‚ï¼š<code>https://example.com/page?param1=value1&amp;param2=value2</code>ã€‚</li><li><strong>è¡¨å•ï¼ˆFormï¼‰</strong>ï¼šè¡¨å•æ˜¯HTMLä¸­çš„ä¸€ç§å…ƒç´ ï¼Œå¯ä»¥åŒ…å«å„ç§è¾“å…¥å­—æ®µï¼ˆæ–‡æœ¬æ¡†ã€ä¸‹æ‹‰åˆ—è¡¨ã€å•é€‰æ¡†ç­‰ï¼‰ï¼Œç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå™¨ä¸­å¡«å†™è¡¨å•å­—æ®µï¼Œç„¶åæäº¤ç»™æœåŠ¡å™¨ã€‚è¿™äº›å­—æ®µçš„å€¼é€šå¸¸ä»¥é”®å€¼å¯¹çš„å½¢å¼ä¼ é€’ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„HTTPæ–¹æ³•ï¼Œå¦‚POSTå’ŒGETï¼Œæ¥æäº¤è¡¨å•æ•°æ®ã€‚</li><li><strong>HTTPå¤´éƒ¨ï¼ˆHTTP Headersï¼‰</strong>ï¼šHTTPå¤´éƒ¨å¯ä»¥åŒ…å«è‡ªå®šä¹‰çš„é”®å€¼å¯¹ï¼Œä»¥ä¼ é€’ä¸€äº›å…ƒä¿¡æ¯æˆ–å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨HTTPè¯·æ±‚çš„å¤´éƒ¨ä¸­åŒ…å«è‡ªå®šä¹‰çš„<code>X-My-Header: value</code>å¤´éƒ¨å­—æ®µï¼ŒæœåŠ¡å™¨å¯ä»¥æ ¹æ®è¿™äº›å­—æ®µæ¥å¤„ç†è¯·æ±‚ã€‚</li><li><strong>URLè·¯å¾„å‚æ•°ï¼ˆPath Parametersï¼‰</strong>ï¼šæœ‰æ—¶ï¼Œå‚æ•°ä¿¡æ¯å¯ä»¥åŒ…å«åœ¨URLçš„è·¯å¾„ä¸­ï¼Œé€šè¿‡åœ¨è·¯å¾„ä¸­ä½¿ç”¨å ä½ç¬¦æ¥ä¼ é€’å‚æ•°ã€‚ä¾‹å¦‚ï¼ŒRESTful APIé€šå¸¸ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå¦‚<code>https://example.com/users/123</code>ä¸­çš„<code>123</code>æ˜¯ç”¨æˆ·IDã€‚</li><li><strong>è¯·æ±‚æ­£æ–‡ï¼ˆRequest Bodyï¼‰</strong>ï¼šå¯¹äºHTTP POSTã€PUTã€PATCHç­‰æ–¹æ³•ï¼Œæ•°æ®å¯ä»¥åŒ…å«åœ¨è¯·æ±‚çš„æ­£æ–‡ä¸­ï¼Œé€šå¸¸ä»¥JSONã€XMLã€æˆ–å…¶ä»–è‡ªå®šä¹‰æ ¼å¼è¿›è¡Œç¼–ç ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºä¼ é€’å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æäº¤è¡¨å•æ•°æ®æˆ–ä¸Šä¼ æ–‡ä»¶ã€‚</li><li><strong>Cookieï¼ˆHTTP Cookiesï¼‰</strong>ï¼šCookie æ˜¯ä¸€ç§åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œé€šå¸¸ç”¨äºè·Ÿè¸ªç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ã€‚æœåŠ¡å™¨å¯ä»¥åœ¨HTTPå“åº”ä¸­è®¾ç½®Cookieï¼Œç„¶åæµè§ˆå™¨ä¼šåœ¨åç»­è¯·æ±‚ä¸­è‡ªåŠ¨åŒ…å«Cookieæ•°æ®ã€‚</li><li><strong>ä¼šè¯ï¼ˆSessionï¼‰</strong>ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå‚æ•°å¯ä»¥å­˜å‚¨åœ¨ä¼šè¯ä¸­ï¼Œç”¨æˆ·çš„ä¼šè¯çŠ¶æ€åœ¨å¤šä¸ªHTTPè¯·æ±‚ä¹‹é—´ä¿æŒä¸€è‡´ã€‚</li><li><strong>URLé‡å†™ï¼ˆURL Rewritingï¼‰</strong>ï¼šåœ¨URLä¸­å°†å‚æ•°ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œé€šå¸¸ä½¿ç”¨URLè·¯å¾„çš„æ–¹å¼ï¼Œä»¥ä¾¿å°†å‚æ•°ä¼ é€’ç»™æœåŠ¡å™¨ã€‚</li></ol></li><li><p>å¼€å§‹ç¬”è¯•</p><ul><li>æ— ç¼“å†²çš„channelçš„è¯»å’Œå†™ ï¼ˆè¢«å¡è„–å­äº†~~ï¼Œå†™äº†ä¸€ä¸ªæ­»é”ï¼Œåæ¥debugå‡ºæ¥äº†ï¼‰</li><li>æœ‰é™å®¹é‡é˜Ÿåˆ—çš„å®ç°<ul><li>å…ˆæ˜¯è¿™ä¹ˆå†™ <code>arr:=arr[1:]</code>ï¼Œå‘ç°arrçš„é•¿åº¦ä¼šå˜çŸ­</li><li>åæ¥ä¸æ•¢å·æ‡’äº†ï¼Œå…±ç”¨äº†ä¸€å—å†…å­˜ï¼Œè¿‡äº†</li></ul></li></ul><p></p></li><li><p>é—®é¡¹ç›®</p><ul><li><code>ç‰¹æ®Šè¯è¿‡æ»¤å’Œé˜²æ­¢å¾ªç¯è½¬é“¾</code>çš„å…·ä½“é€»è¾‘</li><li>MD5çš„å®ç°ï¼Œhashæ˜¯ä»€ä¹ˆâ€¦</li><li>Snowflake æ€ä¹ˆå®ç°ï¼Œå…·ä½“çš„å‚æ•°æœ‰å“ªäº›<br>         1. å¼€å§‹æ—¶é—´+æœºå™¨IDæ„æˆnode<br>             1. ä½¿ç”¨æ¥generate Int64çš„å€¼</li><li>JWT æ€ä¹ˆä½¿ç”¨çš„ï¼Œå…·ä½“çš„å‚æ•°æœ‰å“ªäº›<ol><li>è‡ªå®šä¹‰çš„å­—æ®µï¼Œå¦‚usernameï¼ŒuserID + standardClaimsï¼Œæ„æˆäº†æœ€ç»ˆçš„Claims</li><li>å…¶ä¸­StandardClaims åŒ…æ‹¬äº†expirationAtã€Audienceã€IDã€IssureAtã€Subjectã€NotBefore</li></ol></li><li><code>éšæ—¶é—´æƒé‡ä¸‹é™çš„ç®—æ³•è¯„è®ºç³»ç»Ÿ</code> çš„å…·ä½“é€»è¾‘</li></ul></li><li><p>æˆ‘å¼€å§‹åé—®</p><ul><li>æœ‰æ²¡æœ‰ç›¸åº”çš„ldï¼Œmt</li><li>é¢è¯•ä¼šæœ‰å‡ è½®ï¼Œä¼šæœ‰HRé¢å—ï¼Ÿ</li><li><code>å¥åº·ä½“è‚²</code>çš„ç‰ˆå—åœ¨å…¬å¸ä¸­å±äºä»€ä¹ˆåœ°ä½ï¼Œå¼€å§‹ç ”å‘å¤šä¹…äº†</li><li>å…¬å¸çš„ä¸»è¦æŠ€æœ¯æ ˆ</li><li>å¯ä»¥è®²è®²æˆ‘çš„é¢è¯•è¡¨ç°å—</li></ul><p>æˆ‘æ²¡äº†~~</p><p>2023.11.2 æˆ‘æ”¶åˆ°äº†ç¬¬ä¸€ä»½æ„Ÿè°¢ä¿¡ï¼Œæˆ‘è¢«æ‰“å›äº†äººæ‰åº“~~~</p></li></ul><h3 id="å­—èŠ‚åç«¯ä¸€é¢"><a href="#å­—èŠ‚åç«¯ä¸€é¢" class="headerlink" title="å­—èŠ‚åç«¯ä¸€é¢"></a>å­—èŠ‚åç«¯ä¸€é¢</h3><p>â€‹    é¢è¯•æ—¶é—´ï¼š2023.11.7 </p><p>â€‹    2023.11.14ï¼Œä¹Ÿå°±æ˜¯7å¤©åæˆ‘å¼€å§‹åæ€è‡ªå·±ï¼Œè°ƒæ•´å¿ƒæ€ï¼Œä¸€æ–¹é¢é¡¹ç›®è‡ªå·±æ²¡èƒ½æŠŠæ¡æœºä¼šï¼Œå¦ä¸€æ–¹é¢è‡ªå·±çš„ç®€å†æœ‰å¤¸å¤§çš„éƒ¨åˆ†ï¼Œé¢è¯•å®˜åŸºæœ¬å›´ç»•ä½ çš„é¡¹ç›®å’Œç®€å†æ¥è¿›è¡Œæé—®ã€‚</p><p>æ€»ç»“ï¼š</p><ul><li>ä¸»åŠ¨ï¼Œä½ è¦ä¸»åŠ¨æŠŠè‡ªå·±çš„çŸ¥è¯†é¢å’Œç‰¹æ€§å±•ç°å‡ºæ¥ï¼Œä¸è¦ç­‰é¢è¯•å®˜æ¥æ‰¾ä½ çš„ä¼˜ç‚¹ï¼Œä½ è¦ç‰µå¼•é¢è¯•å®˜è·Ÿç€ä½ çš„æ€è·¯èµ°ï¼Œè€Œä¸æ˜¯ä»–ç‰µç€ä½ çš„é¼»å­èµ°</li></ul><ol start="2"><li>è‡ªå·±ä¸æ˜¯å¾ˆç†Ÿç»ƒçš„ä¸œè¥¿å°±ä¸è¦å¾€ç®€å†ä¸­å†™ï¼Œé¢è¯•å®˜çš„é—®é¢˜æ€è·¯æ¥æºå¤§éƒ¨åˆ†éƒ½æ˜¯æ¥è‡ªä½ çš„é¡¹ç›®å’Œä¸ªäººä»‹ç»çš„æŠ€æœ¯æ ˆä¸­</li></ol><h3 id="å­—èŠ‚AIç¼–è¾‘å®ä¹ ç”Ÿ"><a href="#å­—èŠ‚AIç¼–è¾‘å®ä¹ ç”Ÿ" class="headerlink" title="å­—èŠ‚AIç¼–è¾‘å®ä¹ ç”Ÿ"></a>å­—èŠ‚AIç¼–è¾‘å®ä¹ ç”Ÿ</h3><p>2023.11.13 </p><h4 id="æ€»ç»“è½¬é“¾é¡¹ç›®ï¼š"><a href="#æ€»ç»“è½¬é“¾é¡¹ç›®ï¼š" class="headerlink" title="æ€»ç»“è½¬é“¾é¡¹ç›®ï¼š"></a>æ€»ç»“è½¬é“¾é¡¹ç›®ï¼š</h4><h5 id="Convert"><a href="#Convert" class="headerlink" title="Convert"></a>Convert</h5><pre><code class="hljs"> 1. æ ¡éªŒæ•°æ® - æ•°æ®ä¸ä¸ºç©º - é“¾æ¥å¯è®¿é—® - ä¸æ˜¯ä¹‹å‰å·²ç»è½¬è¿‡çš„é•¿é“¾æ¥ï¼ˆç”¨MD5è®¡ç®—é•¿é“¾æ¥çš„å€¼ï¼Œå»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼‰ - ä¸æ˜¯æ•°æ®åº“ä¸­å­˜åœ¨çš„çŸ­é“¾æ¥ 2. å–å· - å·ç è½¬é“¾æ¥ - æŸ¥çœ‹æ˜¯å¦ä¸ºblackList 3. å­˜å…¥bloom filter 4. å­˜å‚¨é•¿çŸ­è¿æ¥çš„å¯¹åº”å…³ç³» 5. è¿”å›å“åº”</code></pre><p>â€‹    </p><h5 id="Show"><a href="#Show" class="headerlink" title="Show"></a>Show</h5><ol><li>æŸ¥è¯¢å¸ƒéš†è¿‡æ»¤å™¨ ï¼ˆè‹¥çŸ­é“¾æ¥ä¸å­˜åœ¨ï¼Œè®¿é—®å¤±è´¥ï¼‰</li><li>ç”¨go-zero æŸ¥è¯¢çŸ­é“¾æ¥å’Œé•¿é“¾æ¥çš„å¯¹åº”å…³ç³»</li><li>è¿”å›å“åº”</li></ol><p>httpä¸­çš„å¸¸è§å­—æ®µï¼š</p><ul><li>connection</li><li>content-type </li><li>content-length</li><li>host</li><li>content-encoding</li></ul><p>get å’Œ postçš„åŒºåˆ«</p><ul><li>å¹‚ç­‰</li><li>æ•°æ®ä¼ é€æ–¹å¼</li><li>è¯­ä¹‰</li><li>æ•°æ®é•¿åº¦</li><li>ç¼“å­˜</li><li>å®‰å…¨æ€§</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>MongoDBçš„ä½¿ç”¨</title>
    <link href="/2023/10/26/MongoDB%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/10/26/MongoDB%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…MongoDB"><a href="#å®‰è£…MongoDB" class="headerlink" title="å®‰è£…MongoDB"></a>å®‰è£…MongoDB</h3><ul><li>æ‹‰å–æœ€æ–°é•œåƒ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ docker pull mongo:latest<br></code></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æœ¬åœ°é•œåƒ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ docker images<br></code></pre></td></tr></table></figure><ul><li>è¿è¡Œå®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ docker run -itd --name mongo -p 27017:27017 mongo --auth<br></code></pre></td></tr></table></figure><p>â€‹å‚æ•°è¯´æ˜ ï¼š</p><ol><li><strong>p 27017:27017</strong> ï¼šæ˜ å°„å®¹å™¨æœåŠ¡çš„ 27017 ç«¯å£åˆ°å®¿ä¸»æœºçš„ 27017 ç«¯å£ã€‚å¤–éƒ¨å¯ä»¥ç›´æ¥é€šè¿‡ å®¿ä¸»æœº ip:27017 è®¿é—®åˆ° mongo çš„æœåŠ¡ã€‚</li></ol><p>â€‹2. <strong>â€“auth</strong>ï¼šéœ€è¦å¯†ç æ‰èƒ½è®¿é—®å®¹å™¨æœåŠ¡ã€‚</p><ul><li><p>æ·»åŠ ç”¨æˆ·å’Œè®¾ç½®å¯†ç </p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ docker <span class="hljs-built_in">exec</span> -it mongo mongosh admin<br><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåä¸º adminï¼Œå¯†ç ä¸º 123456 çš„ç”¨æˆ·ã€‚</span><br>&gt;  db.createUser(&#123; user:<span class="hljs-string">&#x27;admin&#x27;</span>,<span class="hljs-built_in">pwd</span>:<span class="hljs-string">&#x27;123456&#x27;</span>,roles:[ &#123; role:<span class="hljs-string">&#x27;userAdminAnyDatabase&#x27;</span>, db: <span class="hljs-string">&#x27;admin&#x27;</span>&#125;,<span class="hljs-string">&quot;readWriteAnyDatabase&quot;</span>]&#125;);<br><span class="hljs-comment"># å°è¯•ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œè¿æ¥ã€‚</span><br>&gt; db.auth(<span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;123456&#x27;</span>)<br></code></pre></td></tr></table></figure></li><li><p>è¿æ¥åˆ° MongoDB å®¹å™¨</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it mongo bash<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨MongoShell</p>]]></content>
    
    
    
    <tags>
      
      <tag>MongoDB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå‘½ä»¤è¡Œç§¯ç´¯</title>
    <link href="/2023/10/26/linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A7%AF%E7%B4%AF/"/>
    <url>/2023/10/26/linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<p> <strong>ç§»åŠ¨å…‰æ ‡</strong></p><table><thead><tr><th align="center">æŒ‰é”®</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">ctrl-a</td><td align="center">ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–</td></tr><tr><td align="center">ctrl-e</td><td align="center">ç§»åŠ¨å…‰æ ‡åˆ°è¡Œå°¾</td></tr><tr><td align="center">ctrl-f</td><td align="center">-&gt;</td></tr><tr><td align="center">ctrl-b</td><td align="center">&lt;-</td></tr></tbody></table><p><strong>ä¿®æ”¹æ–‡æœ¬</strong></p><table><thead><tr><th align="center">æŒ‰é”®</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">ctrl-d</td><td align="center">åˆ é™¤å…‰æ ‡ä½ç½®çš„å­—ç¬¦</td></tr><tr><td align="center">ctrl-t</td><td align="center">å…‰æ ‡å‰å…ƒç´ ä¸å½“å‰å…‰æ ‡ä½ç½®çš„å­—ç¬¦äº’æ¢ä½ç½®</td></tr><tr><td align="center">Alt-u</td><td align="center">æŠŠå…‰æ ‡ä½ç½®åˆ°å­—å°¾çš„å­—ç¬¦è½¬ä¸ºå¤§å†™å­—æ¯</td></tr><tr><td align="center">Alt-l</td><td align="center">æŠŠå…‰æ ‡ä½ç½®åˆ°å­—å°¾çš„å­—ç¬¦è½¬ä¸ºå°å†™å­—æ¯</td></tr><tr><td align="center">Alt-t</td><td align="center">æŠŠå…‰æ ‡ä½ç½®çš„å­— å’Œ å…¶å‰æ–¹çš„å­—ä½ç½®äº’æ¢</td></tr></tbody></table><p><strong>å‰ªåˆ‡å’Œç²˜è´´</strong></p><table><thead><tr><th align="center">æŒ‰é”®</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">ctrl-k</td><td align="center">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¡Œå°¾çš„æ–‡æœ¬</td></tr><tr><td align="center">ctrl-u</td><td align="center">å‰ªåˆ‡ä»å…‰æ ‡åˆ°è¡Œé¦–çš„æ–‡æœ¬</td></tr><tr><td align="center">Alt-d</td><td align="center">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¯å°¾çš„æ–‡æœ¬</td></tr><tr><td align="center">Ctrl-y</td><td align="center">å°†å‰ªåˆ‡çš„æ–‡æœ¬ç²˜è´´åˆ°å…‰æ ‡ä½ç½®</td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>makefile Tutorial</title>
    <link href="/2023/10/25/Tutorial/"/>
    <url>/2023/10/25/Tutorial/</url>
    
    <content type="html"><![CDATA[<p>Makefileæ˜¯ä¸€ç§ç”¨äºæ„å»ºå’Œç¼–è¯‘é¡¹ç›®çš„å·¥å…·ï¼Œé€šå¸¸ç”¨äºC&#x2F;C++é¡¹ç›®ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–ç¼–ç¨‹è¯­è¨€ã€‚Makefileä½¿ç”¨ä¸€ç§ç‰¹å®šçš„è¯­æ³•æ¥å®šä¹‰é¡¹ç›®ä¸­çš„è§„åˆ™å’Œä¾èµ–å…³ç³»ã€‚ä»¥ä¸‹æ˜¯Makefileçš„åŸºæœ¬è¯­æ³•è¦ç‚¹ï¼š</p><ol><li><p><strong>ç›®æ ‡ï¼ˆTargetsï¼‰</strong>ï¼šç›®æ ‡æ˜¯æ‚¨è¦æ„å»ºçš„æ–‡ä»¶æˆ–ä»»åŠ¡çš„åç§°ã€‚é€šå¸¸ï¼Œç¬¬ä¸€ä¸ªç›®æ ‡æ˜¯é»˜è®¤ç›®æ ‡ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œ<code>make</code>å‘½ä»¤æ¥æ„å»ºã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">target: dependencies</span><br>    command<br></code></pre></td></tr></table></figure><ul><li><code>target</code>æ˜¯ç›®æ ‡çš„åç§°ã€‚</li><li><code>dependencies</code>æ˜¯ç›®æ ‡çš„ä¾èµ–é¡¹ï¼Œå¯ä»¥æ˜¯å…¶ä»–ç›®æ ‡æˆ–æ–‡ä»¶ã€‚</li><li><code>command</code>æ˜¯æ„å»ºç›®æ ‡çš„å‘½ä»¤ã€‚</li></ul></li><li><p><strong>è§„åˆ™ï¼ˆRulesï¼‰</strong>ï¼šè§„åˆ™å®šä¹‰äº†å¦‚ä½•æ„å»ºç›®æ ‡ä»¥åŠå®ƒçš„ä¾èµ–é¡¹ã€‚è§„åˆ™é€šå¸¸å‡ºç°åœ¨Makefileä¸­ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">target: dependencies</span><br>    command<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">build: main.go </span><br>go build -o bin/main main.go<br></code></pre></td></tr></table></figure></li><li><p><strong>å˜é‡ï¼ˆVariablesï¼‰</strong>ï¼šæ‚¨å¯ä»¥åœ¨Makefileä¸­å®šä¹‰å˜é‡ï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°é‡ç”¨å€¼ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile">BINARY = <span class="hljs-string">&quot;BINARYFileName&quot;</span><br><br><span class="hljs-section">build: main.go</span><br>    go build -o bin/$&#123;BINARY&#125; main.go<br></code></pre></td></tr></table></figure></li><li><p><strong>æ¡ä»¶è¯­å¥ï¼ˆConditionalsï¼‰</strong>ï¼šMakefileæ”¯æŒæ¡ä»¶è¯­å¥ï¼Œæ‚¨å¯ä»¥æ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„å‘½ä»¤ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs makefile">BINARY = <span class="hljs-string">&quot;BINARYFileName&quot;</span><br><br><span class="hljs-section">clean:</span><br>@if [ -f $&#123;BINARY&#125; ]; then<br>    rm $&#123;BINARY&#125;<br>fi<br></code></pre></td></tr></table></figure></li><li><p><strong>ä¼ªç›®æ ‡ï¼ˆPhony Targetsï¼‰</strong>ï¼šä¼ªç›®æ ‡ä¸ä»£è¡¨å®é™…çš„æ–‡ä»¶ï¼Œè€Œæ˜¯è¡¨ç¤ºç‰¹å®šä»»åŠ¡ã€‚å®ƒä»¬é€šå¸¸ç”¨äºæŒ‡å®šæ¸…ç†ï¼ˆ<code>clean</code>ï¼‰æˆ–å…¶ä»–éæ–‡ä»¶ç”Ÿæˆä»»åŠ¡ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: clean</span><br><span class="hljs-section">clean:</span><br>    rm -f my_program<br></code></pre></td></tr></table></figure></li></ol><p><strong>æ¡ˆä¾‹</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment"># å£°æ˜å˜é‡</span><br>BINARY=<span class="hljs-string">&quot;BIANRYFileName&quot;</span><br><span class="hljs-comment"># ä½¿ç”¨makeæŒ‡ä»¤æ—¶ï¼Œæ‰§è¡Œallä¸­çš„æ‰€ç”¨target</span><br><span class="hljs-section">all: goTool build</span><br><br><span class="hljs-section">goTool:</span><br>go fmt ./<br>go vet ./<br><br><span class="hljs-section">build:</span><br>CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o ./bin/$&#123;BIANRYFileName&#125;<br><span class="hljs-comment">#go build -o bin/main main.go</span><br><br><span class="hljs-section">run:</span><br>go run main.go<br><br><span class="hljs-section">clean:</span><br>@if [ -f $&#123;BINARY&#125; ]; then<br>    rm $&#123;BINARY&#125;<br>fi<br><br><span class="hljs-section">compile:</span><br>echo <span class="hljs-string">&quot;Compiling for every OS and platform&quot;</span><br><span class="hljs-comment">#GOOS=freebsd GOARCH=386 go build -o bin/main-freebsd-386 main.go</span><br>GOOS=linux GOARCH=386 go build -o bin/main-linux-386 main.go<br><span class="hljs-comment">#GOOS=windows GOARCH=386 go build -o bin/main-windows-386 main.go</span><br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Makefile</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è¯»Goä¸“å®¶ç¼–ç¨‹ã€‘ä¹‹Contextç¯‡</title>
    <link href="/2023/10/20/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BContext%E7%AF%87/"/>
    <url>/2023/10/20/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BContext%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<p>Contextçš„æ³¨æ„äº‹é¡¹</p><ul><li>ä¸è¦æŠŠContextæ”¾åœ¨ç»“æ„ä½“ä¸­ï¼Œè¦ä»¥å‚æ•°çš„æ–¹å¼æ˜¾ç¤ºä¼ é€’</li><li>ä»¥Contextä½œä¸ºå‚æ•°ä¼ é€’çš„å‡½æ•°æ–¹æ³•ï¼Œåº”è¯¥å‘Contextä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</li><li>ç»™ä¸€ä¸ªå‡½æ•°æ–¹æ³•ä¼ é€’Contextçš„æ—¶å€™ï¼Œä¸è¦ä¼ é€’nilï¼Œå¦‚æœä¸çŸ¥é“è¦ä¼ é€’ä»€ä¹ˆï¼Œå¯ä»¥ä¼ é€’ contex.TODOï¼ˆï¼‰</li><li>context çš„Valueç›¸å…³æ–¹æ³•åº”è¯¥ä¼ é€’çˆ±è¯·æ±‚åŸŸçš„å¿…è¦å‚æ•°ï¼Œä¸åº”è¯¥ç”¨äºä¼ é€’å¯é€‰å‚æ•°</li><li>Contextæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥æ”¾å¿ƒçš„åœ¨goroutineä¸­ä¼ é€’</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>gitæ€»ç»“</title>
    <link href="/2023/10/20/git%E6%80%BB%E7%BB%93/"/>
    <url>/2023/10/20/git%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h3 id="ä½¿ç”¨-git-commit-æ¥æäº¤æ–‡ä»¶"><a href="#ä½¿ç”¨-git-commit-æ¥æäº¤æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ git commit æ¥æäº¤æ–‡ä»¶"></a>ä½¿ç”¨ git commit æ¥æäº¤æ–‡ä»¶</h3><p>git commit -am  â€œfirst commit â€œ</p><h3 id="ä½¿ç”¨git-reset-å›é€€ç‰ˆæœ¬"><a href="#ä½¿ç”¨git-reset-å›é€€ç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨git reset å›é€€ç‰ˆæœ¬"></a>ä½¿ç”¨git reset å›é€€ç‰ˆæœ¬</h3><p>git reset æœ‰ä¸‰ä¸ªç‰ˆæœ¬ â€“soft â€“hard â€“mixed </p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020090358533.png" alt="image-20231020090358533"></p><p>git ls-files æŸ¥çœ‹æš‚å­˜åŒºä¸­çš„å†…å®¹</p><p>å‡å¦‚æœ‰è¯¯æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤ï¼Œè¿›è¡Œå›æº¯</p><p><strong>git reflog æŸ¥çœ‹å†å²ç‰ˆæœ¬å·</strong></p><p>git reset â€“hard ç‰ˆæœ¬å·</p><h3 id="ä½¿ç”¨-git-diff-æŸ¥çœ‹å·®å¼‚"><a href="#ä½¿ç”¨-git-diff-æŸ¥çœ‹å·®å¼‚" class="headerlink" title="ä½¿ç”¨ git diff æŸ¥çœ‹å·®å¼‚"></a>ä½¿ç”¨ git diff æŸ¥çœ‹å·®å¼‚</h3><ul><li>git diff é»˜è®¤æŸ¥çœ‹working Directory å’Œ Stage Area çš„å·®å¼‚</li><li>git diff â€“cached&#x2F;staged æŸ¥çœ‹ Stage Area å’Œ Local Areaçš„å·®å¼‚</li><li>git diff  HEADæŸ¥çœ‹ working Directory å’Œ Local Areaçš„å·®å¼‚</li><li>git diff ã€ç‰ˆæœ¬å·1ã€‘ ã€ç‰ˆæœ¬å·2ã€‘ æŸ¥çœ‹ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚<ul><li>HEAD è¡¨ç¤ºå½“å‰ç‰ˆæœ¬</li><li>HEAD~ è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬</li><li>HEAD~2 è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬</li><li>git diff HEAD~2 HEAD file.txt æŸ¥çœ‹ file.txt å½“å‰ç‰ˆæœ¬å’Œä¸Šä¸¤ä¸ªç‰ˆæœ¬é—´çš„å·®å¼‚</li></ul></li></ul><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020080808149.png" alt="image-20231020080808149"></p><h3 id="ä½¿ç”¨-git-rm-æ¥åˆ é™¤æ–‡ä»¶"><a href="#ä½¿ç”¨-git-rm-æ¥åˆ é™¤æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ git rm æ¥åˆ é™¤æ–‡ä»¶"></a>ä½¿ç”¨ git rm æ¥åˆ é™¤æ–‡ä»¶</h3><p>ç”¨ <code>git rm fileName</code> <strong>å–ä»£</strong> <code>rm fileName + git add fileName</code></p><p>git rm fileName ä¼šåˆ é™¤ æœ¬åœ°æ–‡ä»¶ å’Œ ç‰ˆæœ¬åº“æ–‡ä»¶</p><p>git rm â€“cached åªä¼šåˆ é™¤ ç‰ˆæœ¬åº“æ–‡ä»¶</p><h3 id="ä½¿ç”¨-gitignoreå¿½è§†æ–‡ä»¶"><a href="#ä½¿ç”¨-gitignoreå¿½è§†æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨.gitignoreå¿½è§†æ–‡ä»¶"></a>ä½¿ç”¨.gitignoreå¿½è§†æ–‡ä»¶</h3><p>.gitignore æœ‰ä¸€ä¸ªå¥æ•ˆå‰æï¼Œæ–‡ä»¶ä¸èƒ½æ˜¯å·²ç»è¢«æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶</p><ul><li>å°†éœ€è¦å¿½è§†çš„æ–‡ä»¶åŠ å…¥ .gitignore ä¸­</li><li>å¯ä»¥ä½¿ç”¨ é€šé…ç¬¦ <code>*</code> æ¥é€‚é…æ‰€æœ‰æ–‡ä»¶</li><li>å¯ä»¥å°†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶å¤¹æ”¾å…¥ .gitignore ä¸­ï¼Œæ–‡ä»¶å¤¹ä»¥<code>/</code> ç»“å°¾  <code>eg: temp/</code>ï¼Œè¿™å°†å¿½è§†tempæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚ <strong>æ³¨æ„</strong>ï¼šéœ€è¦å¿½è§†çš„æ–‡ä»¶å¤¹ä¸èƒ½ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œgitignoreä¸ä¼šç”Ÿæ•ˆ</li></ul><h4 id="gitignoreçš„åŒ¹é…è§„åˆ™"><a href="#gitignoreçš„åŒ¹é…è§„åˆ™" class="headerlink" title="gitignoreçš„åŒ¹é…è§„åˆ™"></a>gitignoreçš„åŒ¹é…è§„åˆ™</h4><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020103715140.png" alt="image-20231020103715140"></p><h3 id="æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å…³è”"><a href="#æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å…³è”" class="headerlink" title="æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å…³è”"></a>æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å…³è”</h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020215250344.png" alt="image-20231020215250344"></p><p>æ·»åŠ è¿œç¨‹ä»“åº“  </p><p>git remote add &lt;è¿œç¨‹ä»“åº“åˆ«å&gt;  &lt;è¿œç¨‹ä»“åº“åœ°å€&gt;  å…¶ä¸­ githubé»˜è®¤åˆ†æ”¯åå­—ä¸º originï¼ˆè¿œç¨‹ä»“åº“åˆ«åï¼‰ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git remote add origin git@github.com:Forrest-Tao/gitTest.git<br></code></pre></td></tr></table></figure><p>å°†æœ¬åœ°æ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git push -u &lt;remote&gt; &lt;remote&gt;<br>git push origin main<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>&lt;remote&gt;</code> æ˜¯æŒ‡å®šè¿œç¨‹ä»“åº“çš„åç§°ï¼Œé€šå¸¸æ˜¯ <code>origin</code>ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å·²é…ç½®çš„è¿œç¨‹ä»“åº“çš„åç§°ã€‚</li><li><code>&lt;remote&gt;</code> æ˜¯æŒ‡å®šè¦æ¨é€çš„æœ¬åœ°åˆ†æ”¯çš„åç§°ã€‚</li></ul><p>æ‹‰å–è¿œç¨‹ä»“åº“å†…å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull &lt;è¿œç¨‹ä»“åº“å&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt; :&lt;æœ¬åœ°åˆ†æ”¯å&gt;<br></code></pre></td></tr></table></figure><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020224632232.png" alt="image-20231020224632232"></p><ul><li><p>git branch æŸ¥çœ‹åˆ†æ”¯ï¼Œå…¶ä¸­ç”¨  *  è¡¨ç¤ºçš„ä¸ºå½“å‰åˆ†æ”¯</p></li><li><p>git branch brachName æ–°å»ºåˆ†æ”¯</p></li><li><p>git checkout branchName ç”¨æ¥åˆ‡æ¢åˆ°ç›¸åº”çš„åˆ†æ”¯</p><ul><li>ç”±äº git checkout æœ‰åŒé‡å«ä¹‰ï¼ˆæ¢å¤æ–‡ä»¶åˆ°ç›¸åº”çš„çŠ¶æ€ | åˆ‡æ¢åˆ†æ”¯ï¼Œåœ¨gitçš„2.23ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯­ä¹‰æ›´åŠ æ˜ç¡®çš„ switchï¼‰</li><li>æ¨èä½¿ç”¨ <code>git switch branchName</code></li></ul></li><li><p>å¦‚æœä¸€ä¸ªåˆ†æ”¯ä¸å†éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ git  brach -d æ¥åˆ é™¤åˆ†æ”¯</p></li></ul><p>ä½¿ç”¨ git merge å°†ä¸åŒçš„åˆ†æ”¯å†…å®¹è¿›è¡Œåˆå¹¶</p><p>å¯ä»¥ä½¿ç”¨ <code>git  log --graph --oneline --decorate --all</code> æ¥æŸ¥çœ‹åˆå¹¶åˆ†æ”¯è¯¦æƒ…</p><h3 id="è§£å†³åˆå¹¶å†²çª"><a href="#è§£å†³åˆå¹¶å†²çª" class="headerlink" title="è§£å†³åˆå¹¶å†²çª"></a>è§£å†³åˆå¹¶å†²çª</h3><ul><li>å½“ä¸¤ä¸ªåˆ†æ”¯ æ²¡æœ‰å†²çªæ—¶ï¼Œgit merge branchName ä¼šéå¸¸ä¸æ»‘çš„å®Œæˆï¼Œå°†branchName ä¸­çš„æ–‡ä»¶å’Œå½“å‰åˆ†æ”¯çš„æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼›å¹¶ä¸”ä¼šè‡ªåŠ¨æäº¤</li><li>å½“ä¸¤ä¸ªåˆ†æ”¯å‘ç”Ÿå†²çªæ—¶ï¼Œgit merger branchName ä¼šæç¤ºæˆ‘ä»¬è‡ªåŠ¨åˆå¹¶å‘ç”Ÿé”™è¯¯ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆå¹¶ï¼›æ­¤æ—¶ä¼šå°†branchNameä¸­çš„æ•°æ®å†™å…¥å½“å‰å‘ç”Ÿå†²çªçš„æ–‡ä»¶çš„é‚£ä¸ªä½ç½®ï¼Œå¹¶ä¸”æ˜¾ç¤ºçš„æç¤ºä»€ä¹ˆä»€ä¹ˆæ˜¯å½“å‰åˆ†æ”¯çš„å†…å®¹ï¼Œè€Œä»€ä¹ˆä»€ä¹ˆæ˜¯branchNameçš„å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†å†²çªè§£å†³ï¼›å¹¶ç”±æˆ‘ä»¬æ‰‹åŠ¨ git add å’Œ git commit</li></ul><h3 id="Rebase"><a href="#Rebase" class="headerlink" title="Rebase"></a>Rebase</h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021101119181.png" alt="image-20231021101119181"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021091150448.png" alt="image-20231021091150448"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021091243478.png" alt="image-20231021091243478"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021103001369.png" alt="image-20231021103001369"></p><p>ä½¿ç”¨ alias æ¥ä»£æ›¿  git log â€“oneline â€“all â€“graph</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">alias</span> graph=<span class="hljs-string">&quot; git log --oneline --all --graph&quot;</span><br></code></pre></td></tr></table></figure><h3 id="åˆ†æ”¯ç®¡ç†å’Œå·¥ä½œæµæ¨¡å‹"><a href="#åˆ†æ”¯ç®¡ç†å’Œå·¥ä½œæµæ¨¡å‹" class="headerlink" title="åˆ†æ”¯ç®¡ç†å’Œå·¥ä½œæµæ¨¡å‹"></a>åˆ†æ”¯ç®¡ç†å’Œå·¥ä½œæµæ¨¡å‹</h3><p><img src="C:\Users\Forrest\OneDrive\æ¡Œé¢\image-20231021104124209.png" alt="image-20231021104124209"></p><ul><li><code>master/main</code> ä»£è¡¨é¡¹ç›®çš„ç¨³å®šç‰ˆæœ¬ï¼Œæ¯ä¸ªæäº¤åˆ°ä¸»åˆ†æ”¯çš„ä»£ç éƒ½åº”è¯¥æ˜¯ç»è¿‡æµ‹è¯•å’Œå®¡æ ¸çš„</li><li><code>dev</code> ç”¨äºæ—¥å¸¸å¼€å‘ã€‚æ‰€æœ‰çš„åŠŸèƒ½åˆ†æ”¯ã€å‘å¸ƒåˆ†æ”¯ã€ä¿®æ”¹åˆ†æ”¯éƒ½åº”è¯¥ä»å¼€å‘åˆ†æ”¯æ´¾ç”Ÿã€‚</li><li><code>feat</code> ç”¨äºå¼€å‘å•ç‹¬çš„åŠŸèƒ½æˆ–ç‰¹æ€§ã€‚ æ¯ä¸ªåŠŸèƒ½åˆ†æ”¯éƒ½åº”è¯¥ä»å¼€å‘åˆ†æ”¯æ´¾ç”Ÿï¼Œå¹¶åœ¨å¼€å‘å®Œæˆååˆå¹¶å› <strong>dev</strong></li><li><code>relaese</code> ç”¨äºå‡†å¤‡é¡¹ç›®å‘å¸ƒã€‚å‘å¸ƒåˆ†æ”¯åº”è¯¥ä»å¼€å‘åˆ†æ”¯æ´¾ç”Ÿï¼Œå¹¶åœ¨å‡†å¤‡å¥½å‘å¸ƒç‰ˆæœ¬ååˆå¹¶å›ä¸»åˆ†æ”¯å’Œå¼€å‘åˆ†æ”¯</li><li><code>hotfix</code> ç”¨äºä¿®æ”¹ä¸»åˆ†æ”¯ä¸Šçš„ç´§æ€¥é—®é¢˜ã€‚çƒ­ä¿®å¤åˆ†æ”¯åº”è¯¥ä»ä¸»åˆ†æ”¯æ´¾ç”Ÿï¼Œå¹¶åœ¨ä¿®å¤å®Œæˆåï¼Œåˆå¹¶å›ä¸»åˆ†æ”¯å’Œå¼€å‘åˆ†æ”¯</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ€»ç»“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç‹é“è®¡ç®—æœºç»„æˆåŸç†</title>
    <link href="/2023/10/18/%E7%8E%8B%E9%81%93%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"/>
    <url>/2023/10/18/%E7%8E%8B%E9%81%93%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="done-1-10"><a href="#done-1-10" class="headerlink" title="done  1-10"></a>done  1-10</h2><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231018224323278.png" alt="image-20231018224323278"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231019091343092.png" alt="image-20231019091343092"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231019092506455.png" alt="image-20231019092506455"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231019092907677.png" alt="image-20231019092907677"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231019111416514.png" alt="image-20231019111416514"></p><h2 id="11-20"><a href="#11-20" class="headerlink" title="11-20"></a>11-20</h2><h3 id="å¸¦ç¬¦å·æ•´æ•°"><a href="#å¸¦ç¬¦å·æ•´æ•°" class="headerlink" title="å¸¦ç¬¦å·æ•´æ•°"></a>å¸¦ç¬¦å·æ•´æ•°</h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020111421887.png" alt="image-20231020111421887"></p><h3 id="åç "><a href="#åç " class="headerlink" title="åç "></a>åç </h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020111826533.png" alt="image-20231020111826533"></p><h3 id="æºç å’Œè¡¥ç çš„å¿«é€Ÿè½¬æ¢"><a href="#æºç å’Œè¡¥ç çš„å¿«é€Ÿè½¬æ¢" class="headerlink" title="æºç å’Œè¡¥ç çš„å¿«é€Ÿè½¬æ¢"></a>æºç å’Œè¡¥ç çš„å¿«é€Ÿè½¬æ¢</h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020112159999.png" alt="image-20231020112159999"></p><h3 id="è¡¥ç çš„è¿ç®—"><a href="#è¡¥ç çš„è¿ç®—" class="headerlink" title="è¡¥ç çš„è¿ç®—"></a>è¡¥ç çš„è¿ç®—</h3><p>æºç è½¬è¡¥ç  è¿›è¡Œè¿ç®—ï¼Œè¿ç®—ç»“æœå†è½¬ä¸ºæºç ï¼Œå¾—åˆ°è¿ç®—ç»“æœï¼ˆè¡¥ç çš„è¿ç®—è¿‡ç¨‹ä¸­ï¼Œç¬¦å·ä½å‚ä¸è¿ç®—ï¼‰</p><p>å·²çŸ¥ä¸€æ•°å­—çš„è¡¥ç ï¼Œæ±‚å…¶è´Ÿå€¼çš„è¡¥ç è¡¨ç¤º</p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020120440469.png" alt="image-20231020120440469"></p><p><strong>é‡ç‚¹</strong>  åŸç  å’Œè¡¥ç   è¡¥ç ä¸å…¶è´Ÿå€¼çš„è¡¥ç é—´çš„å…³ç³»</p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020121658541.png" alt="image-20231020121658541"></p><h3 id="å„ç§ç çš„åŸºæœ¬ç‰¹æ€§æ¯”è¾ƒ"><a href="#å„ç§ç çš„åŸºæœ¬ç‰¹æ€§æ¯”è¾ƒ" class="headerlink" title="å„ç§ç çš„åŸºæœ¬ç‰¹æ€§æ¯”è¾ƒ"></a>å„ç§ç çš„åŸºæœ¬ç‰¹æ€§æ¯”è¾ƒ</h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231020122354358.png" alt="image-20231020122354358"></p><h3 id="ç§»ç "><a href="#ç§»ç " class="headerlink" title="ç§»ç "></a>ç§»ç </h3><p>è¡¥ç çš„åŸºç¡€ä¸Šå°†ç¬¦å·ä½å–å</p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021142921215.png" alt="image-20231021142921215"></p><h3 id="è€ƒé¢˜"><a href="#è€ƒé¢˜" class="headerlink" title="è€ƒé¢˜"></a><strong>è€ƒé¢˜</strong></h3><ol><li>æ±‚ä¸€ä¸ªçœŸå€¼çš„åŸç  åç  è¡¥ç  ç§»ç </li><li>ç”¨ä¸€ä¸ªå·²çŸ¥çš„åŸç  | åç  | è¡¥ç  |  ç§»ç  æ±‚å…¶çœŸå€¼</li></ol><p>å…¶ä¸­ ç§»ç  æ±‚ çœŸå€¼çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li>æ­£æ•°ç›¸åŒ</li><li>è´Ÿæ•°ä»ç¬¬ä¸€ä¸ª1å¼€å§‹ï¼Œä»å³å‘å·¦æ‰€æœ‰çš„<strong>æ•°å€¼ä½</strong>å–å</li></ul><p><strong>eg:</strong></p><p>[x]è¡¥&#x3D;1000 1101 </p><p>ä»ç¬¬ä¸€ä¸ª1å¼€å§‹ï¼Œä»å³å‘å·¦æ‰€æœ‰çš„æ•°å€¼ä½å–å å¾—: 1111 0011 ï¼Œå¾—ï¼ˆ64+32+16+2+1ï¼‰*-1&#x3D;-115</p><h3 id="å®šç‚¹å°æ•°"><a href="#å®šç‚¹å°æ•°" class="headerlink" title="å®šç‚¹å°æ•°"></a>å®šç‚¹å°æ•°</h3><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021200644577.png" alt="image-20231021200644577"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021200631457.png" alt="image-20231021200631457"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021200919981.png" alt="image-20231021200919981"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021201754179.png" alt="image-20231021201754179"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021204937931.png" alt="image-20231021204937931"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021204923740.png" alt="image-20231021204923740"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231021205324117.png" alt="image-20231021205324117"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è…¾è®¯äº‘æ–‡ä»¶ä¸Šä¼ </title>
    <link href="/2023/10/18/%E8%85%BE%E8%AE%AF%E4%BA%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    <url>/2023/10/18/%E8%85%BE%E8%AE%AF%E4%BA%91%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
    
    <content type="html"><![CDATA[<p><a href="https://cloud.tencent.com/document/product/598/37140">è®¿é—®ç®¡ç† å­è´¦å·è®¿é—®å¯†é’¥ç®¡ç†-ç”¨æˆ·æŒ‡å—-æ–‡æ¡£ä¸­å¿ƒ-è…¾è®¯äº‘ (tencent.com)</a></p><p><a href="https://www.vpsss.net/21684.html">è…¾è®¯äº‘APIå¯†é’¥APPID&#x2F;SecretId&#x2F;SecretKeyå¦‚ä½•è·å–ï¼Ÿ-é­è‰¾æ–¯ç¬”è®° (vpsss.net)</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨Goå®ç°éªŒè¯ç å‘é€æœåŠ¡</title>
    <link href="/2023/10/17/%E4%BD%BF%E7%94%A8Go%E5%AE%9E%E7%8E%B0%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%91%E9%80%81%E6%9C%8D%E5%8A%A1/"/>
    <url>/2023/10/17/%E4%BD%BF%E7%94%A8Go%E5%AE%9E%E7%8E%B0%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%91%E9%80%81%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨Goå®ç°éªŒè¯ç å‘é€æœåŠ¡"><a href="#ä½¿ç”¨Goå®ç°éªŒè¯ç å‘é€æœåŠ¡" class="headerlink" title="ä½¿ç”¨Goå®ç°éªŒè¯ç å‘é€æœåŠ¡"></a>ä½¿ç”¨Goå®ç°éªŒè¯ç å‘é€æœåŠ¡</h1><h2 id="é‚®ç®±æœåŠ¡é…ç½®"><a href="#é‚®ç®±æœåŠ¡é…ç½®" class="headerlink" title="é‚®ç®±æœåŠ¡é…ç½®"></a>é‚®ç®±æœåŠ¡é…ç½®</h2><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©qqé‚®ç®±ä½œä¸ºæ¡ˆä¾‹</p><ul><li><a href="https://service.mail.qq.com/detail/0/141">å¸®åŠ©ç³»ç»Ÿ (qq.com)</a></li></ul><h2 id="ä½¿ç”¨ç¬¬ä¸‰åŒ…å®ç°é‚®ä»¶æœåŠ¡é…ç½®"><a href="#ä½¿ç”¨ç¬¬ä¸‰åŒ…å®ç°é‚®ä»¶æœåŠ¡é…ç½®" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰åŒ…å®ç°é‚®ä»¶æœåŠ¡é…ç½®"></a>ä½¿ç”¨ç¬¬ä¸‰åŒ…å®ç°é‚®ä»¶æœåŠ¡é…ç½®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">go get github.com/jordan-wright/email<br></code></pre></td></tr></table></figure><h2 id="åˆ©ç”¨Redisä¸­çš„stringçš„å¯è®¾ç½®è¿‡æœŸè¿™ä¸€ç‰¹æ€§"><a href="#åˆ©ç”¨Redisä¸­çš„stringçš„å¯è®¾ç½®è¿‡æœŸè¿™ä¸€ç‰¹æ€§" class="headerlink" title="åˆ©ç”¨Redisä¸­çš„stringçš„å¯è®¾ç½®è¿‡æœŸè¿™ä¸€ç‰¹æ€§"></a>åˆ©ç”¨Redisä¸­çš„stringçš„å¯è®¾ç½®è¿‡æœŸè¿™ä¸€ç‰¹æ€§</h2><h3 id="é…ç½®-Redis"><a href="#é…ç½®-Redis" class="headerlink" title="é…ç½® Redis"></a>é…ç½® Redis</h3><h4 id="å¯¼å…¥redisçš„åŒ…"><a href="#å¯¼å…¥redisçš„åŒ…" class="headerlink" title="å¯¼å…¥redisçš„åŒ…"></a>å¯¼å…¥redisçš„åŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">go get github.com/go-redis/redis/v8<br></code></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–redis"><a href="#åˆå§‹åŒ–redis" class="headerlink" title="åˆå§‹åŒ–redis"></a>åˆå§‹åŒ–redis</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> RDB = InitRedis(<span class="hljs-string">&quot;localhost:6379&quot;</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InitRedis</span><span class="hljs-params">(addr <span class="hljs-type">string</span>)</span></span> *redis.Client &#123;<br>   <span class="hljs-keyword">return</span> redis.NewClient(&amp;redis.Options&#123;<br>      Addr:     addr,<br>      Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// no password set</span><br>      DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// use default DB</span><br>   &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="GoéªŒè¯ç æœåŠ¡é€»è¾‘"><a href="#GoéªŒè¯ç æœåŠ¡é€»è¾‘" class="headerlink" title="GoéªŒè¯ç æœåŠ¡é€»è¾‘"></a>GoéªŒè¯ç æœåŠ¡é€»è¾‘</h2><p>æˆ‘ä»¬ä½¿ç”¨Rediså­˜å‚¨<code>é‚®ç®±-éªŒè¯ç </code>çš„é”®å€¼å¯¹ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</p><p>å¦‚å°†è¿‡æœŸæ—¶é—´è®¾ç½®ä¸º5åˆ†é’Ÿï¼Œé‚£ä¹ˆåœ¨ä¸€å¯¹é”®å€¼å¯¹æ’å…¥æ•°æ®åº“çš„5åˆ†é’ŸåRediså°±ä¼šå°†å…¶åˆ é™¤ã€‚è¿™æ ·å°±å®ç°äº†éªŒè¯ç åœ¨ä¸€å®šæ—¶é—´åè¿‡æœŸå¤±æ•ˆçš„åŠŸèƒ½ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestEmail</span><span class="hljs-params">(t *testing.T)</span></span> &#123;<br>e := email.NewEmail()<br>e.From = <span class="hljs-string">&quot;yansaitao@qq.com&quot;</span><br>e.To = []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;2674978072@qq.com&quot;</span>&#125;<br><br>e.Subject = <span class="hljs-string">&quot;Validation Code Sending Test&quot;</span><br>e.HTML = []<span class="hljs-type">byte</span>(<span class="hljs-string">&quot;&lt;h1&gt;Your Validation Code is &quot;</span> + helper.GenerateRandomCode() + <span class="hljs-string">&quot;&lt;/h1&gt;&quot;</span>)<br>err := e.SendWithTLS(<span class="hljs-string">&quot;smtp.qq.com:465&quot;</span>, smtp.PlainAuth(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;yansaitao@qq.com&quot;</span>, defined.MailPassword, <span class="hljs-string">&quot;smtp.qq.com&quot;</span>),<br>&amp;tls.Config&#123;InsecureSkipVerify: <span class="hljs-literal">true</span>, ServerName: <span class="hljs-string">&quot;smtp.qq.com&quot;</span>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>t.Fatal(err)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¿™é‡Œæˆ‘ä»¬æ³¨æ„</strong></p><ul><li>smtpçš„ç«¯å£å·ä¸º25ï¼Œä½†è¿™é‡Œéœ€è¦å®‰å…¨ç™»å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ 465ç«¯å£æ¥å®ç°åŠ å¯†é€šä¿¡ï¼Œä»¥æ»¡è¶³å®‰å…¨éœ€æ±‚</li><li>defined.MailPassword ä¸ºç¬¬ä¸€æ­¥ä¸­è®¾ç½®qqé‚®ç®±ï¼Œæ‰€å¾—åˆ°çš„æˆæƒç </li></ul><p>ç”ŸæˆéšæœºéªŒè¯ç </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GenerateRandomCode</span><span class="hljs-params">()</span></span> <span class="hljs-type">string</span> &#123;<br>s := <span class="hljs-string">&quot;1234567890&quot;</span><br>code := <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-comment">// import random seed, or that random code will always be the same one</span><br>rand.Seed(time.Now().UnixNano())<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; defined.CodeLength; i++ &#123;<br>code += <span class="hljs-type">string</span>(s[rand.Intn(<span class="hljs-built_in">len</span>(s))])<br>&#125;<br><span class="hljs-keyword">return</span> code<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­çš„ defined.CodeLengthä¸ºè‡ªå®šä¹‰éªŒè¯ç é•¿åº¦</p><h2 id="å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å®ç°"><a href="#å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å®ç°" class="headerlink" title="å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å®ç°"></a>å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å®ç°</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(l *MailCodeSendRegisterLogic)</span></span> MailCodeSendRegister(req *types.MailCodeSendRequest) (resp *types.MailCodeSendReply, err <span class="hljs-type">error</span>) &#123;<br><span class="hljs-comment">// check whether the email has been registered</span><br>cnt, err := l.svcCtx.Engine.Where(<span class="hljs-string">&quot;email = ?&quot;</span>, req.Email).Count(<span class="hljs-built_in">new</span>(model.UserBasic))<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-keyword">if</span> cnt &gt; <span class="hljs-number">0</span> &#123;<br>err = errors.New(<span class="hljs-string">&quot;this Email has registered before&quot;</span>)<br><span class="hljs-keyword">return</span><br>&#125;<br><br><span class="hljs-comment">// generate random validation code</span><br>code := helper.GenerateRandomCode()<br><br><span class="hljs-comment">// store the email-code kv pair into</span><br>l.svcCtx.RDB.Set(l.ctx, req.Email, code, time.Second*time.Duration(defined.CodeExpirationTime))<br><br>err = helper.MailSendCode(req.Email, code)<br>resp = &amp;types.MailCodeSendReply&#123;Code: code&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ CodeExpirationTimeä¸ºè¿‡æœŸçš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’</p>]]></content>
    
    
    <categories>
      
      <category>golang</category>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¬”è®°</tag>
      
      <tag>é‚®ç®±</tag>
      
      <tag>web</tag>
      
      <tag>golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è¯»Goä¸“å®¶ç¼–ç¨‹ã€‘ä¹‹Stringç¯‡</title>
    <link href="/2023/10/15/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BString%E7%AF%87/"/>
    <url>/2023/10/15/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BString%E7%AF%87/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ã€å¥‡æ€å¦™æƒ³ã€‘</title>
    <link href="/2023/10/14/%E3%80%90%E5%A5%87%E6%80%9D%E5%A6%99%E6%83%B3%E3%80%91/"/>
    <url>/2023/10/14/%E3%80%90%E5%A5%87%E6%80%9D%E5%A6%99%E6%83%B3%E3%80%91/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘æƒ³å†™ä¸€ä¸ªå›¾åºŠ</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ã€è¯»Goä¸“å®¶ç¼–ç¨‹ã€‘ä¹‹Channelç¯‡</title>
    <link href="/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BChannel%E7%AF%87/"/>
    <url>/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BChannel%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><ul><li>channelæ˜¯Golangåœ¨è¯­è¨€å±‚é¢æä¾›çš„goroutineé—´çš„é€šä¿¡æ–¹å¼ï¼Œæ¯”Unixç®¡é“æ›´æ˜“ç”¨ä¹Ÿæ›´è½»ä¾¿ã€‚</li><li>channelä¸»è¦ç”¨äºè¿›ç¨‹å†…å„goroutineé—´é€šä¿¡ï¼Œå¦‚æœéœ€è¦è·¨è¿›ç¨‹é€šä¿¡ï¼Œå»ºè®®ä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ–¹æ³•æ¥è§£å†³ã€‚</li></ul><h3 id="Chan-æ•°æ®ç»“æ„"><a href="#Chan-æ•°æ®ç»“æ„" class="headerlink" title="Chan æ•°æ®ç»“æ„"></a>Chan æ•°æ®ç»“æ„</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> hchan <span class="hljs-keyword">struct</span> &#123;<br>    qcount   <span class="hljs-type">uint</span>           <span class="hljs-comment">// å½“å‰é˜Ÿåˆ—ä¸­å‰©ä½™å…ƒç´ ä¸ªæ•°</span><br>    dataqsiz <span class="hljs-type">uint</span>           <span class="hljs-comment">// ç¯å½¢é˜Ÿåˆ—é•¿åº¦ï¼Œå³å¯ä»¥å­˜æ”¾çš„å…ƒç´ ä¸ªæ•°</span><br>    buf      unsafe.Pointer <span class="hljs-comment">// ç¯å½¢é˜Ÿåˆ—æŒ‡é’ˆ</span><br>    elemsize <span class="hljs-type">uint16</span>         <span class="hljs-comment">// æ¯ä¸ªå…ƒç´ çš„å¤§å°</span><br>    closed   <span class="hljs-type">uint32</span>            <span class="hljs-comment">// æ ‡è¯†å…³é—­çŠ¶æ€</span><br>    elemtype *_type         <span class="hljs-comment">// å…ƒç´ ç±»å‹</span><br>    sendx    <span class="hljs-type">uint</span>           <span class="hljs-comment">// é˜Ÿåˆ—ä¸‹æ ‡ï¼ŒæŒ‡ç¤ºå…ƒç´ å†™å…¥æ—¶å­˜æ”¾åˆ°é˜Ÿåˆ—ä¸­çš„ä½ç½®</span><br>    recvx    <span class="hljs-type">uint</span>           <span class="hljs-comment">// é˜Ÿåˆ—ä¸‹æ ‡ï¼ŒæŒ‡ç¤ºå…ƒç´ ä»é˜Ÿåˆ—çš„è¯¥ä½ç½®è¯»å‡º</span><br>    recvq    waitq          <span class="hljs-comment">// ç­‰å¾…è¯»æ¶ˆæ¯çš„goroutineé˜Ÿåˆ—</span><br>    sendq    waitq          <span class="hljs-comment">// ç­‰å¾…å†™æ¶ˆæ¯çš„goroutineé˜Ÿåˆ—</span><br>    lock mutex              <span class="hljs-comment">// äº’æ–¥é”ï¼Œchanä¸å…è®¸å¹¶å‘è¯»å†™</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼ŒChanç”± é˜Ÿåˆ—ã€ä¿¡æ¯ç±»å‹ã€goroutineç­‰ç¯ç›–é˜Ÿåˆ—ç»„æˆ</p><h4 id="ç¯å½¢é˜Ÿåˆ—"><a href="#ç¯å½¢é˜Ÿåˆ—" class="headerlink" title="ç¯å½¢é˜Ÿåˆ—"></a>ç¯å½¢é˜Ÿåˆ—</h4><p>chanå†…éƒ¨å®ç°äº†ä¸€ä¸ªç¯å½¢é˜Ÿåˆ—ä½œä¸ºå…¶ç¼“å†²åŒºï¼Œé˜Ÿåˆ—çš„é•¿åº¦æ˜¯åˆ›å»ºChanæ—¶æŒ‡å®šçš„ã€‚</p><h4 id="ç­‰å¾…é˜Ÿåˆ—"><a href="#ç­‰å¾…é˜Ÿåˆ—" class="headerlink" title="ç­‰å¾…é˜Ÿåˆ—"></a>ç­‰å¾…é˜Ÿåˆ—</h4><ul><li>ä»Channelä¸­è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœç¼“å†²åŒºä¸ºç©ºï¼Œæ­¤æ—¶çš„Gè¢«é˜»å¡</li><li>ä»Channelä¸­å†™æ•°æ®æ—¶ï¼Œå¦‚æœç¼“å†²åŒºæ»¡äº†ï¼Œæ­¤æ—¶çš„Gè¢«é˜»å¡</li></ul><p>è¢«é˜»å¡çš„Gä¼šæŒ‚åœ¨Channelçš„ç­‰å¾…é˜Ÿåˆ—ä¸­</p><ul><li>å› ä¸ºè¯»é˜»å¡çš„Gä¼šè¢«å‘Channelå†™çš„Gå”¤é†’</li><li>å› ä¸ºå†™é˜»å¡çš„Gä¼šè¢«å‘Channelè¯»çš„Gå”¤é†’</li></ul><h4 id="ä¿¡æ¯ç±»å‹"><a href="#ä¿¡æ¯ç±»å‹" class="headerlink" title="ä¿¡æ¯ç±»å‹"></a>ä¿¡æ¯ç±»å‹</h4><p>ä¸€ä¸ªChannelåªèƒ½ä¼ é€’ä¸€ç§ç±»å‹çš„å€¼ï¼Œç±»å‹ä¿¡æ¯å­˜å‚¨åœ¨hchançš„æ•°æ®ç»“æ„ä¸­</p><ul><li>elemtypeä»£è¡¨ç±»å‹ï¼Œç”¨äºæ•°æ®ä¼ é€’è¿‡ç¨‹ä¸­çš„èµ‹å€¼ï¼›</li><li>elemsizeä»£è¡¨ç±»å‹å¤§å°ï¼Œç”¨äºåœ¨bufä¸­å®šä½å…ƒç´ ä½ç½®ã€‚</li></ul><h4 id="Mutex"><a href="#Mutex" class="headerlink" title="Mutex"></a>Mutex</h4><ul><li>ä¸€ä¸ªchannelä»…åŒæ—¶å…è®¸è¢«ä¸€ä¸ªgoroutineè¯»å†™</li></ul><h3 id="ä»Channelä¸­å†™æ•°æ®"><a href="#ä»Channelä¸­å†™æ•°æ®" class="headerlink" title="ä»Channelä¸­å†™æ•°æ®"></a>ä»Channelä¸­å†™æ•°æ®</h3><ul><li>å¦‚æœç­‰å¾…æ¥å—é˜Ÿåˆ—recvqä¸ä¸ºç©ºï¼Œè¯´æ˜ç¼“å†²åŒºæ²¡æœ‰æ•°æ®æˆ–è€…æ²¡æœ‰ç¼“å†²åŒºï¼Œæ­¤æ—¶ç›´æ¥å°†recvq å–å‡ºG,æŠŠæ•°æ®å†™å…¥å…¶ä¸­ï¼Œæœ€åæŠŠè¯¥Gå”¤é†’ï¼Œç»“æŸå‘é€è¿‡ç¨‹ï¼ˆChannelå¤§å°ä¸º0çš„æƒ…å½¢ï¼‰</li><li>å¦‚æœç¼“å†²åŒºä¸­è¿˜æœ‰ç©ºä½™ä½ç½®ï¼Œç›´æ¥å°†æ•°æ®å†™å…¥ç¼“å­˜åŒºï¼Œç»“æŸå‘é€è¿‡ç¨‹ï¼ˆChannelæ²¡æ»¡ï¼Œè¿˜å¯ä»¥ç»§ç»­å†™ï¼‰</li><li>å¦‚æœç¼“å†²åŒºä¸­æ²¡æœ‰ç©ºä½™ä½ç½®ï¼Œå°†å¾…å‘é€çš„æ•°æ®å†™å…¥Gä¸­ï¼Œå°†å½“å‰GåŠ å…¥sendqï¼Œè¿›å…¥ç¡çœ ï¼Œç­‰å¾…è¯»Gå”¤é†’ï¼ˆChannelæ»¡äº†ï¼‰</li></ul><h3 id="ä»Channelä¸­è¯»æ•°æ®"><a href="#ä»Channelä¸­è¯»æ•°æ®" class="headerlink" title="ä»Channelä¸­è¯»æ•°æ®"></a>ä»Channelä¸­è¯»æ•°æ®</h3><ul><li>å¦‚æœç­‰å¾…å‘é€é˜Ÿåˆ—sendqä¸ä¸ºç©º&amp;&amp;æ²¡æœ‰ç¼“å†²åŒºï¼Œç›´æ¥ä»sendqä¸­è¯»å–Gï¼ŒæŠŠé˜»å¡çš„Gå”¤é†’ï¼Œç»“æŸè¯»å–è¿‡ç¨‹ï¼ˆChannelå¤§å°ä¸º0çš„æƒ…å½¢ï¼‰</li><li>å¦‚æœç­‰å¾…å‘é€é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œåˆ™ç¼“å†²åŒºå·²æ»¡ï¼Œä»ç¼“å†²åŒºé¦–éƒ¨è¯»å–å‡ºæ•°æ®ï¼ŒæŠŠGä¸­æ•°æ®å†™å…¥ç¼“å†²åŒºå°¾éƒ¨ï¼Œç­‰å¾…å‘é€é˜Ÿåˆ—çš„é¦–éƒ¨å…ƒç´ å”¤é†’ï¼Œç»“æŸè¯»å–è¿‡ç¨‹ï¼ˆChannelæ»¡äº†ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€å¤§å †çš„Gç­‰å¾…ç€ç»™Channelå‘é€æ•°æ®ï¼Œåœ¨é‚£å—é˜»å¡ç­‰å¾…ç€ï¼‰</li><li>å¦‚æœç¼“å­˜åŒºä¸­æœ‰æ•°æ®ï¼Œåˆ™ä»ç¼“å†²åŒºä¸­è¯»å–æ•°æ®ï¼Œç»“æŸè¯»å–è¿‡ç¨‹ï¼ˆChannelè¿˜æ²¡æ»¡ï¼Œæ­£å¸¸è¯»å–é˜Ÿåˆ—çš„é¦–éƒ¨ï¼‰</li><li>å¦‚æœsendqä¸ºç©ºï¼Œç­‰å¾…ï¼Œè¿›å…¥ç¡çœ ï¼Œç­‰å¾…è¢«å†™Gå”¤é†’ï¼ˆæ²¡æ•°æ®äº†ï¼Œç­‰ç€æœ‰äººå†™æ•°æ®è¿›æ¥ï¼‰</li></ul><h3 id="Channelçš„ç”¨æ³•"><a href="#Channelçš„ç”¨æ³•" class="headerlink" title="Channelçš„ç”¨æ³•"></a>Channelçš„ç”¨æ³•</h3><ul><li>channelçš„åªè¯»å’Œåªå†™</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-comment">// &lt;-chan åªè¯»</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">readChan</span><span class="hljs-params">(chanName &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &#123;<br>fmt.Println(&lt;-chanName)<br>&#125;<br><span class="hljs-comment">//chan&lt;- åªå†™</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">writeChan</span><span class="hljs-params">(chanName <span class="hljs-keyword">chan</span>&lt;- <span class="hljs-type">int</span>)</span></span> &#123;<br>chanName &lt;- <span class="hljs-number">1</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> mychan = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">10</span>)<br>writeChan(mychan)<br>readChan(mychan)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>select</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">addNumberToChan</span><span class="hljs-params">(chanName <span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br>chanName &lt;- <span class="hljs-number">1</span><br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> chan1 = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">10</span>)<br><span class="hljs-keyword">var</span> chan2 = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">10</span>)<br><span class="hljs-keyword">go</span> addNumberToChan(chan1)<br><span class="hljs-keyword">go</span> addNumberToChan(chan2)<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-keyword">case</span> e := &lt;-chan1:<br>fmt.Printf(<span class="hljs-string">&quot;Get element from chan1: %d\n&quot;</span>, e)<br><span class="hljs-keyword">case</span> e := &lt;-chan2:<br>fmt.Printf(<span class="hljs-string">&quot;Get element from chan2: %d\n&quot;</span>, e)<br><span class="hljs-keyword">default</span>:<br>fmt.Printf(<span class="hljs-string">&quot;No element in chan1 and chan2.\n&quot;</span>)<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>&#125;<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç¨‹åºä¸­åˆ›å»ºä¸¤ä¸ªchannelï¼š chan1å’Œchan2ã€‚å‡½æ•°addNumberToChan()å‡½æ•°ä¼šå‘ä¸¤ä¸ªchannelä¸­å‘¨æœŸæ€§å†™å…¥æ•°æ®ã€‚é€šè¿‡selectå¯ä»¥ç›‘æ§ä¸¤ä¸ªchannelï¼Œä»»æ„ä¸€ä¸ªå¯è¯»æ—¶å°±ä»å…¶ä¸­è¯»å‡ºæ•°æ®ã€‚</p><ul><li>range</li></ul><p>é€šè¿‡rangeå¯ä»¥æŒç»­ä»Channelä¸­è¯»å–æ•°æ®ï¼Œå¥½åƒåœ¨éå†æ•´ä¸ªæ•°ç»„ä¸€æ ·ï¼Œå½“Channelä¸­æ²¡æœ‰æ•°æ®æ—¶ï¼Œä¼šé˜»å¡å½“å‰Gï¼Œä¸è¯»channelä¸€æ ·å¤„ç†</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">chanRange</span><span class="hljs-params">(chanName <span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">for</span> e := <span class="hljs-keyword">range</span> chanName &#123;<br>        fmt.Printf(<span class="hljs-string">&quot;Get element from chan: %d\n&quot;</span>, e)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœå‘æ­¤channelå†™æ•°æ®çš„goroutineé€€å‡ºæ—¶ï¼Œç³»ç»Ÿæ£€æµ‹åˆ°è¿™ç§æƒ…å†µåä¼španicï¼Œå¦åˆ™rangeå°†ä¼šæ°¸ä¹…é˜»å¡</p>]]></content>
    
    
    
    <tags>
      
      <tag>Goä¸“å®¶ç¼–ç¨‹</tag>
      
      <tag>Channel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è¯»Goä¸“å®¶ç¼–ç¨‹ã€‘ä¹‹Sliceç¯‡</title>
    <link href="/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BSlice%E7%AF%87/"/>
    <url>/2023/10/13/%E3%80%90%E8%AF%BBGo%E4%B8%93%E5%AE%B6%E7%BC%96%E7%A8%8B%E3%80%91%E4%B9%8BSlice%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<h2 id="Sliceçš„å®ç°åŸç†"><a href="#Sliceçš„å®ç°åŸç†" class="headerlink" title="Sliceçš„å®ç°åŸç†"></a>Sliceçš„å®ç°åŸç†</h2><p>Sliceä¾æ‰˜æ•°ç»„å®ç°ï¼Œåº•å±‚æ•°ç»„å¯¹ç”¨æˆ·å±è”½ï¼Œåº•å±‚æ•°ç»„åœ¨Capä¸è¶³æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰©å®¹ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„Slice</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> slice <span class="hljs-keyword">struct</span> &#123;<br>    array unsafe.Pointer<br>    <span class="hljs-built_in">len</span>   <span class="hljs-type">int</span><br>    <span class="hljs-built_in">cap</span>   <span class="hljs-type">int</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä»æ•°æ®ç»“æ„çœ‹Sliceå¾ˆæ¸…æ™°, arrayæŒ‡é’ˆæŒ‡å‘åº•å±‚æ•°ç»„ï¼Œlenè¡¨ç¤ºåˆ‡ç‰‡é•¿åº¦ï¼Œcapè¡¨ç¤ºåº•å±‚æ•°ç»„å®¹é‡</p><h2 id="ä½¿ç”¨Arrayåˆ›å»ºSlice"><a href="#ä½¿ç”¨Arrayåˆ›å»ºSlice" class="headerlink" title="ä½¿ç”¨Arrayåˆ›å»ºSlice"></a>ä½¿ç”¨Arrayåˆ›å»ºSlice</h2><p>å½“æˆ‘ä»¬ç”¨Arrayåˆ›å»ºSliceæ—¶ï¼Œæ‰€åˆ›å»ºçš„Sliceä¼šå’ŒåŸæ•°ç»„å…¬ç”¨ä¸€éƒ¨åˆ†å†…å­˜</p><p>eg: slice:&#x3D;<code>array[5:7]</code> </p><p><img src="https://static.sitestack.cn/projects/GoExpertProgramming/chapter01/images/slice-02-create_slice_from_array.png"></p><p><strong>æ³¨æ„</strong>ï¼šåˆ›å»ºçš„Sliceçš„capä¸ºarrayçš„5é‚£ä¸ªä½ç½®å¼€å§‹åˆ°arrayçš„æœ«å°¾ä½ç½®ï¼ˆæ‰€ä»¥ï¼Œsliceçš„capä¸º9-5+1ï¼‰</p><h2 id="Sliceçš„æ‰©å®¹"><a href="#Sliceçš„æ‰©å®¹" class="headerlink" title="Sliceçš„æ‰©å®¹"></a>Sliceçš„æ‰©å®¹</h2><p>å½“Capå°äºLenæ—¶ï¼Œå…ƒç´ æ’ä¸è¿›å»äº†ï¼Œæ‰€ä»¥å¼€å§‹æ‰©å®¹</p><h3 id="æ‰©å®¹ç­–ç•¥"><a href="#æ‰©å®¹ç­–ç•¥" class="headerlink" title="æ‰©å®¹ç­–ç•¥"></a>æ‰©å®¹ç­–ç•¥</h3><ul><li>å¦‚æœåŸSliceå®¹é‡å°äº1024ï¼Œåˆ™æ–°Sliceå®¹é‡å°†æ‰©å¤§ä¸ºåŸæ¥çš„2å€ï¼›</li><li>å¦‚æœåŸSliceå®¹é‡å¤§äºç­‰äº1024ï¼Œåˆ™æ–°Sliceå®¹é‡å°†æ‰©å¤§ä¸ºåŸæ¥çš„1.25å€ï¼›</li></ul><h3 id="append-çš„è¿‡ç¨‹"><a href="#append-çš„è¿‡ç¨‹" class="headerlink" title="append çš„è¿‡ç¨‹"></a>append çš„è¿‡ç¨‹</h3><ul><li>å‡å¦‚Sliceå®¹é‡å¤Ÿç”¨ï¼Œåˆ™å°†æ–°å…ƒç´ è¿½åŠ è¿›å»ï¼ŒSlice.len++ï¼Œè¿”å›åŸSlice</li><li>åŸSliceå®¹é‡ä¸å¤Ÿï¼Œåˆ™å°†Sliceå…ˆæ‰©å®¹ï¼Œæ‰©å®¹åå¾—åˆ°æ–°Slice</li><li>å°†æ–°å…ƒç´ è¿½åŠ è¿›æ–°Sliceï¼ŒSlice.len++ï¼Œè¿”å›æ–°çš„Sliceã€‚</li></ul><h2 id="Slice-Copy"><a href="#Slice-Copy" class="headerlink" title="Slice Copy"></a>Slice Copy</h2><p>Go æ ‡å‡†åº“æä¾›äº† <code>copy</code> å‡½æ•°ï¼Œå¯ä»¥ç”¨äºå°†ä¸€ä¸ªåˆ‡ç‰‡çš„å†…å®¹å¤åˆ¶åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡ã€‚è¿™ç§æ–¹æ³•å…è®¸ä½ ç²¾ç¡®æ§åˆ¶å¤åˆ¶çš„å…ƒç´ æ•°é‡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">originalSlice := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br>copiedSlice := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º3çš„ç›®æ ‡åˆ‡ç‰‡</span><br><span class="hljs-built_in">copy</span>(copiedSlice, originalSlice[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>]) <span class="hljs-comment">// å¤åˆ¶ originalSlice ä¸­çš„ç¬¬2åˆ°ç¬¬4ä¸ªå…ƒç´ åˆ° copiedSlice</span><br></code></pre></td></tr></table></figure><h2 id="ä¸€ç§ä¸å¤ªå¸¸è§çš„sliceç”¨æ³•"><a href="#ä¸€ç§ä¸å¤ªå¸¸è§çš„sliceç”¨æ³•" class="headerlink" title="ä¸€ç§ä¸å¤ªå¸¸è§çš„sliceç”¨æ³•"></a>ä¸€ç§ä¸å¤ªå¸¸è§çš„sliceç”¨æ³•</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">sliceA := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">//length = 5; capacity = 10</span><br>sliceB := sliceA[<span class="hljs-number">0</span>:<span class="hljs-number">5</span>]         <span class="hljs-comment">//length = 5; capacity = 10</span><br>sliceC := sliceA[<span class="hljs-number">0</span>:<span class="hljs-number">5</span>:<span class="hljs-number">5</span>]       <span class="hljs-comment">//length = 5; capacity = 5</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Slice</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SortåŒ…çš„ä½¿ç”¨</title>
    <link href="/2023/09/23/Sort%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/09/23/Sort%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="SortåŒ…çš„ç®€ä»‹"><a href="#SortåŒ…çš„ç®€ä»‹" class="headerlink" title="SortåŒ…çš„ç®€ä»‹"></a>SortåŒ…çš„ç®€ä»‹</h2><p>Goè¯­è¨€æ ‡å‡†åº“sortåŒ…ä¸­å®ç°äº†ï¼“ç§åŸºæœ¬çš„æ’åºç®—æ³•ï¼š<strong>æ’å…¥æ’åº</strong>ã€<strong>å¿«æ’å’Œå †æ’åº</strong>ã€‚å’Œå…¶ä»–è¯­è¨€ä¸­ä¸€æ ·ï¼Œ è¿™ä¸‰ç§æ–¹å¼éƒ½æ˜¯ä¸å…¬å¼€çš„ï¼Œä»–ä»¬åªåœ¨sortåŒ…å†…éƒ¨ä½¿ç”¨ã€‚æ‰€ä»¥ç”¨æˆ·åœ¨ä½¿ç”¨sortåŒ…è¿›è¡Œæ’åºæ—¶æ— éœ€è€ƒè™‘ä½¿ ç”¨é‚£ç§æ’åºæ–¹å¼ï¼Œsort.Interfaceå®šä¹‰çš„ä¸‰ä¸ªæ–¹æ³•ï¼šè·å–æ•°æ®é›†åˆé•¿åº¦çš„Len()æ–¹æ³•ã€æ¯”è¾ƒä¸¤ä¸ªå…ƒç´  å¤§å°çš„Less()æ–¹æ³•å’Œäº¤æ¢ä¸¤ä¸ªå…ƒç´ ä½ç½®çš„Swap()æ–¹æ³•ï¼Œå°±å¯ä»¥é¡ºåˆ©å¯¹æ•°æ®é›†åˆè¿›è¡Œæ’åºã€‚sortåŒ…ä¼š æ ¹æ®å®é™…æ•°æ®<strong>è‡ªåŠ¨</strong>é€‰æ‹©é«˜æ•ˆçš„æ’åºç®—æ³•ã€‚</p><h2 id="SortåŒ…çš„ä½¿ç”¨"><a href="#SortåŒ…çš„ä½¿ç”¨" class="headerlink" title="SortåŒ…çš„ä½¿ç”¨"></a>SortåŒ…çš„ä½¿ç”¨</h2><blockquote><p>Sortä¸­æœ‰ç»™åŸºæœ¬æ•°æ®ç±»å‹å¦‚ int float å’Œstringè‡ªå®šä¹‰sort</p></blockquote><h3 id="int-çš„æ’åº"><a href="#int-çš„æ’åº" class="headerlink" title="[]int çš„æ’åº"></a>[]int çš„æ’åº</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go">arr := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>&#125;<br>sort.Ints(arr)<br><br>sort.Sort(sort.IntSlice(arr))<br><span class="hljs-comment">//é»˜è®¤ç»“æœéƒ½æ˜¯å‡åºæ’åˆ—ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¯¹ä¸€ä¸ª sortable object è¿›è¡Œé€†åºæ’åºï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªtypeã€‚ä½† sort.Reverse å¸®ä½ çœæ‰äº†è¿™äº›ä»£ç ã€‚</span><br>sort.Sort(sort.Reverse(sort.IntSlice(arr)))<br></code></pre></td></tr></table></figure><h3 id="stringçš„æ’åº"><a href="#stringçš„æ’åº" class="headerlink" title="[]stringçš„æ’åº"></a>[]stringçš„æ’åº</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go">ss := []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-string">&quot;ff&quot;</span>, <span class="hljs-string">&quot;-1&quot;</span>&#125;<br>sort.Strings(ss)<br><br>sort.Sort(sort.StringSlice(ss))<br><br>sort.Sort(sort.Reverse(sort.StringSlice(ss)))<br></code></pre></td></tr></table></figure><h3 id="float64-çš„æ’åº"><a href="#float64-çš„æ’åº" class="headerlink" title="[]float64 çš„æ’åº"></a>[]float64 çš„æ’åº</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">fs := []<span class="hljs-type">float64</span>&#123;<span class="hljs-number">1.3</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">-90.2</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">0</span>&#125;<br>sort.Float64s(fs)<br><span class="hljs-comment">//æŸ¥çœ‹æ˜¯å¦å·²ç»æ’åºæˆåŠŸï¼ˆä»å°åˆ°å¤§ï¼‰</span><br>sort.IsSorted(sort.Float64Slice(fs))<br><br>sort.Sort(sort.Reverse(sort.Float64Slice(fs)))<br><br></code></pre></td></tr></table></figure><h3 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h3><p>goè¯­è¨€ä¸­çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ç”¨æ¥æœç´¢æŒ‡å®š<strong>å·²ç»æ’å®Œåº</strong>çš„åˆ‡ç‰‡[0:n]ä¸­å€¼ä¸ºValueçš„å…ƒç´ çš„<strong>ä¸‹æ ‡</strong>ï¼Œå¦‚æœæœ‰å¤šä¸ªç›¸åŒValueçš„å…ƒç´ ï¼Œåˆ™è¿”å›<strong>ç¬¬ä¸€ä¸ª</strong>å€¼ä¸ºValueçš„å…ƒç´ çš„ä¸‹æ ‡ï¼›å¦‚æœä¸å­˜å€¼ä¸ºValueçš„å…ƒç´ ï¼Œåˆ™è¿”å›åˆ‡ç‰‡çš„é•¿åº¦ <strong>n</strong> </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go">nums := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>&#125;<br><br><span class="hljs-comment">// è¦æŸ¥æ‰¾çš„å€¼</span><br>target := <span class="hljs-number">7</span><br><br><span class="hljs-comment">// ä½¿ç”¨Searchå‡½æ•°æŸ¥æ‰¾å€¼çš„ç´¢å¼•</span><br>index := sort.Search(<span class="hljs-built_in">len</span>(nums), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> nums[i] &gt; target<br>&#125;)<br><br><span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°</span><br><span class="hljs-keyword">if</span> index &lt; <span class="hljs-built_in">len</span>(nums) &amp;&amp; nums[index] == target &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d æ‰¾åˆ°åœ¨ç´¢å¼• %d å¤„\n&quot;</span>, target, index)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d æœªæ‰¾åˆ°\n&quot;</span>, target)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ’åº"><a href="#è‡ªå®šä¹‰æ’åº" class="headerlink" title="è‡ªå®šä¹‰æ’åº"></a>è‡ªå®šä¹‰æ’åº</h3><blockquote><p>è‡ªå®šä¹‰sort.Interfaceæ’åº ,æ­¤æ—¶æˆ‘ä»¬ éœ€è¦é‡å†™ Swap Less Len æ–¹æ³•</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sort&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Peak <span class="hljs-keyword">struct</span> &#123;<br>Name   <span class="hljs-type">string</span><br>Height <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-keyword">type</span> Peaks []Peak<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Len() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(ps)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Less(i, j <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &lt; ps[j].Height<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Swap(i, j <span class="hljs-type">int</span>) &#123;<br>ps[i], ps[j] = ps[j], ps[i]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ps := Peaks&#123;&#123;<br>Name:   <span class="hljs-string">&quot;mountain-1&quot;</span>,<br>Height: <span class="hljs-number">1</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-2&quot;</span>,<br>Height: <span class="hljs-number">2</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-10&quot;</span>,<br>Height: <span class="hljs-number">-100</span>,<br>&#125;&#125;<br>fmt.Println(<span class="hljs-string">&quot;before &quot;</span>, ps)<br>sort.Sort(ps)<br>fmt.Println(<span class="hljs-string">&quot;after &quot;</span>, ps)<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨ sort.Slice</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sort&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Peak <span class="hljs-keyword">struct</span> &#123;<br>Name   <span class="hljs-type">string</span><br>Height <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-keyword">type</span> Peaks []Peak<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Len() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(ps)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Less(i, j <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &lt; ps[j].Height<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ps Peaks)</span></span> Swap(i, j <span class="hljs-type">int</span>) &#123;<br>ps[i], ps[j] = ps[j], ps[i]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ps := Peaks&#123;&#123;<br>Name:   <span class="hljs-string">&quot;mountain-1&quot;</span>,<br>Height: <span class="hljs-number">1</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-2&quot;</span>,<br>Height: <span class="hljs-number">2</span>,<br>&#125;, &#123;<br>Name:   <span class="hljs-string">&quot;mountain-10&quot;</span>,<br>Height: <span class="hljs-number">-100</span>,<br>&#125;&#125;<br>fmt.Println(<span class="hljs-string">&quot;Before &quot;</span>, ps)<br>sort.Slice(ps, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i, j <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &lt;= ps[j].Height<br>&#125;)<br>fmt.Println(<span class="hljs-string">&quot;After &quot;</span>, ps)<br><br>fmt.Println(<span class="hljs-string">&quot;----------------&quot;</span>)<br>sort.Slice(ps, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i, j <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> ps[i].Height &gt;= ps[j].Height<br>&#125;)<br>fmt.Println(<span class="hljs-string">&quot;after reverse &quot;</span>, ps)<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>-golang -sortåŒ…çš„ä½¿ç”¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Golangä¸­çš„GC</title>
    <link href="/2023/09/22/Golang%E4%B8%AD%E7%9A%84GC/"/>
    <url>/2023/09/22/Golang%E4%B8%AD%E7%9A%84GC/</url>
    
    <content type="html"><![CDATA[<p>ä¸‰è‰²æ ‡è®°</p><p>æ··åˆå†™å±éšœ</p><p>Mark Sweepçš„ç¼ºç‚¹</p><ul><li>STWï¼Œstop the worldï¼›è®©ç¨‹åºæš‚åœï¼Œç¨‹åºå‡ºç°å¡é¡¿ **(é‡è¦é—®é¢˜)**ï¼›</li><li>æ ‡è®°éœ€è¦æ‰«ææ•´ä¸ªheapï¼›</li><li>æ¸…é™¤æ•°æ®ä¼šäº§ç”Ÿheapç¢ç‰‡ã€‚</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ã€2023å¹´ç›®æ ‡ã€‘</title>
    <link href="/2023/09/17/%E3%80%902023%E5%B9%B4%E7%9B%AE%E6%A0%87%E3%80%91/"/>
    <url>/2023/09/17/%E3%80%902023%E5%B9%B4%E7%9B%AE%E6%A0%87%E3%80%91/</url>
    
    <content type="html"><![CDATA[<ul><li><input disabled="" type="checkbox"> leetcode 400+</li><li><input disabled="" type="checkbox"> é¡¹ç›® 3+ ä¸€ä¸ªå•ä½“web ä¸€ä¸ªå¾®æœåŠ¡web  ä¸€ä¸ªè½®å­</li><li><input disabled="" type="checkbox"> è·‘é‡ 2000+</li><li><input checked="" disabled="" type="checkbox"> é˜…è¯»ä¹¦ç± 5+</li><li><input disabled="" type="checkbox"> å†™blog 20+</li><li><input disabled="" type="checkbox"> å®ŒæˆåŸºæœ¬çš„è®¡ç®—æœºå››å¤§ä»¶çš„å¤ä¹ </li><li><input disabled="" type="checkbox"> æ‰¾ä¸€ä¸ªå¥³æœ‹å‹</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>golangä»£ç ç§¯ç´¯</title>
    <link href="/2023/09/13/golang%E4%BB%A3%E7%A0%81%E7%A7%AF%E7%B4%AF/"/>
    <url>/2023/09/13/golang%E4%BB%A3%E7%A0%81%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h3 id="è¿æ¥å­—ç¬¦ä¸²"><a href="#è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="è¿æ¥å­—ç¬¦ä¸²"></a>è¿æ¥å­—ç¬¦ä¸²</h3><ul><li><p>str1+str2</p></li><li><p>fmt.Sprintf(â€œ%s%sâ€,str1,str2)</p></li><li><p>strings.Builder</p></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go">str1 := <span class="hljs-string">&quot;str1&quot;</span><br>str2 := <span class="hljs-string">&quot;str2&quot;</span><br><br>fmt.Println(str1 + str2)<br><br>fmt.Println(fmt.Sprintf(<span class="hljs-string">&quot;%s%s&quot;</span>, str1, str2))<br><br><span class="hljs-keyword">var</span> stringbuilder strings.Builder<br>stringbuilder.WriteString(str1)<br><br>stringbuilder.WriteString(str2)<br><br>fmt.Println(stringbuilder.String())<br></code></pre></td></tr></table></figure><h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">type</span> Stack <span class="hljs-keyword">struct</span> &#123;<br>items []<span class="hljs-keyword">interface</span>&#123;&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Push(item <span class="hljs-keyword">interface</span>&#123;&#125;) &#123;<br>s.items = <span class="hljs-built_in">append</span>(s.items, item)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Pop() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(s.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br>item := s.items[<span class="hljs-built_in">len</span>(s.items)<span class="hljs-number">-1</span>]<br>s.items = s.items[:<span class="hljs-built_in">len</span>(s.items)<span class="hljs-number">-1</span>]<br><span class="hljs-keyword">return</span> item<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Peek() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(s.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><span class="hljs-keyword">return</span> s.items[<span class="hljs-built_in">len</span>(s.items)<span class="hljs-number">-1</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> IsEmpty() <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(s.items) == <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *Stack)</span></span> Size() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(s.items)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>stack := Stack&#123;&#125;<br><br>stack.Push(<span class="hljs-number">1</span>)<br>stack.Push(<span class="hljs-number">2</span>)<br>stack.Push(<span class="hljs-number">3</span>)<br><br>fmt.Println(<span class="hljs-string">&quot;Stack:&quot;</span>, stack.items)<br>fmt.Println(<span class="hljs-string">&quot;Top:&quot;</span>, stack.Peek())<br>fmt.Println(<span class="hljs-string">&quot;Pop:&quot;</span>, stack.Pop())<br>fmt.Println(<span class="hljs-string">&quot;Stack:&quot;</span>, stack.items)<br>fmt.Println(<span class="hljs-string">&quot;Is Empty?&quot;</span>, stack.IsEmpty())<br>fmt.Println(<span class="hljs-string">&quot;Size:&quot;</span>, stack.Size())<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">type</span> Queue <span class="hljs-keyword">struct</span> &#123;<br>items []<span class="hljs-keyword">interface</span>&#123;&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Enqueue(item <span class="hljs-keyword">interface</span>&#123;&#125;) &#123;<br>q.items = <span class="hljs-built_in">append</span>(q.items, item)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Dequeue() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(q.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br>front := q.items[<span class="hljs-number">0</span>]<br>q.items = q.items[<span class="hljs-number">1</span>:]<br><span class="hljs-keyword">return</span> front<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Front() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(q.items) == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><span class="hljs-keyword">return</span> q.items[<span class="hljs-number">0</span>]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> IsEmpty() <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(q.items) == <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span></span> Size() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(q.items)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>queue := Queue&#123;&#125;<br><br>queue.Enqueue(<span class="hljs-number">1</span>)<br>queue.Enqueue(<span class="hljs-number">2</span>)<br>queue.Enqueue(<span class="hljs-number">3</span>)<br><br>fmt.Println(<span class="hljs-string">&quot;Queue:&quot;</span>, queue.items)<br>fmt.Println(<span class="hljs-string">&quot;Front:&quot;</span>, queue.Front())<br>fmt.Println(<span class="hljs-string">&quot;Dequeue:&quot;</span>, queue.Dequeue())<br>fmt.Println(<span class="hljs-string">&quot;Queue:&quot;</span>, queue.items)<br>fmt.Println(<span class="hljs-string">&quot;Is Empty?&quot;</span>, queue.IsEmpty())<br>fmt.Println(<span class="hljs-string">&quot;Size:&quot;</span>, queue.Size())<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Priority-Queue"><a href="#Priority-Queue" class="headerlink" title="Priority Queue"></a>Priority Queue</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;container/heap&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Item <span class="hljs-keyword">struct</span> &#123;<br>value    <span class="hljs-type">string</span><br>priority <span class="hljs-type">int</span><br>&#125;<br><span class="hljs-keyword">type</span> PriorityQueue []*Item<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Len() <span class="hljs-type">int</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(pq)<br>&#125;<br><span class="hljs-comment">// &lt; è¡¨ç¤ºæœ€å°å † è¿”å›å †é¡¶ï¼Œå³priorityæœ€å°çš„å€¼</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Less(i, j <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> pq[i].priority &lt; pq[j].priority<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq PriorityQueue)</span></span> Swap(i, j <span class="hljs-type">int</span>) &#123;<br>pq[i], pq[j] = pq[j], pq[i]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq *PriorityQueue)</span></span> Push(x <span class="hljs-keyword">interface</span>&#123;&#125;) &#123;<br>item := x.(*Item)<br>*pq = <span class="hljs-built_in">append</span>(*pq, item)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(pq *PriorityQueue)</span></span> Pop() <span class="hljs-keyword">interface</span>&#123;&#125; &#123;<br>old := *pq<br>n := <span class="hljs-built_in">len</span>(old)<br>item := old[n<span class="hljs-number">-1</span>]<br>*pq = old[<span class="hljs-number">0</span> : n<span class="hljs-number">-1</span>]<br><span class="hljs-keyword">return</span> item<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>pq := <span class="hljs-built_in">make</span>(PriorityQueue, <span class="hljs-number">0</span>)<br><br>heap.Init(&amp;pq)<br>items := []*Item&#123;<br>&#123;<br>value:    <span class="hljs-string">&quot;C&quot;</span>,<br>priority: <span class="hljs-number">3</span>,<br>&#125;,<br>&#123;<br>value:    <span class="hljs-string">&quot;A&quot;</span>,<br>priority: <span class="hljs-number">1</span>,<br>&#125;,<br>&#123;<br>value:    <span class="hljs-string">&quot;B&quot;</span>,<br>priority: <span class="hljs-number">2</span>,<br>&#125;,<br>&#125;<br><span class="hljs-keyword">for</span> _, item := <span class="hljs-keyword">range</span> items &#123;<br>heap.Push(&amp;pq, item)<br>&#125;<br><br><span class="hljs-keyword">for</span> pq.Len() &gt; <span class="hljs-number">0</span> &#123;<br>item := heap.Pop(&amp;pq).(*Item)<br>fmt.Printf(<span class="hljs-string">&quot;%s( Priority:%d)&quot;</span>, item.value, item.priority)<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="å±‚æ¬¡éå†"><a href="#å±‚æ¬¡éå†" class="headerlink" title="å±‚æ¬¡éå†"></a>å±‚æ¬¡éå†</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">/**<br> * Definition for a binary tree node.<br> * type TreeNode struct &#123;<br> *     Val int<br> *     Left *TreeNode<br> *     Right *TreeNode<br> * &#125;<br> */<br></code></pre></td></tr></table></figure><h4 id="version-1"><a href="#version-1" class="headerlink" title="version 1"></a>version 1</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(root *TreeNode)</span></span>(res []<span class="hljs-type">int</span>)&#123;<br>    <span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    cur:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>    cur=<span class="hljs-built_in">append</span>(cur,root)<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(cur)&gt;<span class="hljs-number">0</span>&#123;<br>        nodes:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">for</span> _,node:=<span class="hljs-keyword">range</span> cur&#123;<br>            res=<span class="hljs-built_in">append</span>(res,node.Val)<br>            <span class="hljs-keyword">if</span> node.Left!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Left)<br>            &#125;<br>            <span class="hljs-keyword">if</span> node.Right!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Right)<br>            &#125;<br>        &#125;<br>        cur=nodes<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="version-2"><a href="#version-2" class="headerlink" title="version 2"></a>version 2</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(root *TreeNode)</span></span>(res [][]<span class="hljs-type">int</span>)&#123;<br>    <span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    &#125;<br>    cur:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>    <span class="hljs-comment">//å°†é¦–å…ƒèŠ‚ç‚¹æ’å…¥</span><br>    cur=<span class="hljs-built_in">append</span>(cur,root)<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(cur)&gt;<span class="hljs-number">0</span>&#123;<br>        tempRes:=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-number">0</span>)<br>        nodes:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">for</span> _,node:=<span class="hljs-keyword">range</span> cur&#123;<br>            tempRes=<span class="hljs-built_in">append</span>(tempRes,node.Val)<br>            <span class="hljs-keyword">if</span> node.Left!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Left)<br>            &#125;<br>            <span class="hljs-keyword">if</span> node.Right!=<span class="hljs-literal">nil</span>&#123;<br>                nodes=<span class="hljs-built_in">append</span>(nodes,node.Right)<br>            &#125;<br>        &#125;<br>        res=<span class="hljs-built_in">append</span>(res,tempRes)<br>        cur=nodes<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="version-3"><a href="#version-3" class="headerlink" title="version 3"></a>version 3</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(root *TreeNode)</span></span> (res [][]<span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> [][]<span class="hljs-type">int</span>&#123;&#125;<br>&#125;<br>cur := <span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>cur=<span class="hljs-built_in">append</span>(cur,root)<br>cnt := <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(cur) &gt; <span class="hljs-number">0</span> &#123;<br>arr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>)<br>nodes := <span class="hljs-built_in">make</span>([]*TreeNode, <span class="hljs-number">0</span>)<br><span class="hljs-keyword">for</span> _, node := <span class="hljs-keyword">range</span> cur &#123;<br><span class="hljs-keyword">if</span> node.Left != <span class="hljs-literal">nil</span> &#123;<br>nodes = <span class="hljs-built_in">append</span>(nodes, node.Left)<br>&#125;<br><span class="hljs-keyword">if</span> node.Right != <span class="hljs-literal">nil</span> &#123;<br>nodes = <span class="hljs-built_in">append</span>(nodes, node.Right)<br>&#125;<br>arr = <span class="hljs-built_in">append</span>(arr, node.Val)<br>&#125;<br><span class="hljs-keyword">if</span> cnt==<span class="hljs-number">-1</span>&#123;<br><span class="hljs-keyword">for</span> i,Len:=<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(arr);i&lt;<span class="hljs-built_in">len</span>(arr)/<span class="hljs-number">2</span>;i++&#123;<br>arr[Len<span class="hljs-number">-1</span>-i],arr[i]=arr[i],arr[Len<span class="hljs-number">-1</span>-i]<br>&#125;<br>&#125;<br>cnt*=<span class="hljs-number">-1</span><br>res=<span class="hljs-built_in">append</span>(res,arr)<br>cur = nodes<br>&#125;<br><span class="hljs-keyword">return</span> res<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ£€æŸ¥æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘"><a href="#æ£€æŸ¥æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘" class="headerlink" title="æ£€æŸ¥æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘"></a>æ£€æŸ¥æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘</h4><h3 id="äºŒå‰æ ‘çš„ä¸­åºéå†"><a href="#äºŒå‰æ ‘çš„ä¸­åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„ä¸­åºéå†"></a>äºŒå‰æ ‘çš„ä¸­åºéå†</h3><h4 id="version-1-é€’å½’"><a href="#version-1-é€’å½’" class="headerlink" title="version 1 é€’å½’"></a>version 1 é€’å½’</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inorderTraversal</span><span class="hljs-params">(root *TreeNode)</span></span> (res []<span class="hljs-type">int</span>) &#123;<br><span class="hljs-comment">//è¾¹ç•Œæ¡ä»¶</span><br><span class="hljs-comment">//è‡ªå®šä¹‰å‡½æ•°</span><br>    re := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span> &#123;&#125;<br>re = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span> &#123;<br><span class="hljs-keyword">if</span> root == <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-keyword">if</span> root.Left != <span class="hljs-literal">nil</span> &#123;<br>re(root.Left)<br>&#125;<br>res = <span class="hljs-built_in">append</span>(res, root.Val)<br><span class="hljs-keyword">if</span> root.Right != <span class="hljs-literal">nil</span> &#123;<br>re(root.Right)<br>&#125;<br>&#125;<br>re(root)<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="version-2-è¿­ä»£"><a href="#version-2-è¿­ä»£" class="headerlink" title="version 2 è¿­ä»£"></a>version 2 è¿­ä»£</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isValidBST</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">bool</span>&#123;<br>    stack:=<span class="hljs-built_in">make</span>([]*TreeNode,<span class="hljs-number">0</span>)<br>    inorder:=math.MinInt64<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(stack)&gt;<span class="hljs-number">0</span>||root!=<span class="hljs-literal">nil</span>&#123;<br>        <span class="hljs-keyword">for</span> root!=<span class="hljs-literal">nil</span>&#123;<br>            stack=<span class="hljs-built_in">append</span>(stack,root)<br>            root=root.Left<br>        &#125;<br>        root=stack[<span class="hljs-built_in">len</span>(stack)<span class="hljs-number">-1</span>]<br>        stack=stack[:<span class="hljs-built_in">len</span>(stack)<span class="hljs-number">-1</span>]<br>        <span class="hljs-keyword">if</span> root.Val&lt;=inorder&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>        inorder=root.Val<br>        root=root.Right<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è®¡ç®—äºŒå‰æ ‘çš„æ·±åº¦"><a href="#è®¡ç®—äºŒå‰æ ‘çš„æ·±åº¦" class="headerlink" title="è®¡ç®—äºŒå‰æ ‘çš„æ·±åº¦"></a>è®¡ç®—äºŒå‰æ ‘çš„æ·±åº¦</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">if</span> a&gt;b&#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125;<br>    <span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxDepth</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span>&#123;<br>    <span class="hljs-keyword">var</span> dfs <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span><br>    dfs=<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span>&#123;<br>        <span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> max(dfs(root.Left),dfs(root.Right))+<span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> dfs(root)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¹³è¡¡äºŒå‰æ ‘çš„åˆ¤æ–­"><a href="#å¹³è¡¡äºŒå‰æ ‘çš„åˆ¤æ–­" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘çš„åˆ¤æ–­"></a>å¹³è¡¡äºŒå‰æ ‘çš„åˆ¤æ–­</h3><p>å¹³è¡¡äºŒå‰æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡2</p><p>æ€è·¯ï¼šåœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹æ±‚å¾—å…¶å·¦å³å­æ ‘çš„é«˜åº¦ï¼Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆå¹³è¡¡äºŒå‰æ ‘çš„è¦æ±‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> a&gt;b&#123;<br><span class="hljs-keyword">return</span> a<br>&#125;<br><span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getDepth</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">return</span> max(getDepth(root.Left),getDepth(root.Right))+<span class="hljs-number">1</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">abs</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> a&gt;b&#123;<br><span class="hljs-keyword">return</span> a-b<br>&#125;<br><span class="hljs-keyword">return</span> b-a<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isBalanced</span><span class="hljs-params">(root *TreeNode)</span></span><span class="hljs-type">bool</span>&#123;<br><span class="hljs-keyword">if</span> root==<span class="hljs-literal">nil</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><span class="hljs-keyword">return</span> isBalanced(root.Left)&amp;&amp;<br>isBalanced(root.Right)&amp;&amp;abs(getDepth(root.Left),getDepth(root.Right))&lt;<span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨"><a href="#äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨" class="headerlink" title="äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨"></a>äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨</h3><p>è¦æ±‚ï¼šä¸åˆ›å»ºä»»ä½•æ–°çš„èŠ‚ç‚¹ï¼Œåªèƒ½è°ƒæ•´æ ‘ä¸­èŠ‚ç‚¹æŒ‡é’ˆçš„æŒ‡å‘,æœ€ç»ˆå½¢æˆä¸€ä¸ªæœ‰åºçš„åŒå‘é“¾è¡¨ï¼Œè¿”å›å¤´ç»“ç‚¹</p><p>æ€è·¯ï¼šå› ä¸ºç”¨ä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªä»å°åˆ°å¤§çš„æœ‰åºç»“æœï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸­åºéå†çš„ç‰¹æ€§ï¼Œåœ¨å…¶ä¸­æŠŠèŠ‚ç‚¹ä¸èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œæœ€ç»ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæœ‰åºåŒå‘é“¾è¡¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    Node* head=<span class="hljs-literal">nullptr</span>;<br>    Node *prev=<span class="hljs-literal">nullptr</span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(Node* cur)</span></span>&#123;<br>       <span class="hljs-keyword">if</span>(cur==<span class="hljs-literal">NULL</span>)&#123;<br>           <span class="hljs-keyword">return</span> ;<br>       &#125;<br>        <span class="hljs-built_in">dfs</span>(cur-&gt;left);<br>        <span class="hljs-comment">//æ‰¾åˆ°treeä¸­æœ€å°å€¼</span><br>        <span class="hljs-keyword">if</span> (head==<span class="hljs-literal">NULL</span>)&#123;<br>            head=cur;<br>            prev=cur;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">//æ‰¾åˆ°è¾ƒå°å€¼</span><br>            prev-&gt;right=cur;<br>            cur-&gt;left=prev;<br>            prev=cur;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(cur-&gt;right);<br>    &#125;<br>    <span class="hljs-function">Node* <span class="hljs-title">treeToDoublyList</span><span class="hljs-params">(Node* root)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (root==<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(root);<br>        <span class="hljs-comment">//åŒå‘é“¾è¡¨æ”¶å°¾ç›¸è¿</span><br>        prev-&gt;right=head;<br>        head-&gt;left=prev;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="é‡æ„äºŒå‰æ ‘"><a href="#é‡æ„äºŒå‰æ ‘" class="headerlink" title="é‡æ„äºŒå‰æ ‘"></a><strong>é‡æ„äºŒå‰æ ‘</strong></h3><p>æ ¹æ®å‰åºéå†å’Œä¸­åºéå†é‡æ„ å¾—åˆ°ååºéå†</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs go"><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">buildTree</span><span class="hljs-params">(pr []<span class="hljs-type">int</span>, in []<span class="hljs-type">int</span>)</span></span> (head *TreeNode) &#123;<br><span class="hljs-keyword">var</span> dfs <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pr []<span class="hljs-type">int</span>, in []<span class="hljs-type">int</span>, l0 <span class="hljs-type">int</span>, r0 <span class="hljs-type">int</span>, l1 <span class="hljs-type">int</span>, r1 <span class="hljs-type">int</span>)</span></span> *TreeNode<br><span class="hljs-comment">// ç”¨mapæ¥å¿«é€Ÿå¾—åˆ°ä¸­åºéå†ä¸­pr[l0]çš„ä½ç½®</span><br>    pos := <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">int</span>&#123;&#125;<br><span class="hljs-keyword">for</span> idx, v := <span class="hljs-keyword">range</span> in &#123;<br>pos[v] = idx<br>&#125;<br>dfs = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pr []<span class="hljs-type">int</span>, in []<span class="hljs-type">int</span>, l0 <span class="hljs-type">int</span>, r0 <span class="hljs-type">int</span>, l1 <span class="hljs-type">int</span>, r1 <span class="hljs-type">int</span>)</span></span> *TreeNode &#123;<br><span class="hljs-keyword">if</span> l0 &gt; r0 &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><br>root := &amp;TreeNode&#123;Val: pr[l0]&#125;<br>idx := pos[pr[l0]]<br>lsize := idx - l1<br><span class="hljs-comment">//rsize:=r1-idx</span><br><span class="hljs-comment">// [l0+1,lsize+l0] [lsize+l0+1,r0]</span><br><span class="hljs-comment">// [l1,idx-1] [addr+1,r1]</span><br><br>root.Left = dfs(pr, in, l0+<span class="hljs-number">1</span>, lsize+l0, l1, idx<span class="hljs-number">-1</span>)<br>root.Right = dfs(pr, in, lsize+l0+<span class="hljs-number">1</span>, r0, idx+<span class="hljs-number">1</span>, r1)<br><span class="hljs-keyword">return</span> root<br>&#125;<br><br><span class="hljs-keyword">return</span> dfs(pr, in, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(pr)<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(in)<span class="hljs-number">-1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒå‰æœç´¢æ ‘çš„ååºéå†"><a href="#äºŒå‰æœç´¢æ ‘çš„ååºéå†" class="headerlink" title="äºŒå‰æœç´¢æ ‘çš„ååºéå†"></a>äºŒå‰æœç´¢æ ‘çš„ååºéå†</h3><p>ååºéå†ä¸­çš„æœ€åä¸€ä¸ªç»“æœæ˜¯è¯¥éå†ç»“æœçš„æ ¹èŠ‚ç‚¹ï¼Œå¯ä»¥ä»å¤´éå† éå†ç»“æœï¼ŒæŸ¥çœ‹å°äºæ ¹èŠ‚ç‚¹çš„å…ƒç´ ï¼Œå†å¾€åéå†å¤§äºæ ¹èŠ‚ç‚¹çš„å…ƒç´ ï¼Œå¦‚æœå…¶ä¸­æœ‰æ¯”æ ¹èŠ‚ç‚¹å°çš„å…ƒç´ ï¼Œåˆ™æ­¤äºŒå‰æ ‘ä¸æ˜¯äºŒå‰æœç´¢æ ‘</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">verifyPostorder</span><span class="hljs-params">(postorder []<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">var</span> dfs <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arr []<span class="hljs-type">int</span>, l, r <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span><br><br>dfs = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arr []<span class="hljs-type">int</span>, l, r <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">if</span> r &lt;= l &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br>mid:=arr[r]<br><span class="hljs-keyword">var</span> p <span class="hljs-type">int</span>=l<br><span class="hljs-keyword">for</span> arr[p]&lt;mid&#123;<br>p++<br>&#125;<br><br><span class="hljs-keyword">var</span> idx <span class="hljs-type">int</span>=p<br><span class="hljs-keyword">for</span> arr[p]&gt;mid&#123;<br>p++<br>&#125;<br><span class="hljs-keyword">return</span> p==r&amp;&amp;dfs(arr,l,idx<span class="hljs-number">-1</span>)&amp;&amp;dfs(arr,idx,r<span class="hljs-number">-1</span>)<br>&#125;<br><span class="hljs-keyword">return</span> dfs(postorder, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(postorder)<span class="hljs-number">-1</span>)<br>&#125;   <br></code></pre></td></tr></table></figure><h3 id="lowerbitçš„æ±‚æ³•"><a href="#lowerbitçš„æ±‚æ³•" class="headerlink" title="lowerbitçš„æ±‚æ³•"></a>lowerbitçš„æ±‚æ³•</h3><p>lowerbit&#x3D;n&amp;(-n)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//å¿«é€Ÿæ±‚å¾—ä¸€ä¸ªæ•°åœ¨äºŒè¿›åˆ¶ä¸­æ¯ä¸€ä¸ª1æ‰€åœ¨ä½ç½®ä»£è¡¨çš„å€¼å¤§å°</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hammingWeight</span><span class="hljs-params">(num <span class="hljs-type">uint32</span>)</span></span> (cnt <span class="hljs-type">int</span>) &#123;<br><span class="hljs-keyword">for</span> num &gt; <span class="hljs-number">0</span> &#123;<br>lowbit := num &amp; (-num)<br>num -= lowbit<br>cnt++<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä½è¿ç®—ä¸“é¢˜"><a href="#ä½è¿ç®—ä¸“é¢˜" class="headerlink" title="ä½è¿ç®—ä¸“é¢˜"></a>ä½è¿ç®—ä¸“é¢˜</h2><h3 id="æŠ‘æˆ–çš„ç”¨æ³•"><a href="#æŠ‘æˆ–çš„ç”¨æ³•" class="headerlink" title="æŠ‘æˆ–çš„ç”¨æ³•"></a>æŠ‘æˆ–çš„ç”¨æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å…¶ä¸­æŠ‘æˆ–ç›¸å½“äºä¸€ä¸ªä¸ä¼šè¿›ä½çš„åŠ æ³•</span><br>1^1=0<br>0^1=1<br>0^0=0<br><br><span class="hljs-comment">#ä¸¤ä¸ªç›¸åŒçš„æ•°å‘æŠ‘æˆ–ï¼Œç»“æœä¸º0</span><br><span class="hljs-comment">#ä¸€ä¸ªæ•°ä¸0å‘æŠ‘æˆ–çš„ç»“æœæ˜¯åŸæ•°</span><br>a^a=0<br>0^a=a<br><br>a^b=c<br>c^a=b<br>b^c=a<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/description/">1442. å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//leetcode 1442</span><br><span class="hljs-comment">//</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">countTriplets</span><span class="hljs-params">(arr []<span class="hljs-type">int</span>)</span></span> (cnt <span class="hljs-type">int</span>) &#123;<br>n := <span class="hljs-built_in">len</span>(arr)<br>orres := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, n+<span class="hljs-number">1</span>)<br><br>orres[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> idx, v := <span class="hljs-keyword">range</span> arr &#123;<br>orres[idx+<span class="hljs-number">1</span>] = orres[idx] ^ v<br>&#125;<br><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= n; i++ &#123;<br><span class="hljs-keyword">for</span> j := i + <span class="hljs-number">1</span>; j &lt;=n &amp;&amp; i &lt; j; j++ &#123;<br><span class="hljs-keyword">if</span> orres[j]^orres[i<span class="hljs-number">-1</span>] == <span class="hljs-number">0</span> &#123;<br><span class="hljs-comment">//i j å¯ä»¥</span><br>cnt += j - i <br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/maximum-xor-of-two-numbers-in-an-array/">421. æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>æ„é€  å­—å…¸æ ‘ å¿«é€ŸçŸ¥æ™“æ•°ç»„ä¸­çš„å…¶ä»–æ•°å­—çš„æ¯ä¸€ä½çš„bitçš„å¤§å°ï¼Œåˆ©ç”¨è´ªå¿ƒï¼Œ1^0&#x3D;1</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs go"><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">max</span><span class="hljs-params">(a,b <span class="hljs-type">int</span>)</span></span><span class="hljs-type">int</span>&#123;<br><span class="hljs-keyword">if</span> a&gt;b&#123;<br><span class="hljs-keyword">return</span> a<br>&#125;<br><span class="hljs-keyword">return</span> b<br>&#125;<br><br><span class="hljs-keyword">const</span> heightbit=<span class="hljs-number">30</span><br><br><span class="hljs-keyword">type</span> trie <span class="hljs-keyword">struct</span> &#123;<br>left,right *trie<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *trie)</span></span> add(num <span class="hljs-type">int</span>)&#123;<br>cur:=t<br><span class="hljs-keyword">for</span> i:=heightbit;i&gt;=<span class="hljs-number">0</span>;i--&#123;<br>bit:=(num&gt;&gt;i)&amp;<span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> bit==<span class="hljs-number">0</span>&#123;<br><span class="hljs-keyword">if</span> cur.left==<span class="hljs-literal">nil</span>&#123;<br>cur.left=&amp;trie&#123;&#125;<br>                cur=cur.left<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>cur=cur.left<br>&#125;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span> cur.right==<span class="hljs-literal">nil</span>&#123;<br>cur.right=&amp;trie&#123;&#125;<br>                cur=cur.right<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>cur=cur.right<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *trie)</span></span>check(num <span class="hljs-type">int</span>)(res <span class="hljs-type">int</span>)&#123;<br>cur:=t<br><span class="hljs-keyword">for</span> i:=heightbit;i&gt;=<span class="hljs-number">0</span>;i--&#123;<br>b:=(num&gt;&gt;i)&amp;<span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> b==<span class="hljs-number">0</span>&#123;<br><span class="hljs-comment">//éœ€è¦1</span><br><span class="hljs-keyword">if</span> cur.right!=<span class="hljs-literal">nil</span>&#123;<br>res|=(<span class="hljs-number">1</span>&lt;&lt;i)<br>                cur=cur.right<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                cur=cur.left<br>            &#125;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-comment">//éœ€è¦0</span><br><span class="hljs-keyword">if</span> cur.left!=<span class="hljs-literal">nil</span>&#123;<br>res|=(<span class="hljs-number">1</span>&lt;&lt;i)<br>                cur=cur.left<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                cur=cur.right<br>            &#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findMaximumXOR</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>)</span></span> (x <span class="hljs-type">int</span>) &#123;<br>root := *&amp;trie&#123;&#125;<br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>;i&lt;<span class="hljs-built_in">len</span>(nums);i++&#123;<br>root.add(nums[i<span class="hljs-number">-1</span>])<br>x = max(x, root.check(nums[i]))<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ã€redisã€‘ZSetçš„ä½¿ç”¨</title>
    <link href="/2023/09/13/%E3%80%90redis%E3%80%91ZSet%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/09/13/%E3%80%90redis%E3%80%91ZSet%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="å‡†å¤‡åŠ¨ä½œ"><a href="#å‡†å¤‡åŠ¨ä½œ" class="headerlink" title="å‡†å¤‡åŠ¨ä½œ"></a>å‡†å¤‡åŠ¨ä½œ</h2><h3 id="å¯åŠ¨docker"><a href="#å¯åŠ¨docker" class="headerlink" title="å¯åŠ¨docker"></a>å¯åŠ¨docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 6379:6379 --name redis redis<br></code></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹dockeçŠ¶æ€"><a href="#æŸ¥çœ‹dockeçŠ¶æ€" class="headerlink" title="æŸ¥çœ‹dockeçŠ¶æ€"></a>æŸ¥çœ‹dockeçŠ¶æ€</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker ps<br></code></pre></td></tr></table></figure><h3 id="è¿›å…¥redis-cli"><a href="#è¿›å…¥redis-cli" class="headerlink" title="è¿›å…¥redis-cli"></a>è¿›å…¥redis-cli</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli<br></code></pre></td></tr></table></figure><h2 id="Zsetçš„åŸºæœ¬æŒ‡ä»¤é›†åˆ"><a href="#Zsetçš„åŸºæœ¬æŒ‡ä»¤é›†åˆ" class="headerlink" title="Zsetçš„åŸºæœ¬æŒ‡ä»¤é›†åˆ"></a>Zsetçš„åŸºæœ¬æŒ‡ä»¤é›†åˆ</h2><h3 id="ZADDæ·»åŠ å…ƒç´ -O-log-N"><a href="#ZADDæ·»åŠ å…ƒç´ -O-log-N" class="headerlink" title="ZADDæ·»åŠ å…ƒç´  O(log(N))"></a><strong>ZADD</strong>æ·»åŠ å…ƒç´  O(log(N))</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs redis">zadd myzset 1 &quot;1&quot;<br></code></pre></td></tr></table></figure><h3 id="ZREM-åˆ é™¤å…ƒç´ "><a href="#ZREM-åˆ é™¤å…ƒç´ " class="headerlink" title="ZREM åˆ é™¤å…ƒç´ "></a><strong>ZREM</strong> åˆ é™¤å…ƒç´ </h3><p>â€‹O(M*log(N)) with N being the number of elements in the sorted set and M the number of elements to be removed.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZREM myzset &quot;one&quot;<br></code></pre></td></tr></table></figure><h3 id="ZCARDæŸ¥çœ‹zsetçš„å…ƒç´ ä¸ªæ•°O-1ï¼‰"><a href="#ZCARDæŸ¥çœ‹zsetçš„å…ƒç´ ä¸ªæ•°O-1ï¼‰" class="headerlink" title="ZCARDæŸ¥çœ‹zsetçš„å…ƒç´ ä¸ªæ•°O(1ï¼‰"></a><strong>ZCARD</strong>æŸ¥çœ‹zsetçš„å…ƒç´ ä¸ªæ•°O(1ï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcard myzset <br></code></pre></td></tr></table></figure><h3 id="ZCOUNT-æŸ¥çœ‹zsetåŒºé—´çš„ä¸å…ƒç´ ä¸ªæ•°ï¼ˆé»˜è®¤ä¸ºå·¦é—­å³é—­ï¼‰O-log-N"><a href="#ZCOUNT-æŸ¥çœ‹zsetåŒºé—´çš„ä¸å…ƒç´ ä¸ªæ•°ï¼ˆé»˜è®¤ä¸ºå·¦é—­å³é—­ï¼‰O-log-N" class="headerlink" title="ZCOUNT æŸ¥çœ‹zsetåŒºé—´çš„ä¸å…ƒç´ ä¸ªæ•°ï¼ˆé»˜è®¤ä¸ºå·¦é—­å³é—­ï¼‰O(log(N))"></a><strong>ZCOUNT</strong> æŸ¥çœ‹zsetåŒºé—´çš„ä¸å…ƒç´ ä¸ªæ•°ï¼ˆé»˜è®¤ä¸ºå·¦é—­å³é—­ï¼‰O(log(N))</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcount myzset 1 3#æŸ¥çœ‹å¤§äºç­‰äº1å°äºç­‰äº3çš„<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcount myzset (1 3 #æŸ¥çœ‹å¤§äº1å°äºç­‰äº3çš„<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcount myzset -inf +inf <br></code></pre></td></tr></table></figure><h3 id="ZINCRBYç»™å…ƒç´ æ·»åŠ å€¼O-log-N"><a href="#ZINCRBYç»™å…ƒç´ æ·»åŠ å€¼O-log-N" class="headerlink" title="ZINCRBYç»™å…ƒç´ æ·»åŠ å€¼O(log(N)"></a><strong>ZINCRBY</strong>ç»™å…ƒç´ æ·»åŠ å€¼O(log(N)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZINCRBY myzset -10 &quot;one&quot;<br></code></pre></td></tr></table></figure><h3 id="ZRANK-O-log-N"><a href="#ZRANK-O-log-N" class="headerlink" title="ZRANK O(log(N))"></a>ZRANK O(log(N))</h3><ul><li><p>é”®å­˜åœ¨ï¼Œè¿”å›æ’åï¼ˆé»˜è®¤ä¸ºä»å°åˆ°å¤§æ’åºï¼‰ï¼Œæœ€å°çš„æ’åºåè¯ä¸ºï¼ˆ0ï¼‰</p></li><li><p>é”®ä¸å­˜åœ¨ï¼Œè¿”å›nil</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrank myzset &quot;one&quot;<br></code></pre></td></tr></table></figure></li></ul><h3 id="ZRANGEæŸ¥è¯¢åŒºé—´å€¼çš„å…ƒç´ O-log-N-M"><a href="#ZRANGEæŸ¥è¯¢åŒºé—´å€¼çš„å…ƒç´ O-log-N-M" class="headerlink" title="ZRANGEæŸ¥è¯¢åŒºé—´å€¼çš„å…ƒç´ O(log(N)+M)"></a><strong>ZRANGE</strong>æŸ¥è¯¢åŒºé—´å€¼çš„å…ƒç´ O(log(N)+M)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZRANGE myzset -10 100 WITHSOCRES<br></code></pre></td></tr></table></figure><h3 id="ZINTERSTORE"><a href="#ZINTERSTORE" class="headerlink" title="ZINTERSTORE"></a><strong>ZINTERSTORE</strong></h3><p>æœ‰åºé›†åˆï¼ˆSorted Setï¼‰çš„äº¤é›†å¹¶å°†ç»“æœå­˜å‚¨åˆ°æ–°æœ‰åºé›†åˆçš„å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX]<br></code></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>destination</code>ï¼šç›®æ ‡æœ‰åºé›†åˆçš„é”®åï¼Œç”¨äºå­˜å‚¨äº¤é›†ç»“æœã€‚</li><li><code>numkeys</code>ï¼šæŒ‡å®šå‚ä¸è®¡ç®—çš„æœ‰åºé›†åˆçš„æ•°é‡ã€‚</li><li><code>key [key ...]</code>ï¼šè¦å‚ä¸è®¡ç®—äº¤é›†çš„æœ‰åºé›†åˆçš„é”®ååˆ—è¡¨ã€‚</li><li><code>WEIGHTS weight [weight ...]</code>ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºæŒ‡å®šæ¯ä¸ªæœ‰åºé›†åˆçš„æƒé‡ï¼Œå¯ä»¥è°ƒæ•´æ¯ä¸ªæˆå‘˜åˆ†æ•°çš„æƒé‡ã€‚å¦‚æœä¸æŒ‡å®šæƒé‡ï¼Œåˆ™é»˜è®¤ä¸º 1ã€‚</li><li><code>AGGREGATE SUM|MIN|MAX</code>ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºæŒ‡å®šè®¡ç®—äº¤é›†æ—¶çš„èšåˆæ–¹å¼ï¼Œå¯ä»¥æ˜¯ SUMï¼ˆæ±‚å’Œï¼Œé»˜è®¤ï¼‰ã€MINï¼ˆæœ€å°å€¼ï¼‰æˆ– MAXï¼ˆæœ€å¤§å€¼ï¼‰ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ZINTERSTORE intersection_max 2 set1 set2 AGGREGATE MAX<br></code></pre></td></tr></table></figure><h3 id="ZRANGEBULEX"><a href="#ZRANGEBULEX" class="headerlink" title="ZRANGEBULEX"></a><strong>ZRANGEBULEX</strong></h3><ul><li><p>æŒ‰åºè¿”å›æŒ‡å®šæˆå‘˜åŒºé—´çš„æˆå‘˜</p></li><li><p>åŒºé—´æˆå‘˜çš„åˆ†æ•°å¿…é¡»ç›¸åŒ </p></li><li><p>ä¸è¦åœ¨åˆ†æ•°ä¸ä¸€è‡´çš„SortSeté›†åˆä¸­å»ä½¿ç”¨ ZRANGEBYLEX æŒ‡ä»¤,å› ä¸ºè·å–çš„ç»“æœå¹¶ä¸å‡†ç¡®ã€‚</p></li><li><p>å¯ä»¥ä½¿ç”¨ â€œ-â€œ å’Œ â€œ+â€ è¡¨ç¤ºå¾—åˆ†æœ€å°å€¼å’Œæœ€å¤§å€¼</p></li><li><p>æˆå‘˜å­—ç¬¦ä¸²ä½œä¸ºäºŒè¿›åˆ¶æ•°ç»„çš„å­—èŠ‚æ•°è¿›è¡Œæ¯”è¾ƒã€‚é»˜è®¤æ˜¯ä»¥ASCIIå­—ç¬¦é›†çš„é¡ºåºè¿›è¡Œæ’åˆ—ã€‚</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">zadd zset 0 a 0 aa 0 abc 0 apple 0 b 0 c 0 d 0 d1 0 dd 0 dobble 0 z 0 z1<br>ZRANGEBYLEX zset - +<br><br>ZRANGEBYLEX zset - + limit 0 3  # å…¶ä¸­çš„0æ˜¯ç»“æœçš„å…¶å®ä½ç½®ï¼ˆoffsetï¼‰ 3æ˜¯ç»“æœçš„æ•°é‡ï¼ˆcountï¼‰<br><br>ZRANGEBULEX zset [aa [c<br><br>ZRANGEBULEX zset [aa (c<br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h4><ul><li>å§“åæ’åº</li></ul>  <img src="https://www.helloimg.com/images/2023/09/13/onxM6Y.png" alt="zrangebylex" border="0"><ul><li><p>ç”µè¯å·ç æ’åº</p><p>  <a href="https://www.helloimg.com/image/onx9Qg"><img src="https://www.helloimg.com/images/2023/09/13/onx9Qg.png" alt="onx9Qg.png"></a></p></li></ul></li></ul><h2 id="go-redisçš„åŸºæœ¬ä½¿ç”¨"><a href="#go-redisçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="go-redisçš„åŸºæœ¬ä½¿ç”¨"></a>go-redisçš„åŸºæœ¬ä½¿ç”¨</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">go get github.com/go-redis/redis/v8<br></code></pre></td></tr></table></figure><h3 id="è¿æ¥local-redis"><a href="#è¿æ¥local-redis" class="headerlink" title="è¿æ¥local  redis"></a>è¿æ¥local  redis</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doCommand</span><span class="hljs-params">()</span></span> &#123;<br>rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// å¯†ç </span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// æ•°æ®åº“</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// è¿æ¥æ± å¤§å°</span><br>&#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åŸºæœ¬çš„go-redisæŒ‡ä»¤"><a href="#ä½¿ç”¨åŸºæœ¬çš„go-redisæŒ‡ä»¤" class="headerlink" title="ä½¿ç”¨åŸºæœ¬çš„go-redisæŒ‡ä»¤"></a>ä½¿ç”¨åŸºæœ¬çš„go-redisæŒ‡ä»¤</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go">ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>val, err := rdb.Get(ctx, <span class="hljs-string">&quot;key&quot;</span>).Result()<br>fmt.Println(val, err)<br><br>cmder := rdb.Get(ctx, <span class="hljs-string">&quot;key&quot;</span>)<br>val = cmder.Val()<br>err = cmder.Err()<br>fmt.Println(val, err)<br><br>err = rdb.Set(ctx, <span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;val1&quot;</span>, time.Hour).Err()<br><br>val = rdb.Get(ctx, <span class="hljs-string">&quot;key1&quot;</span>).Val()<br>fmt.Println(val, err)<br><br></code></pre></td></tr></table></figure><h3 id="go-redisä¸­æä¾›äº†redis-Nil-çš„é”™è¯¯æ¥è¡¨ç¤ºä¸å­˜åœ¨çš„é”™è¯¯"><a href="#go-redisä¸­æä¾›äº†redis-Nil-çš„é”™è¯¯æ¥è¡¨ç¤ºä¸å­˜åœ¨çš„é”™è¯¯" class="headerlink" title="go-redisä¸­æä¾›äº†redis.Nil çš„é”™è¯¯æ¥è¡¨ç¤ºä¸å­˜åœ¨çš„é”™è¯¯"></a>go-redisä¸­æä¾›äº†redis.Nil çš„é”™è¯¯æ¥è¡¨ç¤ºä¸å­˜åœ¨çš„é”™è¯¯</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go">rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// å¯†ç </span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// æ•°æ®åº“</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// è¿æ¥æ± å¤§å°</span><br>&#125;)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>val, err := rdb.Get(ctx, <span class="hljs-string">&quot;key&quot;</span>).Result()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">if</span> errors.Is(err, redis.Nil) &#123;<br>fmt.Printf(<span class="hljs-string">&quot;redis.Nil&quot;</span>)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(val, err)<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-Client-Do-æ¥å®ç°ä»»æ„redisæŒ‡ä»¤"><a href="#ä½¿ç”¨-Client-Do-æ¥å®ç°ä»»æ„redisæŒ‡ä»¤" class="headerlink" title="ä½¿ç”¨ Client.Do æ¥å®ç°ä»»æ„redisæŒ‡ä»¤"></a>ä½¿ç”¨ Client.Do æ¥å®ç°ä»»æ„redisæŒ‡ä»¤</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go">rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// å¯†ç </span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// æ•°æ®åº“</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// è¿æ¥æ± å¤§å°</span><br>&#125;)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>err := rdb.Do(ctx, <span class="hljs-string">&quot;set&quot;</span>, <span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;val2&quot;</span>, <span class="hljs-string">&quot;EX&quot;</span>, <span class="hljs-number">3600</span>).Err()<br>fmt.Println(err)<br><br>val, err := rdb.Do(ctx, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;key2&quot;</span>).Result()<br>fmt.Println(val, err)<br></code></pre></td></tr></table></figure><h3 id="go-redis-ZSet-çš„ä½¿ç”¨"><a href="#go-redis-ZSet-çš„ä½¿ç”¨" class="headerlink" title="go-redis ZSet çš„ä½¿ç”¨"></a>go-redis ZSet çš„ä½¿ç”¨</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go">rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// å¯†ç </span><br>DB:       <span class="hljs-number">0</span>,  <span class="hljs-comment">// æ•°æ®åº“</span><br>PoolSize: <span class="hljs-number">20</span>, <span class="hljs-comment">// è¿æ¥æ± å¤§å°</span><br>&#125;)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cancel()<br><br>zsetKey := <span class="hljs-string">&quot;scores_rank&quot;</span><br><br>rank := []*redis.Z&#123;<br>&#123;Score: <span class="hljs-number">90.0</span>, Member: <span class="hljs-string">&quot;Alice&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">90.1</span>, Member: <span class="hljs-string">&quot;Bob&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">80.2</span>, Member: <span class="hljs-string">&quot;Cick&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">89.2</span>, Member: <span class="hljs-string">&quot;David&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">99.1</span>, Member: <span class="hljs-string">&quot;Eric&quot;</span>&#125;,<br>&#123;Score: <span class="hljs-number">78.1</span>, Member: <span class="hljs-string">&quot;Frank&quot;</span>&#125;,<br>&#125;<br><span class="hljs-keyword">if</span> err := rdb.ZAdd(ctx, zsetKey, rank...).Err(); err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;zadd failed&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;zadd success&quot;</span>)<br><br>newscore, err := rdb.ZIncrBy(ctx, zsetKey, <span class="hljs-number">-10</span>, <span class="hljs-string">&quot;Frank&quot;</span>).Result()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;zincrby failed&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Printf(<span class="hljs-string">&quot;Frank&#x27;s score is %f\n&quot;</span>, newscore)<br><br>res := rdb.ZRevRangeWithScores(ctx, zsetKey, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>).Val()<br>fmt.Println(<span class="hljs-string">&quot;ZRevRangeWithScores&#x27;s res :&quot;</span>, res)<br><br><span class="hljs-keyword">for</span> _, z := <span class="hljs-keyword">range</span> res &#123;<br>fmt.Println(z)<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Redis-Pipeline"><a href="#Redis-Pipeline" class="headerlink" title="Redis Pipeline"></a>Redis Pipeline</h3><ul><li><p>Pipeline  å°†å‘é€çš„å‘½ä»¤ä¸€æ¬¡æ€§æ‰“åŒ…å‘ç»™RedisæœåŠ¡å™¨æ‰§è¡Œï¼Œä»è€Œå‡å°‘äº†RTTæ—¶å»¶</p></li><li><p>RedisæœåŠ¡å™¨ä¼šæŒ‰ç…§æ·»åŠ å‘½ä»¤çš„é¡ºåºä¾æ¬¡æ‰§è¡Œå®ƒä»¬</p></li><li><p>Pipeline ä¸é€‚åˆåœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ï¼šå•ä¸ªå‘½ä»¤å¯èƒ½éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªå‘½ä»¤çš„ç»“æœï¼Œæˆ–è€…éœ€è¦ä¿è¯å‘½ä»¤çš„é¡ºåºæ€§</p></li></ul><h4 id="rdb-Pipeline"><a href="#rdb-Pipeline" class="headerlink" title="rdb.Pipeline()"></a>rdb.Pipeline()</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go">pipe := rdb.Pipeline()<br><br>incr := pipe.Incr(ctx, <span class="hljs-string">&quot;pipeline_counter&quot;</span>)<br>pipe.Expire(ctx, <span class="hljs-string">&quot;pipeline_counter&quot;</span>, time.Hour)<br>Get := pipe.Get(ctx, <span class="hljs-string">&quot;pipe_test1&quot;</span>)<br>_, err := pipe.Exec(ctx)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><br><span class="hljs-comment">// åœ¨æ‰§è¡Œpipe.Execä¹‹åæ‰èƒ½è·å–åˆ°ç»“æœ</span><br>fmt.Println(incr.Val())<br>fmt.Println(Get.Val())<br></code></pre></td></tr></table></figure><h4 id="rdb-Pipelined"><a href="#rdb-Pipelined" class="headerlink" title="rdb.Pipelined()"></a>rdb.Pipelined()</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//set</span><br>cmds, err := rdb.Pipelined(ctx, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pipe redis.Pipeliner)</span></span> <span class="hljs-type">error</span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>pipe.Set(ctx, fmt.Sprintf(<span class="hljs-string">&quot;key%d&quot;</span>, i), fmt.Sprintf(<span class="hljs-string">&quot;key%d&quot;</span>, i), <span class="hljs-number">0</span>)<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><span class="hljs-comment">/*for _, cmd := range cmds &#123;</span><br><span class="hljs-comment">fmt.Println(cmd.(*redis.StringCmd).Val())</span><br><span class="hljs-comment">&#125;*/</span><br><span class="hljs-comment">//get</span><br>cmds, err = rdb.Pipelined(ctx, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pipe redis.Pipeliner)</span></span> <span class="hljs-type">error</span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>pipe.Get(ctx, fmt.Sprintf(<span class="hljs-string">&quot;key%d&quot;</span>, i))<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><span class="hljs-keyword">for</span> _, cmd := <span class="hljs-keyword">range</span> cmds &#123;<br>fmt.Println(cmd.(*redis.StringCmd).Val())<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="go-redis-äº‹åŠ¡"><a href="#go-redis-äº‹åŠ¡" class="headerlink" title="go-redis äº‹åŠ¡"></a>go-redis äº‹åŠ¡</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//TxPipelineDemo</span><br>pipe := rdb.TxPipeline()<br>incr := pipe.Incr(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>)<br>pipe.Expire(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>, time.Hour)<br>_, err := pipe.Exec(ctx)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(incr.Val())<br><br><span class="hljs-comment">//TxPipelined demo TxPipelined è‡ªåŠ¨æ‰§è¡Œ Exec</span><br><span class="hljs-keyword">var</span> incr2 *redis.IntCmd<br>_, err = rdb.TxPipelined(ctx, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(pipe redis.Pipeliner)</span></span> <span class="hljs-type">error</span> &#123;<br>incr2 = pipe.Incr(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>)<br>pipe.Expire(ctx, <span class="hljs-string">&quot;tx_pipeline_counter&quot;</span>, time.Hour)<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;)<br>fmt.Println(incr2.Val(), err)<br><span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><p>ç­‰ä»·æŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">MULTI<br>INCR pipeline_counter<br>EXPIRE pipeline_counts 3600<br>EXEC<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="http://www.redis.cn/commands.html">Rediså‘½ä»¤ä¸­å¿ƒï¼ˆRedis commandsï¼‰ â€“ Redisä¸­å›½ç”¨æˆ·ç»„ï¼ˆCRUGï¼‰</a></li><li><a href="https://pkg.go.dev/github.com/go-redis/redis">redis package - github.com&#x2F;go-redis&#x2F;redis - Go Packages</a></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>grpcåˆæ¢</title>
    <link href="/2023/09/11/grpc%E5%88%9D%E6%8E%A2/"/>
    <url>/2023/09/11/grpc%E5%88%9D%E6%8E%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯rpc"><a href="#ä»€ä¹ˆæ˜¯rpc" class="headerlink" title="ä»€ä¹ˆæ˜¯rpc"></a>ä»€ä¹ˆæ˜¯rpc</h2><p>RPCï¼ˆRemote Procedure Callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºç¼–ç¨‹æ¨¡å‹å’Œåè®®ï¼Œå…è®¸ä¸€ä¸ªç¨‹åºåœ¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸æ˜¯è¿œç¨‹è®¡ç®—æœºä¸Šï¼‰æ‰§è¡Œå‡½æ•°æˆ–è¿‡ç¨‹è°ƒç”¨ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ã€‚RPC çš„ç›®æ ‡æ˜¯ä½¿åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸åŒç»„ä»¶èƒ½å¤Ÿç›¸äº’é€šä¿¡å’Œåä½œï¼Œè€Œä¸å¿…æ‰‹åŠ¨ç¼–å†™å¤æ‚çš„ç½‘ç»œé€šä¿¡ä»£ç ã€‚(chatGPTè§£é‡Š)</p><h2 id="æ˜¯ä»€ä¹ˆgrpc"><a href="#æ˜¯ä»€ä¹ˆgrpc" class="headerlink" title="æ˜¯ä»€ä¹ˆgrpc"></a>æ˜¯ä»€ä¹ˆgrpc</h2><p>gRPCï¼ˆgRPC Remote Procedure Callï¼‰æ˜¯ä¸€ç§é«˜æ€§èƒ½ã€è·¨è¯­è¨€çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ï¼Œç”±Googleå¼€å‘å¹¶å¼€æºã€‚å®ƒå»ºç«‹åœ¨HTTP&#x2F;2åè®®ä¸Šï¼Œä½¿ç”¨Protocol Buffersï¼ˆprotobufï¼‰ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ã€‚gRPCçš„ç›®æ ‡æ˜¯ä½¿åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡æ›´åŠ é«˜æ•ˆã€å¯é å’Œæ˜“äºæ‰©å±•ã€‚(chatGPTè§£é‡Š)</p><h2 id="protocæ–‡ä»¶ç®€è¦äº†è§£"><a href="#protocæ–‡ä»¶ç®€è¦äº†è§£" class="headerlink" title="protocæ–‡ä»¶ç®€è¦äº†è§£"></a>protocæ–‡ä»¶ç®€è¦äº†è§£</h2><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax=<span class="hljs-string">&quot;proto3&quot;</span>; <span class="hljs-comment">//æŒ‡å®šç‰ˆæœ¬å·</span><br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">SearchReqeust</span> &#123;<br><span class="hljs-type">string</span> KeyWord=<span class="hljs-number">1</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231004144526377.png" alt="image-20231004144526377"></p><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20231004151742178.png" alt="image-20231004151742178"></p><h2 id="Hello-world-Demo"><a href="#Hello-world-Demo" class="headerlink" title="Hello world  Demo"></a>Hello world  Demo</h2><h3 id="ç¼–å†™-protoæ–‡ä»¶"><a href="#ç¼–å†™-protoæ–‡ä»¶" class="headerlink" title="ç¼–å†™ protoæ–‡ä»¶"></a>ç¼–å†™ protoæ–‡ä»¶</h3><h4 id="Serverç«¯"><a href="#Serverç«¯" class="headerlink" title="Serverç«¯"></a>Serverç«¯</h4><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax = <span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;server/pb&quot;</span>;<span class="hljs-comment">// é¡¹ç›®ä¸­import å¯¼å…¥ç”Ÿæˆçš„Goä»£ç çš„åç§° </span><br><br><span class="hljs-keyword">package</span> pb; <span class="hljs-comment">// protoæ–‡ä»¶æ¨¡å—</span><br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Greeter</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> SayHello (HelloRequest) <span class="hljs-keyword">returns</span> (HelloResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloRequest</span>&#123;<br>  <span class="hljs-type">string</span>  name =<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloResponse</span>&#123;<br>  <span class="hljs-type">string</span>  reply=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Client-ç«¯"><a href="#Client-ç«¯" class="headerlink" title="Client ç«¯"></a>Client ç«¯</h4><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax = <span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;client/pb&quot;</span>;<br><br><span class="hljs-keyword">package</span> pb;<br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Greeter</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> SayHello (HelloRequest) <span class="hljs-keyword">returns</span> (HelloResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloRequest</span>&#123;<br>  <span class="hljs-type">string</span>  name =<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">HelloResponse</span>&#123;<br>  <span class="hljs-type">string</span>  reply=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‰§è¡Œ-protoæ–‡ä»¶"><a href="#æ‰§è¡Œ-protoæ–‡ä»¶" class="headerlink" title="æ‰§è¡Œ protoæ–‡ä»¶"></a>æ‰§è¡Œ protoæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc --go_out=. --go_opt=paths=source_relative \<br>--go-grpc_out=. --go-grpc_opt=paths=source_relative \<br>pb/hello.proto<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc --proto_path=pb --go_out=pb --go_opt=paths=source_relative \<br>--go-grpc_out=pb --go-grpc_opt=paths=source_relative \<br>hello.proto<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc -I=pb --go_out=pb --go_opt=paths=source_relative \<br>--go-grpc_out=pb --go-grpc_opt=paths=source_relative \<br>hello.proto<br></code></pre></td></tr></table></figure><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--I=pb æŒ‡å®šprotoc_path </span><br><span class="hljs-comment">--go_out æŒ‡å®špb.goè¾“å‡ºæ–‡ä»¶ä½ç½®</span><br><span class="hljs-comment">--go-grpc_out æŒ‡å®šgrpcä»£ç çš„ä½ç½®</span><br><br></code></pre></td></tr></table></figure><h3 id="ç¼–å†™-é€»è¾‘ä»£ç "><a href="#ç¼–å†™-é€»è¾‘ä»£ç " class="headerlink" title="ç¼–å†™ é€»è¾‘ä»£ç "></a>ç¼–å†™ é€»è¾‘ä»£ç </h3><h4 id="Serverç«¯-1"><a href="#Serverç«¯-1" class="headerlink" title="Serverç«¯"></a>Serverç«¯</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;microService_Learning/grpc_demo/server/pb&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br>)<br><br><span class="hljs-comment">// hello server</span><br><br><span class="hljs-keyword">type</span> server <span class="hljs-keyword">struct</span> &#123;<br>pb.UnimplementedGreeterServer<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *server)</span></span> SayHello(ctx context.Context, request *pb.HelloRequest) (*pb.HelloResponse, <span class="hljs-type">error</span>) &#123;<br><span class="hljs-keyword">return</span> &amp;pb.HelloResponse&#123;Reply: <span class="hljs-string">&quot;Hello&quot;</span> + request.Name&#125;, <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>listener, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:9091&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;net.Listen failed,err:%v\n&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>s := grpc.NewServer()<br>pb.RegisterGreeterServer(s, &amp;server&#123;&#125;)<br><span class="hljs-keyword">if</span> err = s.Serve(listener); err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;s.Serve failed,err:%v\n&quot;</span>, err)<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="Clientç«¯"><a href="#Clientç«¯" class="headerlink" title="Clientç«¯"></a>Clientç«¯</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//server/main.go</span><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;flag&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;microService_Learning/grpc_demo/server/pb&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc/credentials/insecure&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br>)<br><br><span class="hljs-comment">// hello_client</span><br><br><span class="hljs-keyword">const</span> (<br>defaultName = <span class="hljs-string">&quot;world&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br><span class="hljs-comment">// æ³¨æ„ flag.String è¿”å›çš„æ˜¯ *string</span><br>addr = flag.String(<span class="hljs-string">&quot;addr&quot;</span>, <span class="hljs-string">&quot;127.0.0.1:9092&quot;</span>, <span class="hljs-string">&quot;the address to connect to&quot;</span>)<br>name = flag.String(<span class="hljs-string">&quot;name&quot;</span>, defaultName, <span class="hljs-string">&quot;Name to greet&quot;</span>)<br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>flag.Parse()<br><span class="hljs-comment">// è¿æ¥åˆ°serverç«¯ï¼Œæ­¤å¤„ç¦ç”¨å®‰å…¨ä¼ è¾“</span><br><span class="hljs-comment">//conn, err := grpc.Dial(*addr, grpc.WithInsecure())</span><br>conn, err := grpc.Dial(*addr, grpc.WithTransportCredentials(insecure.NewCredentials()))<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;grpc.Dail failed,err:%v\n&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-keyword">defer</span> conn.Close()<br><br><span class="hljs-comment">//æ‰§è¡Œrpcè°ƒç”¨ å¹¶æ‰“å°è¿”å›ç›¸åº”çš„å€¼</span><br>client := pb.NewGreeterClient(conn)<br>ctx, cancel := context.WithTimeout(context.Background(), time.Millisecond*<span class="hljs-number">3</span>)<br><span class="hljs-keyword">defer</span> cancel()<br>r, err := client.SayHello(ctx, &amp;pb.HelloRequest&#123;Name: *name&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;counld not greet :%v\n&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>log.Printf(<span class="hljs-string">&quot;Greeting :,%s&quot;</span>, r.GetReply())<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Add-Demo"><a href="#Add-Demo" class="headerlink" title="Add Demo"></a>Add Demo</h2><h3 id="serverç«¯-proto-æ–‡ä»¶"><a href="#serverç«¯-proto-æ–‡ä»¶" class="headerlink" title="serverç«¯  proto æ–‡ä»¶"></a>serverç«¯  proto æ–‡ä»¶</h3><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs protobuf"><span class="hljs-comment">//path: add_server/pb/add.proto</span><br>syntax=<span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">package</span> add_sever;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;add_server/pb&quot;</span>;<br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Add</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> CalcService(AddRequest) <span class="hljs-keyword">returns</span> (AddResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">AddRequest</span>&#123;<br>  <span class="hljs-type">int64</span> x=<span class="hljs-number">1</span>;<br>  <span class="hljs-type">int64</span> y=<span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-keyword">message  </span><span class="hljs-title class_">AddResponse</span>&#123;<br>  <span class="hljs-type">int64</span>  res=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="serverç«¯å…·ä½“é€»è¾‘ä»£ç "><a href="#serverç«¯å…·ä½“é€»è¾‘ä»£ç " class="headerlink" title="serverç«¯å…·ä½“é€»è¾‘ä»£ç "></a>serverç«¯å…·ä½“é€»è¾‘ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// path: add_server/main.go</span><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;add_server/pb&quot;</span><br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><br><span class="hljs-string">&quot;net&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> server <span class="hljs-keyword">struct</span> &#123;<br>pb.UnimplementedAddServer<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *server)</span></span> CalcService(ctx context.Context, in *pb.AddRequest) (*pb.AddResponse, <span class="hljs-type">error</span>) &#123;<br>sum := <span class="hljs-type">int64</span>(in.GetX()) + <span class="hljs-type">int64</span>(in.GetY())<br><span class="hljs-keyword">return</span> &amp;pb.AddResponse&#123;Res: sum&#125;, <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>listener, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:3000&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;net.Listen failed,err:%v&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>s := grpc.NewServer()<br>pb.RegisterAddServer(s, &amp;server&#123;&#125;)<br><span class="hljs-keyword">if</span> err = s.Serve(listener); err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;s.Serve failed,err:%v&quot;</span>, err)<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="clientç«¯-proto-æ–‡ä»¶"><a href="#clientç«¯-proto-æ–‡ä»¶" class="headerlink" title="clientç«¯  proto æ–‡ä»¶"></a>clientç«¯  proto æ–‡ä»¶</h3><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs protobuf"><span class="hljs-comment">// path: add_client/pb/add.proto</span><br>syntax=<span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">package</span> add_sever;<br><br><span class="hljs-keyword">option</span> go_package =<span class="hljs-string">&quot;add_client/pb&quot;</span>;<br><br><span class="hljs-keyword">service </span><span class="hljs-title class_">Add</span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">rpc</span> CalcService(AddRequest) <span class="hljs-keyword">returns</span> (AddResponse)</span>;<br>&#125;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">AddRequest</span>&#123;<br>  <span class="hljs-type">int64</span> x=<span class="hljs-number">1</span>;<br>  <span class="hljs-type">int64</span> y=<span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-keyword">message  </span><span class="hljs-title class_">AddResponse</span>&#123;<br>  <span class="hljs-type">int64</span>  res=<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="clientç«¯å…·ä½“é€»è¾‘ä»£ç "><a href="#clientç«¯å…·ä½“é€»è¾‘ä»£ç " class="headerlink" title="clientç«¯å…·ä½“é€»è¾‘ä»£ç "></a>clientç«¯å…·ä½“é€»è¾‘ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// path: add_client/main.go</span><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;add_client/pb&quot;</span><br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;flag&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br><br><span class="hljs-string">&quot;google.golang.org/grpc&quot;</span><br><span class="hljs-string">&quot;google.golang.org/grpc/credentials/insecure&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br>x = flag.Int(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;xçš„å€¼&quot;</span>)<br>y = flag.Int(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-number">110</span>, <span class="hljs-string">&quot;xçš„å€¼&quot;</span>)<br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>flag.Parse()<br><span class="hljs-comment">//å»ºç«‹è¿æ¥</span><br>conn, err := grpc.Dial(<span class="hljs-string">&quot;127.0.0.1:3000&quot;</span>, grpc.WithTransportCredentials(insecure.NewCredentials()))<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;grpc.Dial failed,err:%v&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-keyword">defer</span> conn.Close()<br><br><span class="hljs-comment">//åˆ›å»º rpc clientç«¯</span><br>client := pb.NewAddClient(conn)<br>ctx, cacel := context.WithTimeout(context.Background(), time.Second)<br><span class="hljs-keyword">defer</span> cacel()<br>resp, err := client.CalcService(ctx, &amp;pb.AddRequest&#123;<br>X: <span class="hljs-type">int64</span>(*x),<br>Y: <span class="hljs-type">int64</span>(*y),<br>&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalf(<span class="hljs-string">&quot;client.CalcService failed,err:%v&quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>log.Printf(<span class="hljs-string">&quot;res:%v&quot;</span>, resp.GetRes())<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>å‚è€ƒ</strong></p><ul><li><a href="https://www.liwenzhou.com/posts/Go/gRPC/#autoid-0-3-4">gRPCæ•™ç¨‹ | ææ–‡å‘¨çš„åšå®¢ (liwenzhou.com)</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>grpc</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Golang å­¦ä¹ è·¯çº¿æ€»ç»“ã€‘</title>
    <link href="/2023/09/09/%E3%80%90Golang-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E6%80%BB%E7%BB%93%E3%80%91/"/>
    <url>/2023/09/09/%E3%80%90Golang-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E6%80%BB%E7%BB%93%E3%80%91/</url>
    
    <content type="html"><![CDATA[<ul><li>Golangè®¾è®¡æ¨¡å¼ <a href="https://www.bilibili.com/video/BV1Eg411m7rV/?spm_id_from=333.999.0.0&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">Easyæå®šGolangè®¾è®¡æ¨¡å¼(Goè¯­è¨€è®¾è®¡æ¨¡å¼ï¼Œå¦‚æ­¤ç®€å•)_å“”å“©å“”å“©_bilibili</a></li><li>B+æ ‘ <a href="https://www.bilibili.com/video/BV1kT411N7it/?spm_id_from=333.999.0.0&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">B+æ ‘,B-linkæ ‘,LSMæ ‘â€¦ä¸€ä¸ªè§†é¢‘å¸¦ä½ äº†è§£å¸¸ç”¨å­˜å‚¨å¼•æ“æ•°æ®ç»“æ„ï¼ˆä¸­ï¼‰_å“”å“©å“”å“©_bilibili</a></li><li>TCP IP å…«è‚¡ <a href="https://www.bilibili.com/video/BV1Mp4y1x7eX/?spm_id_from=pageDriver&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">tcp&#x2F;ipåè®®ç¬¬10è®²ï¼štcpå››æ¬¡æŒ¥æ‰‹ä»¥åŠwiresharkæŠ“åŒ…éªŒè¯_å“”å“©å“”å“©_bilibili</a></li><li>Kubernetes <a href="https://www.bilibili.com/video/BV1MT411x7GH/?spm_id_from=333.999.0.0&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">å®Œæ•´ç‰ˆKubernetesï¼ˆK8Sï¼‰å…¨å¥—å…¥é—¨+å¾®æœåŠ¡å®æˆ˜é¡¹ç›®ï¼Œå¸¦ä½ ä¸€ç«™å¼æ·±å…¥æŒæ¡K8Sæ ¸å¿ƒèƒ½åŠ›_å“”å“©å“”å“©_bilibili</a></li><li>å¼€å‘æ•ˆç‡æå‡ç¥å™¨ <strong>air</strong> <a href="https://github.com/cosmtrek/air/tree/master">cosmtrek&#x2F;air: â˜ï¸ Live reload for Go apps (github.com)</a></li><li><a href="https://www.yuque.com/aceld/lfhu8y/rg6nsf">Easyæå®šGolangè®¾è®¡æ¨¡å¼ (yuque.com)</a></li><li><a href="https://www.bookstack.cn/read/GoExpertProgramming/chapter01-1.1-chan.md">å¸¸è§æ•°æ®ç»“æ„å®ç°åŸç† GOä¸“å®¶ç¼–ç¨‹ã€‹</a></li><li><a href="https://www.bilibili.com/video/BV1cr4y1s7H4/?spm_id_from=333.337.search-card.all.click&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">ã€Goé¡¹ç›®å®æˆ˜ã€‘åŸºäºGo-zeroã€Xormçš„ç½‘ç›˜ç³»ç»Ÿ_å“”å“©å“”å“©_bilibili</a></li><li><a href="https://www.bilibili.com/video/BV1BP4y1H7gV/?spm_id_from=333.337.search-card.all.click&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">ã€Goè¯­è¨€å®æˆ˜ã€‘Gin+WebSocketæ„å»ºIMå³æ—¶èŠå¤©Demo_å“”å“©å“”å“©_bilibili</a></li><li><a href="https://www.bilibili.com/video/BV1Df4y1C7o5/?spm_id_from=333.337.search-card.all.click&vd_source=7e55f4c87cf718e9cce051dc48d89bb7">ã€Goè¯­è¨€æˆ˜å®æˆ˜ã€‘æ—¥å¿—æ”¶é›†é¡¹ç›®å¼€å‘ï¼ˆå®Œæ•´ç‰ˆï¼‰_å“”å“©å“”å“©_bilibili</a></li><li><a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html">SSL&#x2F;TLSåè®®è¿è¡Œæœºåˆ¶çš„æ¦‚è¿° - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ€»ç»“</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å­¦ä¹ è·¯çº¿è®°å½•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‚»è›‹é€Ÿæˆpython</title>
    <link href="/2023/09/07/%E5%82%BB%E8%9B%8B%E9%80%9F%E6%88%90python/"/>
    <url>/2023/09/07/%E5%82%BB%E8%9B%8B%E9%80%9F%E6%88%90python/</url>
    
    <content type="html"><![CDATA[<p>æ ¼å¼åŒ– </p><ul><li></li></ul><p>%</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">str</span>=<span class="hljs-string">&quot;%s is %d years old&quot;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">str</span> % (<span class="hljs-string">&quot;yst&quot;</span>,<span class="hljs-number">123</span>)<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">&#x27;yst is 123 years old&#x27;</span><br></code></pre></td></tr></table></figure><p>format</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#123;:d&#125; + &#123;:d&#125; =&#123;:d&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>,<span class="hljs-number">1</span>+<span class="hljs-number">21</span>)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#123;1:d&#125; + &#123;0:d&#125; =&#123;2:d&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>,<span class="hljs-number">1</span>+<span class="hljs-number">21</span>)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-string">&#x27;&#123;0:d&#125; + &#123;0:d&#125; + &#123;1:d&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>,<span class="hljs-number">21</span>)<br></code></pre></td></tr></table></figure><p>f</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">f `&#123;name&#125; <span class="hljs-keyword">is</span> &#123;age&#125; years old`<br></code></pre></td></tr></table></figure><p>ç»“æ„æ§åˆ¶ </p><p>forè¯­å¥</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">scores=[<span class="hljs-number">90</span>,<span class="hljs-number">45</span>,<span class="hljs-number">85</span>,<span class="hljs-number">76</span>,<span class="hljs-number">89</span>]<br><br><span class="hljs-keyword">for</span> score <span class="hljs-keyword">in</span> scores:<br>    <span class="hljs-keyword">if</span> score &gt;=<span class="hljs-number">60</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;PASS&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Failed&quot;</span>)       <br></code></pre></td></tr></table></figure><p>in range</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">10</span>):<br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">scores=[<span class="hljs-number">90</span>,<span class="hljs-number">45</span>,<span class="hljs-number">85</span>,<span class="hljs-number">76</span>,<span class="hljs-number">89</span>]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-built_in">len</span>(scores)):<br>    <span class="hljs-built_in">print</span>(scores[i])<br><br></code></pre></td></tr></table></figure><p>in enumerate</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">scores = [<span class="hljs-number">90</span>, <span class="hljs-number">45</span>, <span class="hljs-number">85</span>, <span class="hljs-number">76</span>, <span class="hljs-number">89</span>, <span class="hljs-number">900</span>]<br><br><span class="hljs-keyword">for</span> i, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(scores, <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(i, score)<br><br><br></code></pre></td></tr></table></figure><p>in zip</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">scores = [<span class="hljs-number">90</span>, <span class="hljs-number">45</span>, <span class="hljs-number">85</span>, <span class="hljs-number">76</span>, <span class="hljs-number">89</span>, <span class="hljs-number">900</span>]<br>names = [<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-string">&quot;F&quot;</span>, <span class="hljs-string">&quot;G&quot;</span>]<br><br><span class="hljs-keyword">for</span> name, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(names, scores):<br>    <span class="hljs-built_in">print</span>(name, score)<br><br></code></pre></td></tr></table></figure><h2 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h2><p>hashä»…æ”¯æŒ immutableçš„å¯¹è±¡ str &#x2F;int &#x2F;bool&#x2F;float&#x2F;tuple</p><h2 id="func"><a href="#func" class="headerlink" title="func"></a>func</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">foobar</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;this is a python func&quot;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name=<span class="hljs-string">&quot;Alice&quot;</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;this is a comment&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;hello <span class="hljs-subst">&#123;name&#125;</span>&#x27;</span>)<br><br><br>foobar()<br>greet()<br>greet(<span class="hljs-string">&quot;name&quot;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    res = x + y<br>    <span class="hljs-keyword">return</span> res<br><br><br>sum_res = add(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)<br></code></pre></td></tr></table></figure><p>é—­åŒ… å‡½æ•°ä½œä¸ºè¿”å›å€¼</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># å‡½æ•°çš„é—­åŒ…</span><br><span class="hljs-comment"># ä¸€ä¸ªå‡½æ•°Aä¸­å®šä¹‰äº†å‡½æ•°Bï¼Œå¹¶ä¸”å¦å‡½æ•°Bè°ƒç”¨äº†å‡½æ•°Açš„å‚æ•°ï¼Œä¸”è¿”å›å‡½æ•°Bä½œä¸ºè¿”å›å€¼</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f2</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">f3</span>(<span class="hljs-params">y</span>):<br>        <span class="hljs-keyword">return</span> x + y<br><br>    <span class="hljs-keyword">return</span> f3<br><br><span class="hljs-built_in">print</span>(f2(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>))<br><br></code></pre></td></tr></table></figure><p>lambdaè¡¨è¾¾å¼</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * x ** <span class="hljs-number">2</span> + <span class="hljs-number">9</span> * x + <span class="hljs-number">10</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">diff</span>(<span class="hljs-params">x, func</span>):<br>    delta = <span class="hljs-number">1e-6</span><br>    <span class="hljs-keyword">return</span> (func(x + delta) - func(x)) / delta<br><br><br><span class="hljs-built_in">print</span>(diff(<span class="hljs-number">2</span>, f))<br><br><span class="hljs-built_in">print</span>(diff(<span class="hljs-number">1</span>, <span class="hljs-keyword">lambda</span> x: <span class="hljs-number">2</span> * x ** <span class="hljs-number">3</span> + <span class="hljs-number">9</span> * x + <span class="hljs-number">9</span>))<br><br></code></pre></td></tr></table></figure><p><code>Chatgptå¯¹äº pythonä¸­å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘çš„è§£é‡Š</code></p><p>åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œâ€ä¸€ç­‰å…¬æ°‘â€ï¼ˆFirst-Class Citizenï¼‰æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨æ¥æè¿°å¯¹æŸç§ç‰¹æ€§ï¼ˆé€šå¸¸æ˜¯æ•°æ®ç±»å‹ï¼‰çš„æ”¯æŒç¨‹åº¦ã€‚å¦‚æœä¸€ç§ç¼–ç¨‹è¯­è¨€å°†æŸä¸ªç‰¹æ€§è§†ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œé‚£ä¹ˆè¯¥ç‰¹æ€§å°±ä¼šäº«æœ‰ä¸å…¶ä»–æ ‡å‡†æ•°æ®ç±»å‹ç›¸åŒçš„æƒåˆ©å’Œç‰¹æ€§ã€‚åœ¨Pythonä¸­ï¼Œå‡½æ•°è¢«è§†ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œè¿™æ„å‘³ç€å‡½æ•°åœ¨è¯­è¨€ä¸­å…·æœ‰ç‰¹æ®Šçš„åœ°ä½å’Œæƒåˆ©ï¼š</p><p>ä»¥ä¸‹æ˜¯Pythonä¸­å‡½æ•°è¢«ç§°ä¸ºä¸€ç­‰å…¬æ°‘çš„åŸå› å’Œè¡¨ç°ï¼š</p><ol><li><p><strong>å¯ä»¥èµ‹å€¼ç»™å˜é‡</strong>ï¼šæ‚¨å¯ä»¥å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡ï¼Œç„¶åé€šè¿‡è¯¥å˜é‡è°ƒç”¨å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Hello, <span class="hljs-subst">&#123;name&#125;</span>!&quot;</span>)<br><br>my_function = greet  <span class="hljs-comment"># å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡</span><br>my_function(<span class="hljs-string">&quot;Alice&quot;</span>)  <span class="hljs-comment"># é€šè¿‡å˜é‡è°ƒç”¨å‡½æ•°</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</strong>ï¼šæ‚¨å¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">apply</span>(<span class="hljs-params">func, x</span>):<br>    <span class="hljs-keyword">return</span> func(x)<br><br>result = apply(square, <span class="hljs-number">5</span>)  <span class="hljs-comment"># å°†å‡½æ•° square ä½œä¸ºå‚æ•°ä¼ é€’ç»™ apply å‡½æ•°</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>apply</code> å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç„¶åå°†è¯¥å‡½æ•°åº”ç”¨äºç»™å®šçš„å‚æ•° <code>x</code>ã€‚</p></li><li><p><strong>å¯ä»¥ä½œä¸ºè¿”å›å€¼</strong>ï¼šæ‚¨å¯ä»¥ä»ä¸€ä¸ªå‡½æ•°ä¸­è¿”å›å¦ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiplier</span>(<span class="hljs-params">factor</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">return</span> x * factor<br>    <span class="hljs-keyword">return</span> multiply<br><br>double = multiplier(<span class="hljs-number">2</span>)  <span class="hljs-comment"># è¿”å›ä¸€ä¸ªå‡½æ•°</span><br>result = double(<span class="hljs-number">5</span>)  <span class="hljs-comment"># è°ƒç”¨è¿”å›çš„å‡½æ•°</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>multiplier</code> å‡½æ•°è¿”å›äº†å¦ä¸€ä¸ªå‡½æ•° <code>multiply</code>ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ <code>double</code> å˜é‡æ¥è°ƒç”¨è¿”å›çš„å‡½æ•°ã€‚</p></li><li><p><strong>å¯ä»¥å­˜å‚¨åœ¨æ•°æ®ç»“æ„ä¸­</strong>ï¼šå‡½æ•°å¯ä»¥å­˜å‚¨åœ¨åˆ—è¡¨ã€å­—å…¸æˆ–å…¶ä»–æ•°æ®ç»“æ„ä¸­ï¼Œä»¥ä¾¿åœ¨åç»­ä½¿ç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">functions = [square, cube, add]<br>result = functions[<span class="hljs-number">0</span>](<span class="hljs-number">3</span>)  <span class="hljs-comment"># ä»åˆ—è¡¨ä¸­è·å–å‡½æ•°å¹¶è°ƒç”¨å®ƒ</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>functions</code> åˆ—è¡¨å­˜å‚¨äº†ä¸åŒçš„å‡½æ•°ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©å¹¶è°ƒç”¨å…¶ä¸­çš„ä¸€ä¸ªã€‚</p></li></ol><p>å› æ­¤ï¼ŒPythonä¸­çš„å‡½æ•°è¢«ç§°ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ä¸å…¶ä»–æ•°æ®ç±»å‹ï¼ˆå¦‚æ•´æ•°ã€å­—ç¬¦ä¸²å’Œåˆ—è¡¨ï¼‰ç›¸åŒçš„æƒåˆ©å’Œç‰¹æ€§ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—Pythonéå¸¸é€‚åˆäºå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼Œå¹¶å…è®¸ç¼–å†™æ›´çµæ´»å’Œå¯å¤ç”¨çš„ä»£ç ã€‚å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„ç‰¹æ€§åœ¨ç¼–å†™é«˜é˜¶å‡½æ•°å’Œå®ç°å›è°ƒæœºåˆ¶ç­‰ç¼–ç¨‹ä»»åŠ¡æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„å€¼</span><br>x, y = <span class="hljs-number">30</span>, <span class="hljs-number">50</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;x=%d,y=%d&#x27;</span> % (x, y))<br>t = x<br>x = y<br>y = x<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x=%d,y=%d&quot;</span> % (x, y))<br><br>x, y = <span class="hljs-number">30</span>, <span class="hljs-number">50</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x=%d,y=%d&quot;</span> % (x, y))<br>x, y = y, x<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x=%d y=%d&quot;</span> % (x, y))<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">a, b, c, x = <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1.414</span><br>res = a * x ** <span class="hljs-number">3</span> + b * x ** <span class="hljs-number">2</span> + c<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¤šé¡¹å¼çš„å€¼ä¸º:<span class="hljs-subst">&#123;res:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sympy <span class="hljs-keyword">as</span> sp<br><br>x = sp.symbols(<span class="hljs-string">&#x27;x&#x27;</span>)<br><br>f = <span class="hljs-number">5</span> * x ** <span class="hljs-number">2</span> - <span class="hljs-number">4</span> * x - <span class="hljs-number">1</span><br><br>solution = sp.solve((f, x))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ–¹ç¨‹çš„è§£ä¸º:<span class="hljs-subst">&#123;solution&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">a, b, c, x, y, z = <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1.414</span>, <span class="hljs-number">1.732</span>, <span class="hljs-number">2.712</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;a=<span class="hljs-subst">&#123;a:&lt;<span class="hljs-number">7</span>&#125;</span> b=<span class="hljs-subst">&#123;b:&lt;<span class="hljs-number">7</span>&#125;</span> c=<span class="hljs-subst">&#123;c:&lt;<span class="hljs-number">7</span>&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;x=<span class="hljs-subst">&#123;x:&lt;<span class="hljs-number">7.3</span>f&#125;</span> y=<span class="hljs-subst">&#123;y:&lt;<span class="hljs-number">7.3</span>f&#125;</span> z=<span class="hljs-subst">&#123;z:&lt;<span class="hljs-number">7.3</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py">num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªä¸‰ä½çš„æ­£æ•´æ•°&quot;</span>))<br><br>gewei = num % <span class="hljs-number">10</span><br>shiwei = (num // <span class="hljs-number">10</span>) % <span class="hljs-number">10</span><br>baiwei = num // <span class="hljs-number">100</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç™¾ä½æ•°å­—:<span class="hljs-subst">&#123;baiwei&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åä½æ•°å­—<span class="hljs-subst">&#123;shiwei&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ä¸ªä½æ•°å­—<span class="hljs-subst">&#123;gewei&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py">c = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥è®¾æ–½æ¸©åº¦&quot;</span>))<br><br>f = (<span class="hljs-number">9</span> / <span class="hljs-number">5</span>) * c + <span class="hljs-number">32</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åæ°æ¸©åº¦ä¸º:<span class="hljs-subst">&#123;f:<span class="hljs-number">.1</span>f&#125;</span>åº¦&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py">result = math.exp(<span class="hljs-number">3.14</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;e çš„3.14æ¬¡æ–¹çš„ç»“æœæ˜¯<span class="hljs-subst">&#123;result:<span class="hljs-number">.5</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># è¾“å…¥ä¸‰è§’å½¢çš„ä¸‰æ¡è¾¹é•¿</span><br>a = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥ç¬¬ä¸€æ¡è¾¹çš„é•¿åº¦ï¼š&quot;</span>))<br>b = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥ç¬¬äºŒæ¡è¾¹çš„é•¿åº¦ï¼š&quot;</span>))<br>c = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥ç¬¬ä¸‰æ¡è¾¹çš„é•¿åº¦ï¼š&quot;</span>))<br><br><span class="hljs-comment"># è®¡ç®—ä¸‰è§’å½¢çš„åŠå‘¨é•¿</span><br>s = (a + b + c) / <span class="hljs-number">2</span><br><br><span class="hljs-comment"># è®¡ç®—ä¸‰è§’å½¢çš„é¢ç§¯</span><br>area = math.sqrt(s * (s - a) * (s - b) * (s - c))<br><br><span class="hljs-comment"># æ‰“å°ç»“æœ</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ä¸‰è§’å½¢çš„é¢ç§¯æ˜¯ï¼š<span class="hljs-subst">&#123;area:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">radius = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥çƒçš„åŠå¾„:&quot;</span>))<br><br>volume = (<span class="hljs-number">4</span> / <span class="hljs-number">3</span>) * math.pi * radius ** <span class="hljs-number">3</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;çƒçš„ä½“ç§¯æ˜¯:<span class="hljs-subst">&#123;volume:<span class="hljs-number">.1</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py">v1 = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;ç¬¬ä¸€ä¸ªæ•°å­—&quot;</span>))<br><br>v2 = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;ç¬¬äºŒä¸ªæ•°å­—&quot;</span>))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¹³å‡å€¼:<span class="hljs-subst">&#123;(v1 + v2) / <span class="hljs-number">2</span>:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py">r = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;åœ†æŸ±å½¢çš„åŠå¾„&quot;</span>))<br><br>h = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;åœ†æŸ±ä½“çš„é«˜&quot;</span>))<br><br>res1 = <span class="hljs-number">2</span> * math.pi * (r ** <span class="hljs-number">2</span>) + <span class="hljs-number">2</span> * math.pi * r * h<br><br>res2 = math.pi * (r ** <span class="hljs-number">2</span>) * h<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åœ†æŸ±ä½“çš„è¡¨é¢ç§¯:<span class="hljs-subst">&#123;res1:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åœ†æŸ±ä½“çš„ä½“ç§¯:<span class="hljs-subst">&#123;res2:<span class="hljs-number">.2</span>f&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dockerçš„åŸºæœ¬ä½¿ç”¨</title>
    <link href="/2023/09/06/docker%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/09/06/docker%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> golang:alpine<br><br><span class="hljs-comment"># Set necessary environmet variables needed for our image</span><br><span class="hljs-keyword">ENV</span> GO111MODULE=on \<br>    CGO_ENABLED=<span class="hljs-number">0</span> \<br>    GOOS=linux \<br>    GOARCH=amd64<br><br><span class="hljs-comment"># Move to working directory /build</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /build</span><br><br><span class="hljs-comment"># Copy and download dependency using go mod</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> go.mod .</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> go.sum .</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> go mod download</span><br><br><span class="hljs-comment"># Copy the code into the container</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span><br><br><span class="hljs-comment"># Build the application</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> go build -o main .</span><br><br><span class="hljs-comment"># Move to /dist directory as the place for resulting binary folder</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /dist</span><br><br><span class="hljs-comment"># Copy binary from build to main folder</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">cp</span> /build/main .</span><br><br><span class="hljs-comment"># Export necessary port</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">3000</span><br><br><span class="hljs-comment"># Command to run when starting the container</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;/dist/main&quot;</span>]</span><br></code></pre></td></tr></table></figure><p>docker build . -t go-dock</p><p>docker run -p 3000:3000 go-dock</p><p>å·¦è¾¹çš„ 3000 æ˜¯ä¸»æœºï¼ˆä½ çš„è®¡ç®—æœºï¼‰ä¸Šçš„ç«¯å£å·ã€‚<br>       å³è¾¹çš„ 3000 æ˜¯Dockerå®¹å™¨å†…éƒ¨çš„ç«¯å£å·ã€‚</p><p>â€‹</p><p>go mod tidy</p><p>go mod init [mod-name]</p>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>shellç¼–ç¨‹</title>
    <link href="/2023/09/02/shell%E7%BC%96%E7%A8%8B/"/>
    <url>/2023/09/02/shell%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p> <code>#!/bin/bash</code>ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„Bashè„šæœ¬çš„å¼€å¤´ï¼ŒæŒ‡å®šäº†è„šæœ¬è¦ä½¿ç”¨çš„è§£é‡Šå™¨ï¼Œå³Bashã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># Author : Forrest</span><br><br><span class="hljs-built_in">pwd</span><br><span class="hljs-built_in">ls</span><br><span class="hljs-built_in">mkdir</span> testDir<br><br></code></pre></td></tr></table></figure><p><strong>æ·»åŠ æ‰§è¡Œæƒé™</strong> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x filename<br></code></pre></td></tr></table></figure><p>ç”¨readå‘½ä»¤æ¥è·å–keyboardçš„è¾“å…¥ï¼Œå¹¶å°†è¾“å…¥ç»“æœèµ‹å€¼ç»™å˜é‡ The following script uses the <strong>read</strong> command which takes the input from the keyboard and assigns it as the value of the variable PERSON and finally prints it on STDOUT.</p><p>ç”¨$ç¬¦å·æ¥è·å–å˜é‡çš„å€¼ To access the value stored in a variable, prefix its name with the dollar sign (<strong>$</strong>)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># Author : Forrest</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;what is your name&quot;</span><br><span class="hljs-built_in">read</span> name<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello ,<span class="hljs-variable">$name</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;done&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Using-Variables"><a href="#Using-Variables" class="headerlink" title="Using Variables"></a>Using Variables</h2><h4 id="Defining-Variables"><a href="#Defining-Variables" class="headerlink" title="Defining  Variables"></a>Defining  Variables</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">variable_name=variable_value<br><br>NAME=<span class="hljs-string">&quot;Forrest&quot;</span><br>NUMBER=123<br></code></pre></td></tr></table></figure><h4 id="Accessing-values"><a href="#Accessing-values" class="headerlink" title="Accessing values"></a>Accessing values</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">NAME=<span class="hljs-string">&quot;Forrest&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$NAME</span><br></code></pre></td></tr></table></figure><h4 id="Read-only-Variables"><a href="#Read-only-Variables" class="headerlink" title="Read-only Variables"></a>Read-only Variables</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">NAME=<span class="hljs-string">&quot;Forrest&quot;</span><br><span class="hljs-built_in">readonly</span> NAME<br>NAME=<span class="hljs-string">&quot;another name&quot;</span><br></code></pre></td></tr></table></figure><p>err: </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">-bash: NAME: <span class="hljs-built_in">readonly</span> variable<br></code></pre></td></tr></table></figure><p><code>readonly</code> å˜é‡çš„åªè¯»å±æ€§æ˜¯æ°¸ä¹…æ€§çš„ï¼Œä¸èƒ½åœ¨è„šæœ¬ä¸­æˆ–shellä¼šè¯ä¸­è¢«ä¿®æ”¹æˆ–å–æ¶ˆã€‚Unsetting Variables</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">unset</span> vaiable_name<br></code></pre></td></tr></table></figure><p>Special Variables </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;what is your name&quot;</span><br><span class="hljs-built_in">read</span> name<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello ,<span class="hljs-variable">$name</span>&quot;</span><br><span class="hljs-comment"># special variable</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;current script pid: $$&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;filename : <span class="hljs-variable">$0</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;first parameter: <span class="hljs-variable">$1</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;second parameter :<span class="hljs-variable">$2</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;quoted values <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;quoted values $*&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;total number of quoted  <span class="hljs-variable">$#</span>&quot;</span><br><br><span class="hljs-keyword">for</span> TOKEN <span class="hljs-keyword">in</span> $*<br><span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-variable">$TOKEN</span><br><span class="hljs-keyword">done</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;exit status $?&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Using-Shell-Arrays"><a href="#Using-Shell-Arrays" class="headerlink" title="Using Shell Arrays"></a>Using Shell Arrays</h2><p>æŸ¥çœ‹shellæ˜¯ ksh è¿˜æ˜¯bash</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span><br></code></pre></td></tr></table></figure><p><img src="C:\Users\Forrest\AppData\Roaming\Typora\typora-user-images\image-20230830201146754.png" alt="image-20230830201146754"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br>Arr[0]=<span class="hljs-string">&quot;0&quot;</span><br>Arr[1]=<span class="hljs-string">&quot;1&quot;</span><br>Arr[2]=<span class="hljs-string">&quot;2&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;first item <span class="hljs-variable">$&#123;Arr[0]&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;first method <span class="hljs-variable">$&#123;Arr[*]&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;second method <span class="hljs-variable">$&#123;Arr[@]&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure><h2 id="Decision-Making"><a href="#Decision-Making" class="headerlink" title="Decision Making"></a>Decision Making</h2><h3 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">a=10<br>b=20<br><span class="hljs-keyword">if</span> [<span class="hljs-variable">$a</span>==<span class="hljs-variable">$b</span>]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a equlas b&quot;</span><br><span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a not equals b&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><h3 id="if-elseif"><a href="#if-elseif" class="headerlink" title="if elseif"></a>if elseif</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br>a=10<br>b=20<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$a</span> == <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a equals b&quot;</span><br><span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a is greater than b&quot;</span><br><span class="hljs-keyword">elif</span>  [ <span class="hljs-variable">$a</span> -lt <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a is less than b&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>â€‹</p><h3 id="case-esac"><a href="#case-esac" class="headerlink" title="case .. esac"></a>case .. esac</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br>option=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1&#125;</span>&quot;</span><br><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$&#123;option&#125;</span> <span class="hljs-keyword">in</span><br>        -f) FILE=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2&#125;</span>&quot;</span><br>                        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;File name is <span class="hljs-variable">$FILE</span>&quot;</span><br>                        ;;<br>        -d) DIR=<span class="hljs-variable">$&#123;2&#125;</span><br>                        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Dir name is <span class="hljs-variable">$DIR</span>&quot;</span><br>                        ;;<br>        *)<br>                <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;`basename <span class="hljs-variable">$&#123;0&#125;</span> `:usage :[-f file] | [-d directory]&quot;</span><br>                <span class="hljs-built_in">exit</span> 1<br>                ;;<br><span class="hljs-keyword">esac</span><br></code></pre></td></tr></table></figure><h2 id="IO-Redirection"><a href="#IO-Redirection" class="headerlink" title="IO Redirection"></a>IO Redirection</h2><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p><strong>who</strong> command which redirects the complete output of the command in the users file.</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">who</span> &gt; <span class="hljs-built_in">users</span><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> line 1 &gt;  <span class="hljs-built_in">users</span><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> line 2 &gt;&gt; uses<br></code></pre></td></tr></table></figure><h2 id="eval"><a href="#eval" class="headerlink" title="eval"></a><strong>eval</strong></h2><p><code>eval</code> æ˜¯ä¸€ä¸ªåœ¨Shellè„šæœ¬ä¸­ç”¨äºæ‰§è¡Œå­—ç¬¦ä¸²ä½œä¸ºå‘½ä»¤çš„ç‰¹æ®Šå‘½ä»¤ã€‚å®ƒä¼šå°†ä¼ é€’ç»™å®ƒçš„å­—ç¬¦ä¸²ä½œä¸ºShellå‘½ä»¤è¿›è¡Œè§£é‡Šå’Œæ‰§è¡Œã€‚<code>eval</code> å¸¸ç”¨äºåŠ¨æ€ç”Ÿæˆå’Œæ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥å°†å­—ç¬¦ä¸²ä¸­çš„å˜é‡ã€è¡¨è¾¾å¼å’Œå‘½ä»¤è¿›è¡Œæ±‚å€¼å’Œæ‰§è¡Œã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">x=5<br>y=3<br>operation=<span class="hljs-string">&quot;x+y&quot;</span><br>result=$(<span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;echo \$(( <span class="hljs-variable">$operation</span> ))&quot;</span>)<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Result: <span class="hljs-variable">$result</span>&quot;</span><br><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨å¤šè¡Œæ³¨é‡Š"><a href="#ä½¿ç”¨å¤šè¡Œæ³¨é‡Š" class="headerlink" title="ä½¿ç”¨å¤šè¡Œæ³¨é‡Š"></a>ä½¿ç”¨å¤šè¡Œæ³¨é‡Š</h2><p>ä½ å¯ä»¥ä½¿ç”¨ <code>:&lt;&lt;COMMENT</code> å’Œ <code>COMMENT</code> æ¥å®ç°å¤šè¡Œæ³¨é‡Šã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashCopy code:&lt;&lt;<span class="hljs-string">COMMENT</span><br><span class="hljs-string">è¿™æ˜¯å¤šè¡Œæ³¨é‡Šçš„å†…å®¹ã€‚</span><br><span class="hljs-string">å¯ä»¥æœ‰å¤šè¡Œã€‚</span><br><span class="hljs-string">è¿™é‡Œå¯ä»¥å†™æ³¨é‡Šã€‚</span><br><span class="hljs-string">COMMENT</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;è¿™æ˜¯å®é™…çš„ä»£ç ã€‚&quot;</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå†’å· <code>:</code> åé¢çš„ <code>&lt;&lt;COMMENT</code> è¡¨ç¤ºå°†ä¼šè¯»å–ä» <code>COMMENT</code> å¼€å§‹çš„å¤šè¡Œæ–‡æœ¬ï¼Œè¿™éƒ¨åˆ†æ–‡æœ¬ä¼šè¢«å½“ä½œæ³¨é‡Šè€Œè¢«å¿½ç•¥ã€‚å½“Shellæ‰§è¡Œè„šæœ¬æ—¶ï¼Œå®ƒä¼šè·³è¿‡è¿™äº›æ³¨é‡Šå†…å®¹ã€‚</p><h2 id="æƒé™é—®é¢˜"><a href="#æƒé™é—®é¢˜" class="headerlink" title="æƒé™é—®é¢˜"></a>æƒé™é—®é¢˜</h2><h3 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h3><p><strong>parameter :  + - &#x3D;</strong></p><p>+è¡¨ç¤ºå…¨å±€ï¼ˆUser group otherï¼‰æ·»åŠ æŸäº›æƒé™</p><p>-è¡¨ç¤ºå…¨å±€ï¼ˆUser Group Otherï¼‰ åˆ é™¤æŸäº›æƒé™</p><p>&#x3D;è¡¨ç¤ºè®¾ç½®ï¼ˆUser | Group | Otherï¼‰çš„æƒé™æ˜¯ä»€ä¹ˆ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chmod</span> o+wx testfile<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chmod</span> 743 testfile<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/08/01/hello-world/"/>
    <url>/2023/08/01/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
